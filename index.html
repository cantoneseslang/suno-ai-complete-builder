<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suno AI Complete Builder 2025 - ÂåÖÊã¨ÁöÑAIÈü≥Ê•ΩÂà∂‰Ωú„Ç∑„Çπ„ÉÜ„É†</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Authentication Styles -->
    <style>
/* Authentication and Premium UI Styles */

/* Auth Container */
#auth-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
}

.google-signin-btn {
    background: #4285f4;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background-color 0.3s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.google-signin-btn:hover {
    background: #3367d6;
}

/* User Container */
#user-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    display: none;
    flex-direction: column;
    gap: 12px;
    min-width: 280px;
}

.dark-mode #user-container {
    background: rgba(30, 30, 30, 0.95);
    color: #e5e7eb;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

.user-name {
    font-weight: 500;
    font-size: 14px;
}

.usage-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 12px;
    color: #666;
}

.dark-mode .usage-info {
    color: #9ca3af;
}

.sign-out-btn {
    background: #ef4444;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.sign-out-btn:hover {
    background: #dc2626;
}

/* Premium Button */
.premium-btn {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
}

.premium-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(251, 191, 36, 0.4);
}

.premium-badge {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Modal Styles */
.upgrade-modal, .limit-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
}

.modal-content {
    background: white;
    border-radius: 16px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    max-width: 480px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    z-index: 1;
}

.dark-mode .modal-content {
    background: #1f2937;
    color: #e5e7eb;
}

.modal-header {
    padding: 24px 24px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
}

.modal-close {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #6b7280;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.3s ease;
}

.modal-close:hover {
    background: #f3f4f6;
}

.dark-mode .modal-close:hover {
    background: #374151;
}

.modal-body {
    padding: 24px;
}

.plan-details {
    text-align: center;
    margin-bottom: 32px;
}

.plan-price {
    margin-bottom: 24px;
}

.plan-price .price {
    font-size: 48px;
    font-weight: 700;
    color: #fbbf24;
}

.plan-price .period {
    font-size: 18px;
    color: #6b7280;
}

.plan-features {
    list-style: none;
    padding: 0;
    margin: 0;
}

.plan-features li {
    padding: 8px 0;
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 16px;
}

.plan-features li i {
    color: #10b981;
    font-size: 16px;
}

.modal-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

.upgrade-btn {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 140px;
}

.upgrade-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
}

.cancel-btn {
    background: #6b7280;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s ease;
    min-width: 140px;
}

.cancel-btn:hover {
    background: #4b5563;
}

/* Upgrade Container */
#upgrade-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
}

/* Usage Warning */
.usage-warning {
    background: #fef3c7;
    border: 1px solid #fbbf24;
    color: #92400e;
    padding: 12px 16px;
    border-radius: 8px;
    margin: 16px 0;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.dark-mode .usage-warning {
    background: rgba(251, 191, 36, 0.1);
    border-color: #fbbf24;
    color: #fbbf24;
}

.usage-warning i {
    font-size: 16px;
}

/* Loading States */
.loading {
    opacity: 0.6;
    pointer-events: none;
    position: relative;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 20px;
    border: 2px solid #f3f3f3;
    border-top: 2px solid #3498db;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
    #user-container {
        position: relative;
        top: auto;
        right: auto;
        margin: 16px;
        min-width: auto;
    }
    
    #auth-container {
        position: relative;
        top: auto;
        right: auto;
        margin: 16px;
        text-align: center;
    }
    
    #upgrade-container {
        position: relative;
        bottom: auto;
        right: auto;
        margin: 16px;
        text-align: center;
    }
    
    .modal-content {
        margin: 20px;
        width: calc(100% - 40px);
    }
    
    .modal-actions {
        flex-direction: column;
    }
    
    .upgrade-btn, .cancel-btn {
        width: 100%;
    }
}
    </style>
    
    <!-- Configuration -->
    <script>
// Configuration for SUNO AI Complete Builder
const config = {
  // Supabase Configuration
  supabase: {
    url: 'https://ncarwqyhpohybnignsxq.supabase.co',
    anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5jYXJ3cXlocG9oeWJuaWduc3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0ODgwMDAsImV4cCI6MjA2ODA2NDAwMH0.Uc9JQYRaIJpHaJNB3-QJLZSZjEYat5He7MMAogD4ruI'
  },
  
  // Stripe Configuration (for future use)
  stripe: {
    publishableKey: 'pk_live_YOUR_PUBLISHABLE_KEY_HERE', // Replace with your actual key
    accountId: 'acct_1NGFrXLopXhymmb3'
  },
  
  // App Configuration
  app: {
    name: 'SUNO AI Complete Builder',
    url: 'https://suno-ai-complete-builder.vercel.app',
    version: '1.0.0'
  },
  
  // Usage Limits
  limits: {
    free: {
      promptGenerations: 100,
      lyricGenerations: 3
    },
    premium: {
      promptGenerations: -1, // unlimited
      lyricGenerations: -1   // unlimited
    }
  },
  
  // Subscription Plans (for future use)
  plans: {
    premium: {
      name: 'Premium Plan',
      price: 9.99,
      currency: 'USD',
      interval: 'month',
      features: [
        'ÁÑ°Âà∂Èôê„Éó„É≠„É≥„Éó„ÉàÁîüÊàê',
        'ÁÑ°Âà∂ÈôêProÊ≠åË©ûÁîüÊàê',
        'ÂÑ™ÂÖà„Çµ„Éù„Éº„Éà',
        'Êñ∞Ê©üËÉΩ„Å∏„ÅÆÊó©Êúü„Ç¢„ÇØ„Çª„Çπ'
      ]
    }
  },
  
  // Authentication Configuration
  auth: {
    enableEmailAuth: true,
    enableGoogleAuth: false, // Temporarily disabled until OAuth is configured
    enableSignUp: true,
    requireEmailConfirmation: true // „É°„Éº„É´Á¢∫Ë™ç„ÇíÊúâÂäπÂåñ
  }
};

// Export for use in other files
if (typeof module !== 'undefined' && module.exports) {
  module.exports = config;
}

// Make available globally
window.SUNO_CONFIG = config;
    </script>
    
    <!-- Âç≥Â∫ß„Å´„Éö„Éº„Ç∏„ÇíË°®Á§∫ -->
    <script>
        // „Éö„Éº„Ç∏„ÅÆË°®Á§∫„ÇíÂº∑Âà∂
        document.documentElement.style.display = 'block';
        if (document.body) {
            document.body.style.display = 'block';
            document.body.style.visibility = 'visible';
            document.body.style.opacity = '1';
        }
        console.log('Page forced to display');
    </script>
    
    <style>
        /* Ë™çË®º„ÉÅ„Çß„ÉÉ„ÇØ‰∏≠„ÅØÂÖ®‰Ωì„ÇíÈùûË°®Á§∫Ôºà‰∏ÄÊôÇÁöÑ„Å´ÁÑ°ÂäπÂåñÔºâ */
        body.auth-checking {
            /* display: none !important; */
        }
        
        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢ */
        .auth-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .auth-loading-content {
            text-align: center;
            color: white;
        }
        
        .spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Ë™çË®º„ÉÅ„Çß„ÉÉ„ÇØ -->
    <script>
        // Ë™çË®º„ÉÅ„Çß„ÉÉ„ÇØÊ©üËÉΩ
        let authCheckComplete = false;
        let supabaseClient = null;
        
        // „Ç∞„É≠„Éº„Éê„É´„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
            // „Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å¶„ÇÇ„Éö„Éº„Ç∏„ÇíË°®Á§∫
            if (document.body.style.display === 'none') {
                document.body.style.display = 'block';
            }
        });
        
        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('Initializing Suno AI Complete Builder...');
                
                // Ë®≠ÂÆö„Å®„É©„Ç§„Éñ„É©„É™„ÅÆË™≠„ÅøËæº„ÅøÁ¢∫Ë™ç
                setTimeout(function() {
                    if (typeof window.supabase !== 'undefined' && window.SUNO_CONFIG) {
                        // Ë™çË®º„Ç∑„Çπ„ÉÜ„É†ÊúâÂäπÊôÇ
                        console.log('Authentication system available');
                        authCheckComplete = true;
                        
                        try {
                            supabaseClient = window.supabase.createClient(
                                window.SUNO_CONFIG.supabase.url,
                                window.SUNO_CONFIG.supabase.anonKey
                            );
                            console.log('Supabase client initialized');
                        } catch (error) {
                            console.log('Supabase initialization failed, continuing without auth:', error);
                        }
                    } else {
                        // Ë™çË®º„Ç∑„Çπ„ÉÜ„É†ÁÑ°ÂäπÊôÇÔºà„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºâ
                        console.log('Authentication system not available, running in standalone mode');
                        authCheckComplete = true;
                    }
                    
                    // „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
                    document.body.style.display = 'block';
                    console.log('Page content displayed');
                    
                }, 500); // 500msÂæÖÊ©ü„Åó„Å¶„É©„Ç§„Éñ„É©„É™„ÅÆË™≠„ÅøËæº„Åø„ÇíÁ¢∫Ë™ç
                
            } catch (error) {
                console.error('DOMContentLoaded error:', error);
                // „Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å¶„ÇÇ„Éö„Éº„Ç∏„ÇíË°®Á§∫
                authCheckComplete = true;
                document.body.style.display = 'block';
            }
        });
        
        // „É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢Ë°®Á§∫
        function showAuthLoading() {
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'auth-loading';
            loadingDiv.innerHTML = `
                <div class="auth-loading-content">
                    <div class="spinner"></div>
                    <h2 class="text-xl font-bold mb-2">Ë™çË®ºÁ¢∫Ë™ç‰∏≠...</h2>
                    <p class="text-sm opacity-80">Â∞ë„ÄÖ„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ</p>
                </div>
            `;
            document.body.appendChild(loadingDiv);
            document.body.classList.add('auth-checking');
        }
        
        // „É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢ÈùûË°®Á§∫
        function hideAuthLoading() {
            const loadingDiv = document.querySelector('.auth-loading');
            if (loadingDiv) {
                loadingDiv.remove();
            }
            document.body.classList.remove('auth-checking');
            document.body.style.display = 'block';
        }
        
        function showPageContent() {
            document.body.classList.remove('auth-checking');
            document.body.style.display = 'block';
            document.body.style.visibility = 'visible';
            document.body.style.opacity = '1';
            console.log('Page content displayed');
        }
        
        // SupabaseÂàùÊúüÂåñ
        function initializeAuth() {
            // Ë®≠ÂÆö„ÅÆË™≠„ÅøËæº„ÅøÂæÖ„Å°
            if (typeof window.supabase === 'undefined' || !window.SUNO_CONFIG) {
                setTimeout(initializeAuth, 100);
                return;
            }
            
            try {
                supabaseClient = window.supabase.createClient(
                    window.SUNO_CONFIG.supabase.url,
                    window.SUNO_CONFIG.supabase.anonKey
                );
                
                // „Çª„ÉÉ„Ç∑„Éß„É≥„ÉÅ„Çß„ÉÉ„ÇØ
                checkAuthSession();
            } catch (error) {
                console.error('Supabase initialization error:', error);
                redirectToAuth();
            }
        }
        
        // Ë™çË®º„Çª„ÉÉ„Ç∑„Éß„É≥„ÉÅ„Çß„ÉÉ„ÇØ
        async function checkAuthSession() {
            try {
                const { data: { session }, error } = await supabaseClient.auth.getSession();
                
                if (error) {
                    console.error('Auth session error:', error);
                    redirectToAuth();
                    return;
                }
                
                if (!session) {
                    // Êú™Ë™çË®º„ÅÆÂ†¥Âêà„ÅØË™çË®º„Éö„Éº„Ç∏„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà
                    console.log('No active session found, redirecting to login');
                    redirectToAuth();
                    return;
                }
                
                console.log('User authenticated:', session.user.email);
                
                // Ë™çË®ºÊ∏à„Åø„ÅÆÂ†¥Âêà„ÅØ‰ΩøÁî®Âà∂Èôê„Çí„ÉÅ„Çß„ÉÉ„ÇØ
                await checkUsageLimits(session.user.id);
                authCheckComplete = true;
                
                // ‰ΩøÁî®Áä∂Ê≥ÅË°®Á§∫„ÇíÂàùÊúüÂåñÔºà‰∏ÄÊôÇÁöÑ„Å´ÁÑ°ÂäπÂåñÔºâ
                // await updateUsageDisplay();
                
                // „Éö„Éº„Ç∏„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
                hideAuthLoading();
                
            } catch (error) {
                console.error('Auth check error:', error);
                redirectToAuth();
            }
        }
        
        // Ë™çË®º„Éö„Éº„Ç∏„Å´„É™„ÉÄ„Ç§„É¨„ÇØ„Éà
        function redirectToAuth() {
            console.log('Redirecting to login page');
            window.location.href = '/login.html';
        }
        
        // ‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ
        async function checkUsageLimits(userId) {
            try {
                // ‰ΩøÁî®Âà∂Èôê„É¨„Ç≥„Éº„Éâ„ÅÆÁ¢∫Ë™ç„Éª‰ΩúÊàê
                const { data, error } = await supabaseClient
                    .from('usage_limits')
                    .select('*')
                    .eq('user_id', userId)
                    .single();
                
                if (error && error.code === 'PGRST116') {
                    // ‰ΩøÁî®Âà∂Èôê„É¨„Ç≥„Éº„Éâ„ÅåÂ≠òÂú®„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ‰ΩúÊàê
                    await createUsageLimits(userId);
                } else if (error) {
                    console.error('Usage limits check error:', error);
                }
            } catch (error) {
                console.error('Usage limits error:', error);
            }
        }
        
        // ‰ΩøÁî®Âà∂Èôê„É¨„Ç≥„Éº„Éâ‰ΩúÊàê
        async function createUsageLimits(userId) {
            try {
                const { error } = await supabaseClient
                    .from('usage_limits')
                    .insert({
                        user_id: userId,
                        prompt_generations_used: 0,
                        prompt_generations_limit: 100,
                        lyric_generations_used: 0,
                        lyric_generations_limit: 3,
                        reset_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString()
                    });
                
                if (error) {
                    console.error('Create usage limits error:', error);
                }
            } catch (error) {
                console.error('Create usage limits error:', error);
            }
        }
        
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´Ë™çË®º„ÉÅ„Çß„ÉÉ„ÇØÂÆüË°å
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Initializing Suno AI Complete Builder...');
            
            // Ë™çË®º„Ç∑„Çπ„ÉÜ„É†„ÇíÁÑ°Âäπ„Å´„Åó„Å¶„ÄÅÁõ¥Êé•„É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
            document.body.style.display = 'block';
            document.body.style.visibility = 'visible';
            document.body.style.opacity = '1';
            
            // Ë™çË®º„Ç∑„Çπ„ÉÜ„É†„ÅåÂà©Áî®ÂèØËÉΩ„Åß„Å™„ÅÑÂ†¥Âêà„ÅØ„Çπ„Çø„É≥„Éâ„Ç¢„É≠„É≥„É¢„Éº„Éâ„ÅßÂãï‰Ωú
            console.log('Authentication system not available, running in standalone mode');
            
            // „Éö„Éº„Ç∏„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
            showPageContent();
            
            // ÂàùÊúü„Éó„É≠„É≥„Éó„Éà„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË°®Á§∫ÔºàË§áÊï∞ÂõûÂÆüË°å„Åó„Å¶Á¢∫ÂÆü„Å´Ë°®Á§∫Ôºâ
            showInitialPromptSection();
            setTimeout(showInitialPromptSection, 100);
            setTimeout(showInitialPromptSection, 500);
            setTimeout(showInitialPromptSection, 1000);
            setTimeout(showInitialPromptSection, 2000);
        });
        
        // ÂÆåÂÖ®„Å´Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´„ÇÇÂÆüË°å
        window.addEventListener('load', function() {
            console.log('Window load event - showing prompt section');
            setTimeout(showInitialPromptSection, 100);
            setTimeout(showInitialPromptSection, 500);
        });
    </script>
    
    <style>
        /* „ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÂü∫Êú¨Ë®≠ÂÆö */
        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #e2e8f0;
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        /* „Ç≥„É≥„ÉÜ„Éä„ÅÆËÉåÊôØ */
        .container {
            background: rgba(15, 15, 35, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .genre-btn {
            background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 100%);
            transition: all 0.3s ease;
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #e2e8f0;
            padding: 8px 16px;
            margin: 4px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .genre-btn:hover {
            background: linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
            border-color: rgba(139, 92, 246, 0.6);
        }
        .genre-btn.selected {
            background: linear-gradient(135deg, #ec4899 0%, #f59e0b 100%);
            border-color: rgba(236, 72, 153, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
            color: #ffffff;
        }
        .artist-btn {
            background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
            transition: all 0.3s ease;
            border: 1px solid rgba(6, 182, 212, 0.3);
            color: #e2e8f0;
            padding: 8px 16px;
            margin: 4px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .artist-btn:hover {
            background: linear-gradient(135deg, #0284c7 0%, #0891b2 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(6, 182, 212, 0.4);
            border-color: rgba(6, 182, 212, 0.6);
        }
        .artist-btn.selected {
            background: linear-gradient(135deg, #f59e0b 0%, #eab308 100%);
            border-color: rgba(245, 158, 11, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
            color: #1f2937;
        }

        .tab-btn {
            background: rgba(30, 41, 59, 0.8);
            color: #cbd5e1;
            border: 1px solid rgba(71, 85, 105, 0.5);
            padding: 12px 24px;
            margin: 4px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        .tab-btn:hover {
            background: rgba(51, 65, 85, 0.9);
            color: #e2e8f0;
            border-color: rgba(139, 92, 246, 0.5);
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 100%);
            color: #ffffff;
            border-color: rgba(139, 92, 246, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }
        .lyrics-candidate {
            background: rgba(30, 41, 59, 0.6);
            border: 2px solid rgba(71, 85, 105, 0.5);
            border-radius: 8px;
            padding: 16px;
            margin: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            color: #e2e8f0;
        }
        .lyrics-candidate:hover {
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.2);
            background: rgba(51, 65, 85, 0.7);
        }
        .lyrics-candidate.selected {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
        }
        .search-box {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(71, 85, 105, 0.5);
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 16px;
            background: rgba(30, 41, 59, 0.6);
            color: #e2e8f0;
            backdrop-filter: blur(10px);
        }
        .search-box:focus {
            outline: none;
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
            background: rgba(51, 65, 85, 0.7);
        }
        .search-box::placeholder {
            color: #94a3b8;
        }
        .tab-content {
            scroll-margin-top: 20px;
        }
        #prompt-section {
            animation: slideIn 0.3s ease-out;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            z-index: 9999 !important;
            position: fixed !important;
            top: 30% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 95% !important;
            max-width: 800px !important;
            height: auto !important;
            max-height: 300px !important;
            margin: 0 auto !important;
        }
        @keyframes slideIn {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .mode-btn {
            position: relative;
            overflow: hidden;
        }
        .mode-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        .mode-btn.active::after {
            content: '‚úì';
            position: absolute;
            top: 5px;
            right: 10px;
            background: white;
            color: #10b981;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* lyrics.html„Åã„ÇâËøΩÂä†„Åï„Çå„Åü„Çπ„Çø„Ç§„É´ */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .typing-animation {
            border-right: 2px solid #4f46e5;
            animation: typing 2s steps(40, end), blink 0.75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink {
            from, to { border-color: transparent }
            50% { border-color: #4f46e5; }
        }
        .emotion-meter {
            height: 8px;
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #3b82f6 75%, #8b5cf6 100%);
            border-radius: 4px;
        }
        .generated-lyrics {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-left: 4px solid #4f46e5;
        }
        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .chart-container {
            height: 300px;
        }
        .emotion-visual {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }
        .wave-animation {
            position: absolute;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: wave 3s linear infinite;
        }
        @keyframes wave {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É†Áî®„Çπ„Çø„Ç§„É´ */
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .hover-scale:hover {
            transform: scale(1.02);
        }
        .section-separator {
            border-top: 2px solid rgba(139, 92, 246, 0.5);
            margin: 2rem 0;
        }
        .lyrics-output {
            background: linear-gradient(to right, rgba(30, 41, 59, 0.8), rgba(51, 65, 85, 0.6));
            border-left: 4px solid #8b5cf6;
            color: #e2e8f0;
        }
        .structure-part {
            border-left: 3px solid #10b981;
            background: rgba(16, 185, 129, 0.1);
            color: #e2e8f0;
        }
        .animate-pulse-soft {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        /* „ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÁî®„Éï„Ç©„Éº„É†„Çπ„Çø„Ç§„É´ */
        select, input[type="text"], input[type="number"], input[type="range"], textarea {
            background: rgba(55, 65, 81, 0.8) !important;
            color: #e2e8f0 !important;
            border: 1px solid rgba(107, 114, 128, 0.5) !important;
        }
        select:focus, input:focus, textarea:focus {
            background: rgba(75, 85, 99, 0.9) !important;
            border-color: rgba(139, 92, 246, 0.6) !important;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2) !important;
        }
        
        /* „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„Å®„É©„Ç∏„Ç™„Éú„Çø„É≥ */
        input[type="checkbox"], input[type="radio"] {
            accent-color: #8b5cf6;
        }
        
        /* „Éú„Çø„É≥„Çπ„Çø„Ç§„É´ */
        button {
            transition: all 0.3s ease;
        }
        
        /* „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà„Éú„Çø„É≥ */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(139, 92, 246, 0.9);
            border: none;
            color: white;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            font-size: 18px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .theme-toggle:hover {
            background: rgba(139, 92, 246, 1);
            transform: scale(1.1);
        }
        
        /* „É©„Ç§„Éà„É¢„Éº„ÉâÁî®„Çπ„Çø„Ç§„É´ */
        body.light-mode {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            color: #1f2937;
        }
        
        body.light-mode .container {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        body.light-mode .bg-gray-800 {
            background: rgba(255, 255, 255, 0.9) !important;
            border-color: rgba(0, 0, 0, 0.1) !important;
        }
        
        body.light-mode .text-white {
            color: #1f2937 !important;
        }
        
        body.light-mode .text-gray-300 {
            color: #6b7280 !important;
        }
        
        body.light-mode .text-gray-200 {
            color: #374151 !important;
        }
        
        body.light-mode .text-gray-400 {
            color: #6b7280 !important;
        }
        
        body.light-mode .genre-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-color: rgba(99, 102, 241, 0.3);
            color: white;
        }
        
        body.light-mode .genre-btn:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        
        body.light-mode .artist-btn {
            background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
            border-color: rgba(14, 165, 233, 0.3);
            color: white;
        }
        
        body.light-mode .artist-btn:hover {
            background: linear-gradient(135deg, #0284c7 0%, #0891b2 100%);
        }
        
        body.light-mode .tab-btn {
            background: rgba(243, 244, 246, 0.9);
            color: #374151;
            border-color: rgba(209, 213, 219, 0.8);
        }
        
        body.light-mode .tab-btn:hover {
            background: rgba(229, 231, 235, 1);
            color: #1f2937;
        }
        
        body.light-mode .tab-btn.active {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
        }
        
        body.light-mode .search-box {
            background: rgba(255, 255, 255, 0.9) !important;
            color: #1f2937 !important;
            border-color: rgba(209, 213, 219, 0.8) !important;
        }
        
        body.light-mode .search-box:focus {
            background: rgba(255, 255, 255, 1) !important;
            border-color: rgba(99, 102, 241, 0.6) !important;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1) !important;
        }
        
        body.light-mode .search-box::placeholder {
            color: #9ca3af !important;
        }
        
        body.light-mode select, 
        body.light-mode input[type="text"], 
        body.light-mode input[type="number"], 
        body.light-mode input[type="range"], 
        body.light-mode textarea {
            background: rgba(255, 255, 255, 0.9) !important;
            color: #1f2937 !important;
            border: 1px solid rgba(209, 213, 219, 0.8) !important;
        }
        
        body.light-mode select:focus, 
        body.light-mode input:focus, 
        body.light-mode textarea:focus {
            background: rgba(255, 255, 255, 1) !important;
            border-color: rgba(99, 102, 241, 0.6) !important;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1) !important;
        }
        
        body.light-mode .lyrics-output {
            background: linear-gradient(to right, #f8fafc, #f1f5f9);
            border-left: 4px solid #6366f1;
            color: #1f2937;
        }
        
        body.light-mode .structure-part {
            background: rgba(16, 185, 129, 0.1);
            color: #1f2937;
        }
        
        body.light-mode .theme-toggle {
            background: rgba(31, 41, 55, 0.9);
        }
        
        body.light-mode .theme-toggle:hover {
            background: rgba(31, 41, 55, 1);
        }
        
        /* Ê≠åË©û„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÂØæÂøú */
        .text-gray-700 {
            color: #e5e7eb !important;
        }
        
        /* „É©„Ç§„Éà„É¢„Éº„ÉâÊôÇ„ÅÆÊ≠åË©û„Çª„ÇØ„Ç∑„Éß„É≥ */
        body.light-mode .text-gray-700 {
            color: #374151 !important;
        }
        
        /* Ê≠åË©û„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆËÉåÊôØËâ≤Ôºà„ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÔºâ */
        [class*="bg-green-50"] {
            background-color: rgba(16, 185, 129, 0.1) !important;
        }
        [class*="bg-blue-50"] {
            background-color: rgba(59, 130, 246, 0.1) !important;
        }
        [class*="bg-purple-50"] {
            background-color: rgba(139, 92, 246, 0.1) !important;
        }
        [class*="bg-orange-50"] {
            background-color: rgba(249, 115, 22, 0.1) !important;
        }
        [class*="bg-red-50"] {
            background-color: rgba(239, 68, 68, 0.1) !important;
        }
        [class*="bg-yellow-50"] {
            background-color: rgba(245, 158, 11, 0.1) !important;
        }
        [class*="bg-indigo-50"] {
            background-color: rgba(99, 102, 241, 0.1) !important;
        }
        [class*="bg-pink-50"] {
            background-color: rgba(236, 72, 153, 0.1) !important;
        }
        
        /* Ê≠åË©û„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„Éò„ÉÉ„ÉÄ„Éº„ÉÜ„Ç≠„Çπ„ÉàÔºà„ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÔºâ */
        [class*="text-green-800"] {
            color: #34d399 !important;
        }
        [class*="text-blue-800"] {
            color: #60a5fa !important;
        }
        [class*="text-purple-800"] {
            color: #a78bfa !important;
        }
        [class*="text-orange-800"] {
            color: #fb923c !important;
        }
        [class*="text-red-800"] {
            color: #f87171 !important;
        }
        [class*="text-yellow-800"] {
            color: #fbbf24 !important;
        }
        [class*="text-indigo-800"] {
            color: #818cf8 !important;
        }
        [class*="text-pink-800"] {
            color: #f472b6 !important;
        }
        
        /* „É©„Ç§„Éà„É¢„Éº„ÉâÊôÇ„ÅÆÊ≠åË©û„Çª„ÇØ„Ç∑„Éß„É≥ËÉåÊôØËâ≤ */
        body.light-mode [class*="bg-green-50"] {
            background-color: #f0fdf4 !important;
        }
        body.light-mode [class*="bg-blue-50"] {
            background-color: #eff6ff !important;
        }
        body.light-mode [class*="bg-purple-50"] {
            background-color: #faf5ff !important;
        }
        body.light-mode [class*="bg-orange-50"] {
            background-color: #fff7ed !important;
        }
        body.light-mode [class*="bg-red-50"] {
            background-color: #fef2f2 !important;
        }
        body.light-mode [class*="bg-yellow-50"] {
            background-color: #fefce8 !important;
        }
        body.light-mode [class*="bg-indigo-50"] {
            background-color: #eef2ff !important;
        }
        body.light-mode [class*="bg-pink-50"] {
            background-color: #fdf2f8 !important;
        }
        
        /* „É©„Ç§„Éà„É¢„Éº„ÉâÊôÇ„ÅÆÊ≠åË©û„Çª„ÇØ„Ç∑„Éß„É≥„Éò„ÉÉ„ÉÄ„Éº„ÉÜ„Ç≠„Çπ„Éà */
        body.light-mode [class*="text-green-800"] {
            color: #166534 !important;
        }
        body.light-mode [class*="text-blue-800"] {
            color: #1e40af !important;
        }
        body.light-mode [class*="text-purple-800"] {
            color: #6b21a8 !important;
        }
        body.light-mode [class*="text-orange-800"] {
            color: #9a3412 !important;
        }
        body.light-mode [class*="text-red-800"] {
            color: #991b1b !important;
        }
        body.light-mode [class*="text-yellow-800"] {
            color: #92400e !important;
        }
        body.light-mode [class*="text-indigo-800"] {
            color: #3730a3 !important;
        }
        body.light-mode [class*="text-pink-800"] {
            color: #be185d !important;
        }
        
        /* „Éò„É´„ÉóÊ©üËÉΩ„ÅÆ„Çπ„Çø„Ç§„É´ */
        .help-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .help-btn:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        
        /* ‰ΩøÁî®Áä∂Ê≥ÅË°®Á§∫ */
        .usage-display {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .usage-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 200px;
        }
        
        .usage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }
        
        .usage-label {
            color: #6b7280;
            font-weight: 500;
        }
        
        .usage-count {
            color: #374151;
            font-weight: 600;
        }
        
        .sign-out-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 8px;
        }
        
        .sign-out-btn:hover {
            background: #dc2626;
        }
        
        /* ‰ΩøÁî®Âà∂Èôê„É¢„Éº„ÉÄ„É´ */
        .usage-limit-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .usage-limit-modal .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        .usage-limit-modal .modal-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
            position: relative;
            z-index: 1;
        }
        
        .usage-limit-modal .modal-header {
            padding: 24px 24px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .usage-limit-modal .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #f59e0b;
        }
        
        .usage-limit-modal .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        
        .usage-limit-modal .modal-close:hover {
            background: #f3f4f6;
        }
        
        .usage-limit-modal .modal-body {
            padding: 24px;
            text-align: center;
        }
        
        .limit-icon {
            font-size: 48px;
            color: #f59e0b;
            margin-bottom: 16px;
        }
        
        .limit-message {
            font-size: 16px;
            color: #374151;
            margin-bottom: 24px;
            line-height: 1.5;
        }
        
        .limit-info {
            background: #f9fafb;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }
        
        .limit-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            font-size: 14px;
        }
        
        .limit-label {
            color: #6b7280;
        }
        
        .limit-value {
            color: #374151;
            font-weight: 600;
        }
        
        .btn-understand {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-understand:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        /* „Éò„É´„Éó„É¢„Éº„ÉÄ„É´ */
        .help-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .help-content {
            background: rgba(30, 41, 59, 0.95);
            border: 1px solid rgba(71, 85, 105, 0.5);
            border-radius: 16px;
            padding: 30px;
            max-width: 900px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
        }
        
        body.light-mode .help-content {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(0, 0, 0, 0.1);
        }
        
        .help-step {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        
        .help-step:hover {
            background: rgba(139, 92, 246, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.2);
        }
        
        body.light-mode .help-step {
            background: rgba(99, 102, 241, 0.05);
            border-color: rgba(99, 102, 241, 0.2);
        }
        
        body.light-mode .help-step:hover {
            background: rgba(99, 102, 241, 0.1);
        }
        
        .step-number {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .close-help {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .close-help:hover {
            color: #f87171;
            transform: scale(1.1);
        }
        
        /* „ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÁî®„ÉÜ„Ç≠„Çπ„ÉàËâ≤ */
        .text-gray-600 {
            color: #d1d5db !important;
        }
        .text-gray-700 {
            color: #e5e7eb !important;
        }
        .text-gray-800 {
            color: #f3f4f6 !important;
        }
        
        /* „Éú„Éº„ÉÄ„ÉºËâ≤„ÇÇË™øÊï¥ */
        .border-blue-200 {
            border-color: rgba(139, 92, 246, 0.4) !important;
        }
        .border-green-200 {
            border-color: rgba(16, 185, 129, 0.4) !important;
        }
        .border-purple-200 {
            border-color: rgba(168, 85, 247, 0.4) !important;
        }
    </style>
</head>
<body class="min-h-screen" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
    <!-- Ë™çË®º„Ç≥„É≥„ÉÜ„Éä -->
    <div id="auth-container" style="display: none;"></div>
    <div id="user-container" style="display: none;"></div>
    
    <!-- „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Ç≥„É≥„ÉÜ„Éä -->
    <div id="upgrade-container"></div>
    
    <!-- „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà„Éú„Çø„É≥ -->
    <button class="theme-toggle" onclick="toggleTheme()" title="„ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà">
        <i id="theme-icon" class="fas fa-sun"></i>
    </button>
    
    <div class="container mx-auto px-4 py-4">
        <h1 class="text-4xl font-bold text-center mb-4 text-white">
            <i class="fas fa-music mr-3 text-purple-400"></i>Suno AI Complete Builder 2025
        </h1>

        
        <!-- „É°„Ç§„É≥Ê©üËÉΩÈÅ∏Êäû -->
        <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-4 mb-6">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-xl font-bold text-center text-white flex-1">üéØ ‰ΩúÊàê„É¢„Éº„ÉâÈÅ∏Êäû</h2>
                <button onclick="showHelp()" class="help-btn">
                    <i class="fas fa-question-circle mr-2"></i>„Éò„É´„Éó
                </button>
            </div>
            <div class="flex flex-wrap justify-center gap-4">
                <button id="prompt-mode-btn" onclick="setMode('prompt')" class="mode-btn bg-purple-500 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-all active">
                    <i class="fas fa-sliders-h mr-2"></i>Êõ≤„ÅÆ„Éó„É≠„É≥„Éó„Éà‰ΩúÊàê
                </button>
                <button id="pro-lyrics-mode-btn" onclick="setMode('pro-lyrics')" class="mode-btn bg-indigo-600 hover:bg-indigo-800 text-white font-bold py-3 px-6 rounded-lg text-lg transition-all">
                    <i class="fas fa-crown mr-2"></i>ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É†
                </button>
            </div>
        </div>
        
        <!-- Ë®ÄË™ûÈÅ∏ÊäûÔºà„Éà„ÉÉ„Éó„Éö„Éº„Ç∏Ôºâ -->
        <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4 text-white">üåê „Éó„É≠„É≥„Éó„ÉàË®ÄË™ûÈÅ∏Êäû</h2>
            <div class="flex flex-wrap justify-center">
                <button class="genre-btn selected" onclick="selectPromptLanguage(this, 'cantonese')" id="prompt-lang-cantonese">üá≠üá∞ Â∫ÉÊù±Ë™û(ÁπÅ‰ΩìÂ≠ó)</button>
                <button class="genre-btn" onclick="selectPromptLanguage(this, 'chinese')" id="prompt-lang-chinese">üá®üá≥ ‰∏≠ÂõΩË™û(Á∞°‰ΩìÂ≠ó)</button>
                <button class="genre-btn" onclick="selectPromptLanguage(this, 'japanese')" id="prompt-lang-japanese">üáØüáµ Êó•Êú¨Ë™û</button>
                <button class="genre-btn" onclick="selectPromptLanguage(this, 'english')" id="prompt-lang-english">üá∫üá∏ Ëã±Ë™û</button>
            </div>
        </div>
        
        <!-- Êõ≤„ÅÆ„Éó„É≠„É≥„Éó„Éà‰ΩúÊàê„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div id="prompt-creation-section">
            <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
            <div class="flex flex-wrap justify-center mb-6">
                <button class="tab-btn active" onclick="showTab('vocal')">üé§ „Éú„Éº„Ç´„É´„Çø„Ç∞</button>
                <button class="tab-btn" onclick="showTab('moods')">‚ú® „É†„Éº„Éâ„Éª„Çπ„Çø„Ç§„É´</button>
                <button class="tab-btn" onclick="showTab('genres')">üéµ „Ç∏„É£„É≥„É´</button>
                <button class="tab-btn" onclick="showTab('artists')">‚≠ê Ê≠åÊâã„Çπ„Çø„Ç§„É´</button>
            </div>

            <!-- „Éú„Éº„Ç´„É´„Çø„Ç∞„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div id="vocal-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12">
                <h2 class="text-2xl font-bold mb-4 text-white">üé§ „Éú„Éº„Ç´„É´„Çø„Ç∞</h2>
                <div class="flex flex-wrap">
                    <button class="genre-btn" onclick="toggleSelection(this, 'Male Vocal')" data-translation="Áî∑ÊÄß„Éú„Éº„Ç´„É´">Male Vocal<br><small>Áî∑ÊÄß„Éú„Éº„Ç´„É´</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Female Vocal')" data-translation="Â•≥ÊÄß„Éú„Éº„Ç´„É´">Female Vocal<br><small>Â•≥ÊÄß„Éú„Éº„Ç´„É´</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Duet')" data-translation="„Éá„É•„Ç®„ÉÉ„Éà">Duet<br><small>„Éá„É•„Ç®„ÉÉ„Éà</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Choir')" data-translation="ÂêàÂî±">Choir<br><small>ÂêàÂî±</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Whisper')" data-translation="„Åï„Åï„ÇÑ„Åç">Whisper<br><small>„Åï„Åï„ÇÑ„Åç</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Spoken Word')" data-translation="Ë™û„Çä">Spoken Word<br><small>Ë™û„Çä</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Harmonies')" data-translation="„Éè„Éº„É¢„Éã„Éº">Harmonies<br><small>„Éè„Éº„É¢„Éã„Éº</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Vulnerable Vocals')" data-translation="ÊÑüÊÉÖÁöÑ„Å™Ê≠åÂ£∞">Vulnerable Vocals<br><small>ÊÑüÊÉÖÁöÑ„Å™Ê≠åÂ£∞</small></button>
                </div>
            </div>

            <!-- „É†„Éº„Éâ„Éª„Çπ„Çø„Ç§„É´„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div id="moods-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12" style="display: none;">
                <h2 class="text-2xl font-bold mb-4 text-white">‚ú® „É†„Éº„Éâ„Éª„Çπ„Çø„Ç§„É´</h2>
                <div id="moods-container"></div>
            </div>

            <!-- „Ç∏„É£„É≥„É´„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div id="genres-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12" style="display: none;">
                <h2 class="text-2xl font-bold mb-4 text-white">üéµ Èü≥Ê•Ω„Ç∏„É£„É≥„É´ <span id="genres-count" class="text-lg text-gray-400"></span></h2>
                <input type="text" class="search-box" placeholder="„Ç∏„É£„É≥„É´„ÇíÊ§úÁ¥¢..." onkeyup="searchGenres(this.value)">
                <div id="genres-container"></div>
            </div>

            <!-- Ê≠åÊâã„Çπ„Çø„Ç§„É´„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div id="artists-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12" style="display: none;">
                <h2 class="text-2xl font-bold mb-4 text-white">‚≠ê Ê≠åÊâã„Çπ„Çø„Ç§„É´ <span id="artists-count" class="text-lg text-gray-400"></span></h2>
                <input type="text" class="search-box" placeholder="Ê≠åÊâã„ÇíÊ§úÁ¥¢..." onkeyup="searchArtists(this.value)">
                <div id="artists-container" class="flex flex-wrap"></div>
            </div>


        </div>

        <!-- ÁîüÊàê„Åï„Çå„Åü„Éó„É≠„É≥„Éó„ÉàË°®Á§∫Ôºà„Éï„É≠„Éº„ÉàÔºâ -->
        <div id="prompt-section" class="fixed bg-gray-900 bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl p-4 max-w-2xl border-2 border-purple-500" style="display: block !important; visibility: visible !important; opacity: 1 !important; z-index: 9999 !important; top: 30%; left: 50%; transform: translate(-50%, -50%); width: 95%; max-width: 800px; height: auto; max-height: 300px; margin: 0 auto;">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-lg font-bold text-white">üéõÔ∏è ÁîüÊàê„Åï„Çå„Åü„Çπ„Çø„Ç§„É´„Éó„É≠„É≥„Éó„Éà</h2>
                <button onclick="document.getElementById('prompt-section').style.display='none'" class="text-gray-400 hover:text-gray-200">
                    <i class="fas fa-times-circle text-xl"></i>
                </button>
            </div>
            <div class="bg-gray-800 bg-opacity-80 p-3 rounded-lg mb-3 max-h-32 overflow-y-auto border border-gray-600">
                <pre id="generated-prompt" class="whitespace-pre-wrap text-sm font-medium text-gray-200">ÈÅ∏Êäû„Åó„Åü„Çπ„Çø„Ç§„É´„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</pre>
            </div>
            <div class="flex gap-2">
                <button onclick="copyPrompt()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1.5 px-3 rounded flex-1 transition-all text-sm">
                    <i class="fas fa-copy mr-1"></i>„Ç≥„Éî„Éº
                </button>
                <button onclick="clearPrompt()" class="bg-red-500 hover:bg-red-700 text-white font-bold py-1.5 px-3 rounded flex-1 transition-all text-sm">
                    <i class="fas fa-times mr-1"></i>„ÇØ„É™„Ç¢
                </button>
            </div>
        </div>





        <!-- ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É†„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div id="pro-lyrics-creation-section" style="display: none;">
            <!-- Ê≠åË©ûÁîüÊàê„Éë„É©„É°„Éº„ÇøÔºàÊúÄÂÑ™ÂÖà„Éª„Éà„ÉÉ„ÉóÈÖçÁΩÆÔºâ -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 hover-scale transition-transform duration-300 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-sliders-h text-purple-400 mr-3"></i>ProÊ≠åË©ûÁîüÊàê„Éë„É©„É°„Éº„Çø
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Âü∫Êú¨Ë®≠ÂÆö -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-200 border-b-2 border-purple-400 pb-2">Âü∫Êú¨Ë®≠ÂÆö</h3>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Èü≥Ê•Ω„Ç∏„É£„É≥„É´</label>
                                <select id="pro-genre" class="w-full p-3 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-gray-700 text-white">
                                    <option>„Éù„ÉÉ„Éó„Çπ</option>
                                    <option>„Éê„É©„Éº„Éâ</option>
                                    <option>„É≠„ÉÉ„ÇØ</option>
                                    <option>„Éï„Ç©„Éº„ÇØ</option>
                                    <option>R&B</option>
                                    <option>„Ç´„É≥„Éà„É™„Éº</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">‰∏ªË¶Å„ÉÜ„Éº„Éû</label>
                                <input type="text" id="pro-theme" placeholder="‰æãÔºöÊÅãÊÑõ„ÄÅÂèãÊÉÖ„ÄÅÊàêÈï∑..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ÂØæË±°Âπ¥ÈΩ¢Â±§</label>
                                <select id="pro-age" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option>ÂÖ®Âπ¥ÈΩ¢</option>
                                    <option>10‰ª£</option>
                                    <option>20‰ª£</option>
                                    <option>30‰ª£‰ª•‰∏ä</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- ÊÑüÊÉÖË®≠ÂÆö -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-700 border-b-2 border-green-200 pb-2">ÊÑüÊÉÖË®≠ÂÆö</h3>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">‰∏ªË¶ÅÊÑüÊÉÖ</label>
                                <select id="pro-emotion" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option>Âñú„Å≥</option>
                                    <option>ÊÇ≤„Åó„Åø</option>
                                    <option>Â∏åÊúõ</option>
                                    <option>ÈÉ∑ÊÑÅ</option>
                                    <option>ÊÑõÊÉÖ</option>
                                    <option>ÊÜß„Çå</option>
                                    <option>‰∏çÂÆâ</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ÊÑüÊÉÖ„ÅÆÂº∑Â∫¶</label>
                                <input type="range" id="pro-emotion-intensity" min="1" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>Á©è„ÇÑ„Åã</span>
                                    <span>Âº∑ÁÉà</span>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ÊÑüÊÉÖ„ÅÆÂ§âÂåñ</label>
                                <select id="pro-emotion-change" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option>‰∏ÄÂÆö</option>
                                    <option>Âæê„ÄÖ„Å´‰∏äÊòá</option>
                                    <option>Âæê„ÄÖ„Å´‰∏ãÈôç</option>
                                    <option>Ëµ∑‰ºè„ÅÇ„Çä</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Ë®ÄË™û„ÉªË°®ÁèæË®≠ÂÆö -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-700 border-b-2 border-purple-200 pb-2">Ë®ÄË™û„ÉªË°®ÁèæË®≠ÂÆö</h3>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">Ë®ÄË™û„É¨„Éô„É´</label>
                                <select id="pro-language-level" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>Êó•Â∏∏Ë™û</option>
                                    <option>Ë©©ÁöÑË°®Áèæ</option>
                                    <option>Ê†ºË™øÈ´ò„ÅÑ</option>
                                    <option>Áèæ‰ª£ÁöÑ</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ÊØîÂñ©„ÅÆ‰ΩøÁî®Â∫¶</label>
                                <input type="range" id="pro-metaphor" min="1" max="10" value="6" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>Áõ¥Êé•ÁöÑ</span>
                                    <span>ÊØîÂñ©ÁöÑ</span>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ÈüªÂæã„Éë„Çø„Éº„É≥</label>
                                <select id="pro-rhythm" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>Ëá™ÁÑ∂„Å™ÊµÅ„Çå</option>
                                    <option>ÂÆöÂûãÈüªÂæã</option>
                                    <option>Ëá™Áî±Ë©©</option>
                                    <option>‰ºùÁµ±ÁöÑ</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ËøΩÂä†Ë®≠ÂÆö -->
                    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-2">„Ç≠„Éº„ÉØ„Éº„Éâ„Éª„Éï„É¨„Éº„Ç∫</label>
                            <textarea id="pro-keywords" placeholder="Âê´„ÇÅ„Åü„ÅÑÁâπÂÆö„ÅÆË®ÄËëâ„ÇÑ„Éï„É¨„Éº„Ç∫„ÇíÂÖ•Âäõ..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent h-24"></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-2">ÈÅø„Åë„Åü„ÅÑË°®Áèæ</label>
                            <textarea id="pro-avoid" placeholder="‰ΩøÁî®„ÇíÈÅø„Åë„Åü„ÅÑË°®Áèæ„ÇíÂÖ•Âäõ..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent h-24"></textarea>
                        </div>
                    </div>
                    
                    <!-- ÁîüÊàê„Éú„Çø„É≥ -->
                    <div class="mt-8 text-center">
                        <button onclick="generateProLyrics()" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-12 py-4 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                            <i class="fas fa-magic mr-2"></i>ProÊ≠åË©û„ÇíÁîüÊàê„Åô„Çã
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- ÁîüÊàê„Åï„Çå„ÅüÊ≠åË©ûË°®Á§∫„Ç®„É™„Ç¢ -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-file-alt text-green-400 mr-3"></i>ÁîüÊàê„Åï„Çå„ÅüProÊ≠åË©û
                    </h2>
                    
                    <div id="proLyricsOutput" class="lyrics-output p-6 rounded-lg min-h-96">
                        <div class="text-center text-gray-500 animate-pulse-soft">
                            <i class="fas fa-music text-4xl mb-4"></i>
                            <p class="text-lg">‰∏äË®ò„ÅÆ„Éë„É©„É°„Éº„Çø„ÇíË®≠ÂÆö„Åó„Å¶„ÄåProÊ≠åË©û„ÇíÁîüÊàê„Åô„Çã„Äç„Éú„Çø„É≥„ÇíÊäº„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                        </div>
                    </div>
                    
                    <!-- Ê≠åË©ûË©ï‰æ°Ë°®Á§∫ -->
                    <div id="proLyricsEvaluation" class="mt-6 hidden">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">ProÊ≠åË©ûÂìÅË≥™Ë©ï‰æ°</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-600" id="proEmotionScore">85</div>
                                <div class="text-sm text-gray-600">ÊÑüÊÉÖÁöÑ„Ç§„É≥„Éë„ÇØ„Éà</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-600" id="proLanguageScore">92</div>
                                <div class="text-sm text-gray-600">Ë®ÄË™ûÁöÑÁæé„Åó„Åï</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600" id="proOriginalityScore">78</div>
                                <div class="text-sm text-gray-600">Áã¨ÂâµÊÄß</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-red-600" id="proMusicalScore">89</div>
                                <div class="text-sm text-gray-600">Èü≥Ê•ΩÁöÑÈÅ©ÂêàÊÄß</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <div class="section-separator"></div>
            
            <!-- Êõ≤ÊßãÊàêË®≠ÂÆö -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-list-ol text-orange-400 mr-3"></i>ProÊõ≤ÊßãÊàêË®≠ÂÆö
                    </h2>
                    
                    <div class="mb-6">
                        <p class="text-gray-600 mb-4">ÁèæÂú®„ÅÆÊßãÊàêÔºà‰∏ÄËà¨ÁöÑ„Å™„Éù„ÉÉ„Éó„ÇπÊßãÊàê„Åå„Éá„Éï„Ç©„É´„ÉàË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔºâ</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="space-y-3">
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">IntroÔºà„Ç§„É≥„Éà„É≠Ôºâ</span>
                                        <span class="text-sm text-gray-500">8Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Ê•ΩÊõ≤„ÅÆÂ∞éÂÖ•ÈÉ®ÂàÜ</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Verse 1Ôºà„É¥„Ç°„Éº„Çπ1Ôºâ</span>
                                        <span class="text-sm text-gray-500">16Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Áâ©Ë™û„ÅÆË®≠ÂÆö„ÉªÂ∞éÂÖ•</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">ChorusÔºà„Ç≥„Éº„É©„Çπ„Éª„Çµ„ÉìÔºâ</span>
                                        <span class="text-sm text-gray-500">16Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Ê•ΩÊõ≤„ÅÆ‰∏≠ÂøÉ„É°„ÉÉ„Çª„Éº„Ç∏</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Verse 2Ôºà„É¥„Ç°„Éº„Çπ2Ôºâ</span>
                                        <span class="text-sm text-gray-500">16Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Áâ©Ë™û„ÅÆÂ±ïÈñã„ÉªÁô∫Â±ï</p>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">ChorusÔºà„Ç≥„Éº„É©„Çπ„Éª„Çµ„ÉìÔºâ</span>
                                        <span class="text-sm text-gray-500">16Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">„É°„ÉÉ„Çª„Éº„Ç∏„ÅÆÂº∑Ë™ø</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">BridgeÔºà„Éñ„É™„ÉÉ„Ç∏Ôºâ</span>
                                        <span class="text-sm text-gray-500">8Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Ëª¢Êèõ„ÉªÂ§âÂåñÈÉ®ÂàÜ</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">ChorusÔºàÊúÄÁµÇ„Çµ„ÉìÔºâ</span>
                                        <span class="text-sm text-gray-500">16Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">„ÇØ„É©„Ç§„Éû„ÉÉ„ÇØ„Çπ</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">OutroÔºà„Ç¢„Ç¶„Éà„É≠Ôºâ</span>
                                        <span class="text-sm text-gray-500">8Â∞èÁØÄ</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">Ê•ΩÊõ≤„ÅÆÁµÇÁµê</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÊßãÊàê„Ç´„Çπ„Çø„Éû„Ç§„Ç∫ -->
                    <div class="mt-8">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">ÊßãÊàê„Ç´„Çπ„Çø„Éû„Ç§„Ç∫</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ÊßãÊàê„ÉÜ„É≥„Éó„É¨„Éº„Éà</label>
                                <select id="pro-structure-template" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option>Ê®ôÊ∫ñ„Éù„ÉÉ„Éó„Çπ</option>
                                    <option>„Éê„É©„Éº„ÉâÊßãÊàê</option>
                                    <option>„É≠„ÉÉ„ÇØÊßãÊàê</option>
                                    <option>„Éï„Ç©„Éº„ÇØÊßãÊàê</option>
                                    <option>„Ç´„Çπ„Çø„É†</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ËøΩÂä†Ë¶ÅÁ¥†</label>
                                <select id="pro-additional-elements" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option>„Å™„Åó</option>
                                    <option>Guitar Solo</option>
                                    <option>Piano Solo</option>
                                    <option>Instrumental</option>
                                    <option>Break</option>
                                    <option>Crescendo</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ÁµÇ‰∫ÜÊñπÊ≥ï</label>
                                <select id="pro-ending" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option>ÈÄöÂ∏∏ÁµÇ‰∫Ü</option>
                                    <option>Fade Out</option>
                                    <option>Á™ÅÁÑ∂ÁµÇ‰∫Ü</option>
                                    <option>„É™„Éî„Éº„Éà</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <button onclick="applyProStructureChanges()" class="bg-orange-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors duration-300">
                                <i class="fas fa-sync-alt mr-2"></i>ÊßãÊàê„ÇíÈÅ©Áî®„Åó„Å¶ProÊ≠åË©û„ÇíÂÜçÁîüÊàê
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            
            <div class="section-separator"></div>
            
            <!-- ÊñáÂ≠¶‰ΩúÂìÅÂèÇÁÖßÊ©üËÉΩ -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-book text-indigo-400 mr-3"></i>ÊñáÂ≠¶‰ΩúÂìÅÂèÇÁÖßÊ©üËÉΩ
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- URLÂÖ•Âäõ -->
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-indigo-400 transition-colors">
                            <i class="fas fa-link text-3xl text-indigo-600 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">URLÂÖ•Âäõ</h3>
                            <p class="text-sm text-gray-600 mb-4">ÈùíÁ©∫ÊñáÂ∫´„ÄÅË©©„ÅÆ„Çµ„Ç§„Éà„Å™„Å©„Åã„ÇâÁõ¥Êé•ÂèÇÁÖß</p>
                            <input type="url" id="literary-url" placeholder="https://www.aozora.gr.jp/..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent mb-3">
                            <button onclick="analyzeURL()" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                                <i class="fas fa-search mr-2"></i>ÂàÜÊûêÈñãÂßã
                            </button>
                        </div>
                        
                        <!-- „Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ -->
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors">
                            <i class="fas fa-upload text-3xl text-green-600 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">„Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</h3>
                            <p class="text-sm text-gray-600 mb-4">PDF„ÄÅWord„ÄÅ„ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´„ÇíÁõ¥Êé•„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</p>
                            <input type="file" id="literary-file" accept=".txt,.pdf,.docx" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent mb-3">
                            <button onclick="analyzeFile()" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-file-alt mr-2"></i>„Éï„Ç°„Ç§„É´ÂàÜÊûê
                            </button>
                        </div>
                        
                        <!-- ‰ΩúÂìÅÊ§úÁ¥¢ -->
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-400 transition-colors">
                            <i class="fas fa-search text-3xl text-purple-600 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">‰ΩúÂìÅÊ§úÁ¥¢</h3>
                            <p class="text-sm text-gray-600 mb-4">‰ΩúÂìÅÂêç„Éª‰ΩúËÄÖÂêç„ÅßÊ§úÁ¥¢</p>
                            <input type="text" id="literary-search" placeholder="‰ΩúÂìÅÂêç„Éª‰ΩúËÄÖÂêç..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent mb-3">
                            <button onclick="searchWork()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                <i class="fas fa-search mr-2"></i>Ê§úÁ¥¢
                            </button>
                        </div>
                    </div>
                    
                    <!-- ÂàÜÊûêÁµêÊûúË°®Á§∫ -->
                    <div id="proLiteraryAnalysis" class="mt-8 hidden">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†ÂàÜÊûêÁµêÊûú</h3>
                        <div class="bg-gray-50 rounded-lg p-6">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <h4 class="font-medium text-gray-700 mb-2">Êñá‰ΩìÁâπÂæ¥</h4>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li>‚Ä¢ Âè§ÂÖ∏ÁöÑ„ÅßÊ†ºË™øÈ´ò„ÅÑ</li>
                                        <li>‚Ä¢ ÂèôÊÉÖÁöÑ„Å™Ë°®Áèæ</li>
                                        <li>‚Ä¢ Á∞°ÊΩî„ÅßÂç∞Ë±°ÁöÑ</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-700 mb-2">Ë°®ÁèæÊäÄÊ≥ï</h4>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li>‚Ä¢ Â≠£ÁØÄ„ÅÆÊØîÂñ©</li>
                                        <li>‚Ä¢ ÊÑüË¶öÁöÑÊèèÂÜô</li>
                                        <li>‚Ä¢ Ë±°Âæ¥ÁöÑË°®Áèæ</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-700 mb-2">Ë™ûÂΩôÁâπÊÄß</h4>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li>‚Ä¢ Ë©©ÁöÑË™ûÂΩôÂ§öÁî®</li>
                                        <li>‚Ä¢ ÊÉÖÁ∑íÁöÑË°®ÁèæË±äÂØå</li>
                                        <li>‚Ä¢ ÈüªÂæãÁöÑÈÖçÊÖÆ</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="mt-6 text-center">
                                <button onclick="applyLiteraryElements()" class="bg-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors">
                                    <i class="fas fa-magic mr-2"></i>„Åì„ÅÆË¶ÅÁ¥†„ÇíProÊ≠åË©û„Å´ÈÅ©Áî®
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ‰ΩøÁî®„Ç¨„Ç§„Éâ -->
            <section class="mb-12">
                <div class="bg-gradient-to-r from-gray-800 to-gray-900 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-info-circle text-blue-400 mr-3"></i>ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É†‰ΩøÁî®„Ç¨„Ç§„Éâ
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-3">Âü∫Êú¨ÁöÑ„Å™‰ΩøÁî®ÊâãÈ†Ü</h3>
                            <ol class="space-y-2 text-gray-600">
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">1</span>
                                    ProÊ≠åË©ûÁîüÊàê„Éë„É©„É°„Éº„Çø„ÇíË©≥Á¥∞Ë®≠ÂÆö
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">2</span>
                                    „ÄåProÊ≠åË©û„ÇíÁîüÊàê„Åô„Çã„Äç„Éú„Çø„É≥„ÇíÊäº„Åô
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">3</span>
                                    ÁîüÊàê„Åï„Çå„ÅüProÊ≠åË©û„ÇíÁ¢∫Ë™ç„ÉªË©ï‰æ°
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">4</span>
                                    ProÊõ≤ÊßãÊàê„ÇíË©≥Á¥∞Ë™øÊï¥
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">5</span>
                                    ÊñáÂ≠¶‰ΩúÂìÅÂèÇÁÖß„ÅßË°®Áèæ„ÇíË±ä„Åã„Å´
                                </li>
                            </ol>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-3">ProÊ≠åË©û„ÅÆ„Ç≥„ÉÑ</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    ÂÖ∑‰ΩìÁöÑ„Å™„ÉÜ„Éº„Éû„ÇÑ„Ç∑„ÉÅ„É•„Ç®„Éº„Ç∑„Éß„É≥„ÇíË®≠ÂÆö
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    ÊÑüÊÉÖ„ÅÆÂº∑Â∫¶„Å®Â§âÂåñ„ÇíÁ¥∞„Åã„ÅèË™øÊï¥
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    „Ç∏„É£„É≥„É´„Å´Âøú„Åò„ÅüË®ÄË™û„É¨„Éô„É´„ÇíÈÅ∏Êäû
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    ÊñáÂ≠¶‰ΩúÂìÅÂèÇÁÖß„ÅßÁã¨ÂâµÁöÑ„Å™Ë°®Áèæ„ÇíËøΩÂä†
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    Êõ≤ÊßãÊàê„ÇíÈü≥Ê•Ω„Ç∏„É£„É≥„É´„Å´Âêà„Çè„Åõ„Å¶Ë™øÊï¥
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // lyrics.html„Åã„ÇâÁµ±Âêà„Åï„Çå„Åü„Çµ„É≥„Éó„É´Ê≠åË©û„Éá„Éº„Çø
        const sampleLyrics = {
            'joy': `ÈùíÁ©∫„Å´Èüø„Åè Á¨ë„ÅÑÂ£∞
Â∏åÊúõ„ÅÆÂÖâ„Åå ÂøÉ„ÇíÁÖß„Çâ„Åô
Êñ∞„Åó„ÅÑ‰∏ÄÊ≠© Ë∏è„ÅøÂá∫„Åù„ÅÜ
ÊòéÊó•„Å∏„ÅÆÊââ Èñã„Åã„Çå„Å¶„Çã

„Ç≠„É©„Ç≠„É©„Å®Ëºù„Åè Áû¨Èñì„Çí
Â§ßÂàá„Å´ËÉ∏„Å´ Êä±„Åç„Åó„ÇÅ„Å¶
„Åø„Çì„Å™„ÅßÊ≠å„Åä„ÅÜ „Åì„ÅÆÊ≠å„Çí
Âπ∏„Åõ„Å™ÊôÇÈñì Ê∞∏ÈÅ†„Å´`,
            
            'sadness': `Èõ®Á≤í„ÅåÈ†¨„Çí ‰ºù„ÅÑËêΩ„Å°„Å¶
ÊÄù„ÅÑÂá∫„ÅÆ‰∏≠„Å´ Âêõ„Åå„ÅÑ„Çã
„ÇÇ„ÅÜÊàª„Çå„Å™„ÅÑ „ÅÇ„ÅÆÊó•„ÄÖ„Å´
ÂøÉ„ÅØ‰ªä„ÇÇ Êè∫„Çå„Å¶„ÅÑ„Çã

Ê°ú„ÅÆËä±„Å≥„Çâ Ëàû„ÅÑÊï£„Å£„Å¶
ÊôÇ„ÅÆÊµÅ„Çå„Å´ Ë∫´„Çí‰ªª„Åõ
Ê∂ô„ÅÆÂêë„Åì„ÅÜ„Å´ Ë¶ã„Åà„Çã„ÅÆ„ÅØ
Êñ∞„Åó„ÅÑÂ∏åÊúõ„ÅÆ ÂÖâ„Åã„Å™`,
            
            'love': `Âêõ„ÅÆÁ¨ëÈ°î„Å´ ÂøÉÂ•™„Çè„Çå„Å¶
„Åì„ÅÆÊÉ≥„ÅÑ„Çí „Å©„ÅÜ‰ºù„Åà„Çà„ÅÜ
ÊòüÁ©∫„ÅÆ‰∏ã„Åß ‰∫å‰∫∫„Åç„Çä
Ê∞∏ÈÅ†„ÇíË™ì„ÅÜ „Åì„ÅÆÁû¨Èñì

Êâã„ÇíÂèñ„ÇäÂêà„Å£„Å¶ Ê≠©„ÇÇ„ÅÜ
„Å©„Çì„Å™Âõ∞Èõ£„ÇÇ ‰πó„ÇäË∂ä„Åà„Å¶
ÊÑõ„ÅÆÂäõ„Åß Áµê„Å∞„Çå„Åü
Â•áË∑°„ÅÆÁâ©Ë™û Âßã„Åæ„Çã„Çà`,
            
            'nostalgia': `Â§ïÁÑº„ÅëÁ©∫„Å´ Èüø„ÅèÈêò„ÅÆÈü≥
„ÅÇ„ÅÆÈ†É„ÅÆÂÉï„Çâ ÊÄù„ÅÑÂá∫„Åô
Ê†°Ëàé„ÅÆÂΩ±„Åå Èï∑„Åè‰º∏„Å≥„Å¶
ÈùíÊò•„ÅÆÊó•„ÄÖ „Çà„Åø„Åå„Åà„Çã

ÂèãÈÅî„ÅÆÂ£∞„Åå ËÅû„Åì„Åà„Å¶„Åè„Çã
Êáê„Åã„Åó„ÅÑÈ¢®„Åå È†¨„ÇíÊí´„Åß
ÊôÇ„ÅØÈÅé„Åé„Å¶„ÇÇ Â§â„Çè„Çâ„Å™„ÅÑ
ÂøÉ„ÅÆÂ••„ÅÆ ÂÆùÁâ©`
        };

        // „ÉÅ„É£„Éº„ÉàÂàùÊúüÂåñÂ§âÊï∞
        let emotionChart, linguisticChart, qualityChart;

        // „Éá„Éº„ÇøÂÆöÁæ©
        const artistStyles = {
            "Drake": "Hip-hop, trap, laid-back male vocals, ambient beats",
            "Taylor Swift": "Pop, Alternative Folk, Emotional, female vocals",
            "BTS": "K-Pop, Anthemic, Dance, Dynamic",
            "Billie Eilish": "Pop, Dark, Minimal, female vocals",
            "The Weeknd": "RnB, Dark, Cinematic, male vocals",
            "Ariana Grande": "Pop, Dance Pop, Ethereal, female vocals",
            "Beyonc√©": "RnB, Anthemic, Danceable, female vocals",
            "Kendrick Lamar": "HipHop, Lyrical, Storytelling, male vocals",
            "Lady Gaga": "Pop, Theatrical, Dance, female vocals",
            "Jay-Z": "HipHop, Aggressive, Storytelling, male vocals",
            "Rihanna": "RnB, Dance Pop, Festive, female vocals",
            "Kanye West": "HipHop, Progressive, Eclectic, male vocals",
            "Justin Bieber": "Pop, Danceable, Chillwave, male vocals",
            "Katy Perry": "Pop, Glitter, Festive, female vocals",
            "Metallica": "Thrash metal, aggressive riffs, pounding drums, male vocals",
            "AC/DC": "Hard rock, crunchy guitar riffs, raspy male vocals, driving rhythm",
            "Madonna": "Dance Pop, High-NRG, female vocals",
            "David Bowie": "70s British Rock, Art, Eclectic, male vocals",
            "Bob Dylan": "Folk, Storytelling, Acoustic Guitar, male vocals",
            "Post Malone": "Rap, Ethereal, Ambient, male vocals",
            "Bruno Mars": "Funk-pop blend, groovy rhythms, male vocals, danceable",
            "Ed Sheeran": "Folk-pop, acoustic guitar loops, male vocals, mellow tone",
            "Adele": "Soul, Emotional, Torch-Lounge, female vocals",
            "Queen": "Rock, Operatic, Theatrical, Male Vocals",
            "The Beatles": "60s British Pop, Classic, Rock",
            "Led Zeppelin": "Hard Rock, Blues Rock, Epic",
            "Pink Floyd": "80s Rock, Progressive, Atmospheric",
            "Michael Jackson": "80s Pop, Dance, Iconic, male vocals",
            "Prince": "Funk, Eclectic, Glam, male vocals",
            "Elvis Presley": "50s Rock, Hero Theme, male vocals",
            "Frank Sinatra": "1940s big band, Lounge Singer, male vocals",
            "Aretha Franklin": "Soul, Gospel, Powerful, female vocals",
            "Whitney Houston": "Pop, RnB, Emotional, female vocals",
            "Stevie Wonder": "Soul, Funk, Joyful, male vocals",
            "Bob Marley": "Reggae, Peaceful, Soulful, male vocals",
            "Nirvana": "Grunge, Dark, Raw, Male Vocals",
            "Radiohead": "Alternative Rock, Experimental, Atmospheric",
            "Coldplay": "Atmospheric alt-rock, ambient, male vocals, emotional piano",
            "Green Day": "Punk Rock, Aggressive, Youthful",
            "Red Hot Chili Peppers": "Funk rock, slap bass, male vocals, energetic",
            "Foo Fighters": "Rock, Alternative, Energetic",
            "Linkin Park": "Rock, Nu Metal, Emotional",
            "Imagine Dragons": "Rock, Anthemic, Emotion",
            "The Rolling Stones": "Rock, Blues Rock, Classic",
            "U2": "Rock, Anthemic, Atmospheric, male vocals",
            "Bon Jovi": "Rock, Anthem, Stadium, male vocals",
            "Aerosmith": "Rock, Hard Rock, Classic",
            "Guns N' Roses": "Hard Rock, Raw, Aggressive, male vocals",
            "Daft Punk": "Electronic, Dance, Futuristic",
            "Calvin Harris": "EDM, Dance, Festive, male vocals",
            "Skrillex": "Dubstep, Electronic, Intense, male vocals",
            "Deadmau5": "Electronic, House, Progressive",
            "The Chainsmokers": "EDM, Dance, Party",
            "Marshmello": "EDM, Dance, Happy",
            "Avicii": "EDM, Progressive House, Uplifting",
            "Ti√´sto": "Trance, Progressive, Electronic",
            "Martin Garrix": "Big Room House, Festival, Electronic",
            "Swedish House Mafia": "Progressive House, Festival, Electronic",
            "Fleetwood Mac": "Classic rock, mellow harmonies, emotional, 70s vibe",
            "The Eagles": "Rock, Country Rock, Harmonious",
            "The Doors": "Rock, Psychedelic, Mysterious",
            "Jimi Hendrix": "Rock, Psychedelic, Guitar Virtuoso, male vocals",
            "Janis Joplin": "Rock, Blues Rock, Raw Emotion, female vocals",
            "The Who": "Rock, Hard Rock, Theatrical",
            "Black Sabbath": "Heavy Metal, Dark, Pioneering",
            "Iron Maiden": "Heavy Metal, Epic, Theatrical",
            "Judas Priest": "Heavy Metal, Power, Leather",
            "Ozzy Osbourne": "Heavy Metal, Dark, Theatrical, male vocals",
            "Deep Purple": "Hard Rock, Progressive, Classic",
            "Rainbow": "Hard Rock, Fantasy, Epic",
            "Dio": "Heavy Metal, Fantasy, Powerful",
            "Slayer": "Thrash Metal, Aggressive, Dark",
            "Megadeth": "Thrash Metal, Technical, Aggressive",
            "Anthrax": "Thrash Metal, Crossover, Energetic",
            "Testament": "Thrash Metal, Bay Area, Aggressive",
            "Pantera": "Groove Metal, Heavy, Aggressive",
            "System of a Down": "Metal, Political, Eccentric",
            "Tool": "Progressive Metal, Complex, Dark",
            "A Perfect Circle": "Alternative Metal, Atmospheric, Dark",
            "Nine Inch Nails": "Industrial, Dark, Electronic",
            "Ministry": "Industrial Metal, Aggressive, Political",
            "Rammstein": "Industrial Metal, German, Theatrical",
            "Marilyn Manson": "Industrial Metal, Shock Rock, Dark",
            "Rob Zombie": "Industrial Metal, Horror, Theatrical",
            "Alice Cooper": "Shock Rock, Theatrical, Classic Rock",
            "KISS": "Hard Rock, Glam, Theatrical",
            "Def Leppard": "Hard Rock, Melodic, 80s",
            "Whitesnake": "Hard Rock, Blues Rock, 80s",
            "Europe": "Hard Rock, Melodic, 80s",
            "Scorpions": "Hard Rock, German, Melodic",
            "Motley Crue": "Glam Metal, Party, 80s",
            // ËøΩÂä†„ÅÆ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„Çπ„Çø„Ç§„É´ÂÆöÁæ©
            "Tim McGraw": "Country, Traditional, Male Vocals",
            "Elton John": "Pop Rock, Piano, Theatrical, Male Vocals",
            "Dolly Parton": "Country, Traditional, Female Vocals",
            "Maroon 5": "Pop Rock, Funk, Male Vocals",
            "Shakira": "Latin Pop, Dance, Female Vocals",
            "Dua Lipa": "Pop, Dance, Modern, Female Vocals",
            "Miley Cyrus": "Pop Rock, Alternative, Female Vocals",
            "Cardi B": "Hip Hop, Trap, Female Vocals",
            "Camila Cabello": "Pop, Latin, Female Vocals",
            "Harry Styles": "Pop Rock, British, Male Vocals",
            "Sam Smith": "Soul, Pop, Male Vocals",
            "Lizzo": "Pop, Funk, R&B, Female Vocals",
            "Gorillaz": "Alternative Rock, Electronic, Experimental",
            "Amy Winehouse": "Soul, Jazz, Female Vocals",
            "Phil Collins": "Pop Rock, 80s, Male Vocals",
            "Genesis": "Progressive Rock, Art Rock",
            "Billy Joel": "Pop Rock, Piano, Male Vocals",
            "Nicki Minaj": "Hip Hop, Pop, Female Vocals",
            "Arctic Monkeys": "Indie Rock, British, Male Vocals",
            "Tame Impala": "Psychedelic Rock, Electronic, Male Vocals",
            "The Strokes": "Indie Rock, Garage Rock",
            "Vampire Weekend": "Indie Rock, World Music",
            "Kings of Leon": "Alternative Rock, Southern Rock",
            "The Killers": "Alternative Rock, New Wave",
            "Muse": "Alternative Rock, Progressive",
            "Rage Against the Machine": "Rap Metal, Political",
            "Pearl Jam": "Grunge, Alternative Rock",
            "Soundgarden": "Grunge, Alternative Metal",
            "Alice in Chains": "Grunge, Alternative Metal",
            "Sigur R√≥s": "Post-Rock, Ambient, Ethereal",
            "Bj√∂rk": "Art Pop, Electronic, Experimental, Female Vocals",
            "Enya": "New Age, Celtic, Female Vocals",
            "Lana Del Rey": "Dream Pop, Indie Pop, Female Vocals",
            "Kacey Musgraves": "Country, Alternative, Female Vocals",
            "St. Vincent": "Art Rock, Indie, Female Vocals",
            "Childish Gambino": "Hip Hop, Funk, R&B, Male Vocals",
            "SZA": "R&B, Neo Soul, Female Vocals",
            "Frank Ocean": "R&B, Alternative, Male Vocals",
            "Tyler, The Creator": "Hip Hop, Alternative, Male Vocals",
            "Solange": "R&B, Art Pop, Female Vocals",
            "Brockhampton": "Hip Hop, Alternative, Boy Band",
            "Mac DeMarco": "Indie Rock, Lo-Fi, Male Vocals",
            "Rufus Du Sol": "Electronic, House, Dance",
            "Bon Iver": "Indie Folk, Experimental, Male Vocals",
            "Florence + The Machine": "Indie Rock, Baroque Pop, Female Vocals",
            "Jack White": "Alternative Rock, Blues Rock, Male Vocals",
            "Gary Clark Jr.": "Blues Rock, Soul, Male Vocals",
            "Leon Bridges": "Soul, R&B, Male Vocals",
            "Brittany Howard": "Soul, Rock, Female Vocals",
            "Alabama Shakes": "Blues Rock, Soul",
            "Glass Animals": "Indie Rock, Electronic",
            "Portugal, The Man": "Psychedelic Rock, Indie",
            "FKA Twigs": "Art Pop, Electronic, Female Vocals",
            "The National": "Indie Rock, Alternative",
            "MGMT": "Psychedelic Pop, Electronic",
            "Empire of the Sun": "Electronic, Pop, Synth",
            "Grimes": "Art Pop, Electronic, Female Vocals",
            "James Blake": "Electronic, Soul, Male Vocals",
            "The War on Drugs": "Indie Rock, Americana",
            "Sufjan Stevens": "Indie Folk, Orchestral, Male Vocals",
            "Bonobo": "Electronic, Downtempo, Ambient",
            "Caribou": "Electronic, Psychedelic",
            "Nicolas Jaar": "Electronic, Experimental",
            "Flying Lotus": "Electronic, Experimental Hip Hop",
            "Thundercat": "Funk, Jazz, Bass, Male Vocals",
            "Kamasi Washington": "Jazz, Spiritual Jazz",
            "Massive Attack": "Trip Hop, Electronic",
            "Portishead": "Trip Hop, Alternative, Female Vocals",
            "Aphex Twin": "Electronic, IDM, Experimental",
            "Boards of Canada": "Electronic, Ambient, IDM",
            "Burial": "Dubstep, Ambient, UK Garage",
            "J Dilla": "Hip Hop, Neo Soul, Producer",
            "MF DOOM": "Hip Hop, Underground, Male Vocals",
            "Blink-182": "Pop Punk, Alternative Rock",
            "Phoebe Bridgers": "Indie Folk, Alternative, Female Vocals",
            "Motorhead": "Heavy Metal, Rock and Roll"
        };

        // CSV„Éï„Ç°„Ç§„É´„Åã„Çâ„Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàÂêç„ÇíË™≠„ÅøËæº„ÇÄ
        const csvArtists = [
            "Drake", "Bruno Mars", "Fleetwood Mac", "Ed Sheeran", "Tim McGraw",
            "Elton John", "Dolly Parton", "Red Hot Chili Peppers", "Taylor Swift", "Elvis Presley",
            "Adele", "Ariana Grande", "Billie Eilish", "The Weeknd", "Beyonc√©",
            "Kendrick Lamar", "Lady Gaga", "Jay-Z", "Rihanna", "Kanye West",
            "Justin Bieber", "Katy Perry", "Metallica", "AC/DC", "Madonna",
            "David Bowie", "Bob Dylan", "Post Malone", "Maroon 5", "Shakira",
            "Dua Lipa", "Michael Jackson", "Prince", "Miley Cyrus", "Cardi B",
            "Imagine Dragons", "Camila Cabello", "Harry Styles", "Sam Smith", "Lizzo",
            "Daft Punk", "Gorillaz", "The Beatles", "Queen", "Led Zeppelin",
            "Pink Floyd", "The Rolling Stones", "Bob Marley", "Frank Sinatra", "Aretha Franklin",
            "Whitney Houston", "Stevie Wonder", "The Chainsmokers", "Nicki Minaj", "Green Day",
            "Nirvana", "Amy Winehouse", "Linkin Park", "Aerosmith", "Bon Jovi",
            "Billy Joel", "Phil Collins", "Genesis", "The Eagles", "The Doors",
            "Janis Joplin", "Jimi Hendrix", "The Who", "Iron Maiden", "Judas Priest",
            "Motorhead", "Slayer", "Ozzy Osbourne", "Skrillex", "Calvin Harris",
            "Arctic Monkeys", "Tame Impala", "The Strokes", "Vampire Weekend", "Kings of Leon",
            "The Killers", "System of a Down", "Radiohead", "Foo Fighters", "Muse",
            "Rage Against the Machine", "Pearl Jam", "Soundgarden", "Alice in Chains", "Sigur R√≥s",
            "Bj√∂rk", "Enya", "Deadmau5", "Marshmello", "Lana Del Rey",
            "Kacey Musgraves", "St. Vincent", "Childish Gambino", "SZA", "Frank Ocean",
            "Tyler, The Creator", "Solange", "Brockhampton", "Mac DeMarco", "Rufus Du Sol",
            "Bon Iver", "Florence + The Machine", "Jack White", "Gary Clark Jr.", "Leon Bridges",
            "Brittany Howard", "Alabama Shakes", "Glass Animals", "Portugal, The Man", "FKA Twigs",
            "The National", "MGMT", "Empire of the Sun", "Grimes", "James Blake",
            "The War on Drugs", "Sufjan Stevens", "Bonobo", "Caribou", "Nicolas Jaar",
            "Flying Lotus", "Thundercat", "Kamasi Washington", "Massive Attack", "Portishead",
            "Aphex Twin", "Boards of Canada", "Burial", "J Dilla", "MF DOOM",
            "Kendrick Lamar", "Blink-182", "Green Day", "Phoebe Bridgers"
        ];

        // „Åô„Åπ„Å¶„ÅÆ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„ÇíÁµ±ÂêàÔºà„Çπ„Çø„Ç§„É´‰ªò„ÅçÔºâ
        const artists = csvArtists.map(name => ({
            name: name,
            style: artistStyles[name] || getDefaultStyle(name)
        }));

        // „Éá„Éï„Ç©„É´„Éà„Çπ„Çø„Ç§„É´„ÇíÁîüÊàê„Åô„ÇãÈñ¢Êï∞
        function getDefaultStyle(artistName) {
            // „Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàÂêç„Å´Âü∫„Å•„ÅÑ„Å¶„Éá„Éï„Ç©„É´„Éà„Çπ„Çø„Ç§„É´„ÇíÁîüÊàê
            const defaultStyles = {
                // ÂêçÂâç„Å´ÁâπÂÆö„ÅÆ„Ç≠„Éº„ÉØ„Éº„Éâ„ÅåÂê´„Åæ„Çå„ÇãÂ†¥Âêà„ÅÆ„Çπ„Çø„Ç§„É´
                "DJ": "Electronic, Dance, Mixing",
                "MC": "Hip Hop, Rap, Urban",
                "The": "Band, Group Performance",
            };
            
            for (const [keyword, style] of Object.entries(defaultStyles)) {
                if (artistName.includes(keyword)) {
                    return style;
                }
            }
            
            // „Åù„ÅÆ‰ªñ„ÅÆ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„ÅÆ„Éá„Éï„Ç©„É´„Éà„Çπ„Çø„Ç§„É´
            return "Contemporary, Versatile, Modern";
        }

        // Êó¢Â≠ò„ÅÆartistsÈÖçÂàó„ÇíÂâäÈô§„Åó„Å¶„ÄÅÊñ∞„Åó„ÅÑÁµ±ÂêàÈÖçÂàó„Çí‰ΩøÁî®
        // const artists = [ ... ]; // „Åì„ÅÆÈÉ®ÂàÜ„ÇíÂâäÈô§

        const genres = {
            "„É≠„ÉÉ„ÇØ„Éª„É°„Çø„É´": [
                "Acid Rock", "Alternative Rock", "Art Rock", "Atmospheric Black Metal", "Avant-garde Metal",
                "Black Metal", "Blues Rock", "Classic Rock", "Comedy Rock", "Country Rock", "Death Metal",
                "Deathcore", "Desert Rock", "Doom Metal", "Electronic Rock", "Experimental Metal",
                "Experimental Rock", "Folk Metal", "Folk Rock", "Funk Metal", "Funk Rock", "Garage Rock",
                "Glam Rock", "Gothic Metal", "Gothic Rock", "Groove Metal", "Grunge", "Hard Rock",
                "Heavy Metal", "Heavy Metal Trap", "Industrial Metal", "Industrial Rock", "Instrumental Rock",
                "Kawaii Metal", "Math Rock", "Melodic Death Metal", "Melodic Metalcore", "Metal", "Metalcore",
                "New York Hardcore", "Noise Rock", "Nu Metal", "Oriental Metal", "Pagan Metal", "Piano Rock",
                "Post-Metal", "Post-Rock", "Power Metal", "Progressive Metal", "Progressive Rock",
                "Psychedelic Rock", "Punk Rock", "Rap Metal", "Rap Rock", "Rock", "Rock and Roll",
                "Rock Opera", "Rockabilly", "Scandinavian Metal", "Skate Rock", "Sludge Metal",
                "Southern Rock", "Space Rock", "Speed Metal", "Stadium Rock", "Stoner Rock", "Surf Rock",
                "Symphonic Black Metal", "Symphonic Metal", "Symphonic Rock", "Thrash Metal", "Viking Metal", "War Metal"
            ],
            "„Ç®„É¨„ÇØ„Éà„É≠„Éã„ÉÉ„ÇØ„Éª„ÉÄ„É≥„Çπ": [
                "Acid Jazz", "Ambient", "Bass House", "Brostep", "Chillwave", "Club", "Cyberpunk", "Dance",
                "Dance Pop", "Dark Ambient", "Dark Electro", "Deep House", "Deep Techno", "Downtempo",
                "Drone", "Dub", "Dub Techno", "Dubstep", "EDM", "Electro", "Electro Swing", "Electroacoustic",
                "Electronic", "Electropop", "Eurodance", "French House", "Future Bass", "Future Garage",
                "Future House", "Gabber", "Glitch", "Glitch Hop", "Glitch Pop", "Goa Trance", "Happy Hardcore",
                "Hardstyle", "House", "Hyperpop", "IDM", "Industrial", "Jungle", "Minimal Techno", "Moombahton",
                "Neurofunk", "Nu Disco", "Post-Disco", "Post-Dubstep", "Progressive House", "Psybient",
                "Psychedelic Trance", "Rave", "Space Disco", "Synthwave", "Tech House", "Techno", "Trance",
                "Trip Hop", "Tropical House", "UK Funky", "UK Garage", "Vaporwave", "Vocal House", "Vocal Trance", "Witch House"
            ],
            "„Ç∏„É£„Ç∫„Éª„Éñ„É´„Éº„Çπ": [
                "Bebop", "Big Band", "Blues", "Cool Jazz", "Dark Jazz", "Delta Blues", "Gypsy Jazz", "Hard Bop",
                "Jazz", "Jazz Fusion", "Jazz Rap", "Latin Jazz", "Modal Jazz", "New Orleans Jazz", "Nu Jazz",
                "Piano Blues", "Piedmont Blues", "Post-Bop", "Punk Blues", "Smooth Jazz", "Soul Jazz", "Swing"
            ],
            "„Éí„ÉÉ„Éó„Éõ„ÉÉ„Éó„Éª„É©„ÉÉ„Éó": [
                "Crunk", "Hip Hop", "Mumble Rap", "Pop Rap", "Rap", "Trap", "UK Drill", "West Coast Rap"
            ],
            "„Éï„Ç©„Éº„ÇØ„Éª„ÉØ„Éº„É´„Éâ": [
                "Afro-Cuban", "Afrobeat", "Arabian", "Arabian Ornamental", "Bangra", "Bluegrass", "Bolero",
                "Calypso", "Carnatic", "Celtic", "Chalga", "Chanson", "Country", "Country Blues", "Fado",
                "Flamenco", "Folk", "Folk Punk", "Forr", "Freak Folk", "Guajira", "Hawaiian", "Hindustani",
                "Honky Tonk", "Indian Classical", "Indie Folk", "Irish Folk", "Klezmer", "Latin", "Mambo",
                "Mariachi", "Neofolk", "Nordic Folk", "Outlaw Country", "Polka", "Psychedelic Folk", "Qawwali",
                "Quebecois Traditional", "Rai", "Ranchera", "Reggae", "Reggaeton", "Roots Reggae", "Rumba",
                "Russian Folk", "Salsa", "Samba", "Sea Shanties", "Sephardic", "Spanish Folk", "Sufi Music",
                "Taarab", "Tango", "Traditional", "Traditional Folk", "Tribal", "Truck Driving Country",
                "Urban Folk", "World", "World Beat", "World Fusion", "Zydeco"
            ],
            "„Éù„ÉÉ„Éó„Éª„Ç≥„É≥„ÉÜ„É≥„Éù„É©„É™„Éº": [
                "Adult Contemporary", "Avant-garde", "Bedroom", "Broadway", "Disco", "Disco Funk", "Dream Pop",
                "Emo", "Europop", "Funk", "Indie", "Indie Pop", "Indie Rock", "J-pop", "K-pop", "Latin Pop",
                "Lounge", "Motown", "Neon Pop", "Noise Pop", "Pop", "Pop Punk", "Pop Rock", "Power Pop",
                "Psychedelic Pop", "R&B", "Contemporary R&B", "Singer-Songwriter", "Soft Rock", "Soul",
                "Synth-pop", "Thai Pop", "Urban Contemporary"
            ]
        };

        const csvGenres = [
            "acoustic chicago blues cape verdean", "afro-jazz", "ambient house 16-bit", "arabic reggae",
            "saxophone afro house", "portuguese breakbeat", "korean pacific reggae", "hypnagogic pacific reggae",
            "koto gnawa", "new orleans grunge", "instrumental bluegrass", "cajun griot", "choral celtic",
            "dakar afro-cuban jazz", "dark goa trance", "prog avant-garde jazz", "reggaetonwave",
            "sertanejo southern rock", "soulful bubblegum dance", "symphonic disco", "dreamy swing",
            "garage tango", "grunge cumbia", "classical cumbia", "hindi jungle", "acoustic chicago blues algorave",
            "afro-funk", "ambient dub techno", "arabic pop", "saxophone drum and bass", "portuguese barbershop",
            "russian dembow", "hypnagogic goa trance", "koto g-funk", "new orleans dembow", "bluegrass",
            "cajun algorave", "choral big band", "cumbia metal", "dark electropop", "prog ambient noise wall",
            "reggae dirty south", "sertanejo emo", "soulful boogie", "symphonic cloud rap", "dreamy soul",
            "garage", "grunge bedroom pop", "choral afro-jazz", "hindi dream pop", "acoustic chicago blues",
            "afro-cuban jazz griot", "ambient dub boogie", "arabic mariachi", "saxophone tuareg",
            "portuguese acoustic rock", "urdu rumba", "hypnagogic garage", "koto drill and bass",
            "new orleans cloud rap", "big band new jack swing", "cajun afrikaner folk", "choral bedroom pop",
            "cumbia acoustic blues", "dark drum and bass", "prog afrobeat", "reggae", "sertanejo chillstep",
            "soulful acoustic texas blues", "symphonic city pop", "dreamy shoegaze", "electro-chanson",
            "grunge americana", "bubblegum bass symphonic metal", "hindi doo-wop", "acoustic carnatic",
            "afro-cuban jazz doo-wop", "ambient dub bedroom pop", "arabic egyptian", "slushwave roots reggae",
            "portuguese 16-bit", "urdu jazzwave", "hypnagogic electropop", "koto dembow", "new orleans chillwave",
            "swing", "big band grunge", "cajun acid rock", "choral ambient techno", "cumbia", "dark dance",
            "prog afro-jazz", "reggae cumbia", "saxophone shoegaze", "soulful acid trance", "symphonic boom bap",
            "dreamy pacific reggae", "electro-bossa nova", "grunge american primitivism", "ambient dub bachata",
            "hindi chanson", "acoustic blues slushwave", "afro-cuban jazz crunk", "alternative rock",
            "arabic classical", "mandarin trance", "urdu house", "hypnagogic ambient trance", "koto coptic",
            "new orleans carnatic", "tuareg synthwave", "big band cumbia", "cajun", "choral ambient noise wall",
            "crunk swamp blues", "dark coptic", "prog afro-funk", "rap dirty south", "saxophone opera",
            "soulful acid house", "symphonic bluegrass", "dreamy house", "electro-alternative r&b",
            "grunge afro-cuban jazz", "drumstep soul", "hindi carnatic", "tuareg motown", "acoustic blues mariachi",
            "afro-cuban jazz", "alternative r&b griot", "arabic ambient techno", "mandarin math rock",
            "urdu electropop", "hypnagogic algorave", "koto boom bap", "new orleans cajun", "big band boogie",
            "cabaretwave", "choral alt-country", "crunk punk", "dark chillstep", "prog acoustic texas blues",
            "rap bedroom pop", "saxophone gnawa", "soul dembow", "symphonic algorave", "dreamy grime",
            "electro-acid house", "grunge african folk", "delta blues house", "hindi bubblegum dance",
            "trap k-pop", "acoustic blues glitch hop", "afro trap r&b", "alternative r&b dembow",
            "arabic afrobeat", "mandarin house", "urdu drill", "hyphy egyptian", "koto alt-pop",
            "new orleans alternative r&b", "big band ambient house", "cabaret rock", "choral 16-bit",
            "crunk goa trance", "dark blues", "popcore", "rap", "saxophone g-funk", "soul",
            "symphonic afro-cuban jazz", "dreamy fife and drum blues", "egyptian swing", "grunge",
            "liquid drum and bass house", "hindi ambient house", "trap g-funk", "acoustic ambient trance",
            "afro trap algorave", "alternative r&b", "arabic acid house", "mandarin hawaiian", "urdu coptic",
            "hyphy bluegrass", "klezmer pop", "new jack swing big band", "big band alt-country",
            "cabaret americana", "chillwavewave", "crunk calypso", "dark alternative rock", "pop synthpop",
            "raga jazz", "saxophone edm", "slushwave new jack swing", "swing synthpop", "dreamy drum and bass",
            "egyptian flamenco", "griot shoegaze", "arabic african folk", "hindi alt-country", "trap",
            "acoustic afropiano", "afro trap", "alt-pop afropiano", "arabic 16-bit", "mandarin drum and bass",
            "urdu acid jazz", "hyphy alternative r&b", "klezmer", "new jack swing", "bengali swamp blues",
            "cabaret", "chillwave swing", "country jazz", "dark alt-pop", "pop g-funk", "raga egyptian",
            "saxophone bossa nova", "slushwave dancehall", "swing sertanejo", "dreamy dembow", "egyptian",
            "griot reggae", "liverpool big band", "hindi afrobeat", "trance", "acoustic acid rock",
            "afro house rock", "alt-country surf rock", "appalachian folk flamenco", "mandarin disco",
            "spanish samba", "hyphy", "kawaii future bass polka", "motown", "bengali surf rock",
            "bubblegum dance chanson", "chillwave samba", "country afro-cuban jazz", "dark acid jazz",
            "pop bossa nova", "raga edm", "saxophone barbershop", "slushwave chillstep", "swing samba",
            "dreamy chillwave", "edm swamp blues", "griot indie", "dance drill", "hindi african folk",
            "tokyo southern rock", "acid trance", "afro house drill and bass", "alt-country dubstep",
            "appalachian folk cloud rap", "mandarin delta blues", "spanish pop", "hyper-southern rock",
            "kawaii future bass afropiano", "metal grunge", "bengali surf", "bubblegum dance",
            "chillwave caribbean", "country dancehall", "dark acid house", "pop", "raga algorave",
            "saxophone alt-country", "slushwave acid house", "swing roots reggae", "dreamy bubblegum dance",
            "edm jungle", "griot", "illbient egyptian", "hindi acoustic rock", "tokyo samba",
            "acid techno psybient", "afro house dembow", "alt-country disco", "appalachian folk anti-folk",
            "mandarin cumbia", "spanish merengue", "hyper-motown", "kawaii future bass afro-cuban jazz",
            "merengue", "bengali psybient", "bubblegum bass grime", "chillwave egyptian", "coptic grunge",
            "dancepop breakbeat", "polka emo", "raga acid breaks", "saxophone 2-step",
            "ska liquid drum and bass", "swing grime", "dreamy boom bap", "edm grime", "grime tango",
            "dubstep rock", "hindi acid rock", "tokyo norteo", "acid techno avant-garde jazz",
            "afro house acoustic blues", "alt-country 2-step", "anti-folkwave", "mandarin american primitivism",
            "spanish mariachi", "hyper-jungle", "kawaii future bass", "math rock ambient noise wall",
            "bengali math rock", "breakstep synthwave", "chillwave bubblegum bass", "coptic flamenco",
            "dancepop", "polka", "raga", "samba soul", "ska coptic", "swing bedroom pop", "dreamy afro-jazz",
            "edm g-funk", "grime synthpop", "tuareg", "harpischord symphonic metal", "tokyo liquid drum and bass",
            "acid techno", "afro house", "algorave psybient", "anti-folk drumstep", "tokyo grunge",
            "mandarin afrobeat", "spanish funk", "hyper-indie", "k-pop acoustic texas blues", "math rock",
            "bengali grunge", "bubblegum bass", "chillsynth mento", "coptic afro-rock", "dancehall synthwave",
            "piano klezmer", "r&b gospel", "samba dirty south", "ska", "swamp blues r&b", "dreamy acoustic rock",
            "edm disco", "grime surf rock", "electro-classical", "harpischord gospel", "acid rock p-funk",
            "afrikaner folk tango", "algorave hawaiian", "anti-folk big band", "tokyo drumstep",
            "mandarin acid trance", "spanish ambient trance", "hyper-grime", "k-pop", "mariachi",
            "bengali electropop", "breakstep samba", "chillsynth", "coptic", "dancehall new wave",
            "piano country", "punk polka", "samba country", "sitar southern rock", "swamp blues boogie",
            "dreamy acid house", "edm breakbeat", "grime reggaeton", "urdu shoegaze", "future egyptian",
            "acid rock city pop", "afrikaner folk pacific reggae", "algorave garage", "anti-folk",
            "tokyo city pop", "korean fife and drum blues", "spanish acoustic rock", "hyper-egyptian",
            "jungle ambient noise wall", "lo-fi trap", "bengali egyptian", "breakbeatwave",
            "chillstep chillwave", "cloud rap symphonic metal", "dancehall flamenco", "piano chillstep",
            "punk electropop", "samba boom bap", "sitar sertanejo", "swamp blues", "dream pop g-funk",
            "edm anti-folk", "grime reggae", "havana glitch hop", "future chillwave", "acid jazz crunk",
            "afrikaner folk drill", "algorave acid jazz", "americana soul", "tokyo afro-jazz", "korean opera",
            "russian techno", "hyper-dance", "jungle afrobeat", "lo-fi synthpop", "bengali drill",
            "breakbeat trance", "chillstep", "cloud rap slushwave", "dancehall country", "piano cape verdean",
            "punk acid trance", "samba bachata", "sitar rumba", "surfwave", "dream pop appalachian folk",
            "edm", "grime norteo", "havana funk", "french ska", "acid house boom bap", "afrikaner folk",
            "algorave", "americana jungle", "tokyo afro-funk", "korean drumstep", "russian samba",
            "hyper-crunk", "jungle", "lo-fi roots reggae", "bengali cape verdean", "breakbeat coptic",
            "chanson soul", "cloud rap", "dancehall city pop", "piano caribbean", "psychedelic swing",
            "samba afropiano", "sitar goa trance", "surf slushwave", "dream pop", "dubstepcore",
            "grime calypso", "havana electropop", "french shoegaze", "acid house", "african folk math rock",
            "afroswing new wave", "american primitivism illbient", "tokyo acid trance", "korean cabaret",
            "russian salsa", "hyper-blues rock", "jazz soul", "lo-fi pacific reggae", "bengali barbershop",
            "breakbeat balkan brass band", "chanson funk", "classicalwave", "dancehall acoustic texas blues",
            "piano afroswing", "psychedelic psybient", "samba", "sitar glitch hop", "surf rock boogie",
            "doo-wop pop", "dubstep samba", "grime avant-garde jazz", "havana chillstep", "french samba",
            "acid breaks alt-country", "african folk drill", "afroswing k-pop", "american primitivism bedroom pop",
            "tokyo acid breaks", "korean americana", "russian roots reggae", "hyper-afrobeat", "jazz sertanejo",
            "lo-fi cloud rap", "bengali american primitivism", "bossa nova merengue", "chanson alt-pop",
            "classical surf", "dancehall", "piano afro-rock", "psychedelic motown", "salsa polka",
            "sitar fife and drum blues", "surf rock", "doo-wop drumstep", "dubstep kawaii future bass",
            "grime 2-step", "havana cajun", "french psybient", "accordion tango", "african folk",
            "afroswing", "american primitivism 2-step", "techno norteo", "korean algorave", "russian k-pop",
            "hyper-acid house", "jazz future bass", "lo-fi bubblegum bass", "bengali afroswing", "bossa nova",
            "chanson", "classical grime", "dancecore", "piano african folk", "psychedelic house", "salsa",
            "sitar drum and bass", "surf raga", "doo-wop classical", "dubstep", "grime", "havana bubblegum bass",
            "french grunge", "accordion rap", "acoustic texas blues chillstep", "afropiano blues rock",
            "ambient trance mento", "techno bossa nova", "korean afrobeat", "russian grunge", "hyper-2-step",
            "jazz", "lo-fi ambient dub", "bengali acoustic chicago blues", "boom bap p-funk", "celtic tango",
            "classical folk", "dance southern rock", "pacific reggae ska", "psychedelic hawaiian", "rumbawave",
            "sitar delta blues", "surf grunge", "disco cloud rap", "drumstep chillsynth", "gospelwave",
            "havana bedroom pop", "french glitch hop", "accordion jungle", "acoustic texas blues afrobeat",
            "afropiano", "ambient trance jungle", "techno big band", "korean afro-funk", "russian grime",
            "house symphonic metal", "j-pop chillsynth", "lo-fi afro-cuban jazz", "bedroom pop ska",
            "boom bap celtic", "celtic cloud rap", "classical dirty south", "dance illbient",
            "pacific reggae samba", "psychedelic dream pop", "rumba cape verdean", "sitar cumbia",
            "surf flamenco", "disco classical", "drum and bass swing", "gospel shoegaze", "havana 2-step",
            "french dubstep", "accordion hawaiian", "acoustic texas blues", "afrobeat swing",
            "ambient trance folk", "techno balkan brass band", "korean acid trance", "russian glitch hop",
            "house reggae", "j-pop blues", "lo-fi afro house", "bedroom pop samba", "boogie celtic", "celtic",
            "classical caribbean", "dance", "pacific reggae afrobeat", "psychedelic cabaret", "rumba",
            "sitar cape verdean", "surf classical", "disco chillsynth", "drum and bass goa trance",
            "gospel dream pop", "havana american primitivism", "french dembow", "accordion drill",
            "acoustic slushwave", "afrobeat rockabilly", "ambient trance chanson", "techno afrobeat",
            "japanese swing", "russian flamenco", "hip hop dubstep", "j-pop acid jazz",
            "liquid drum and bass slushwave", "bedroom pop new jack swing", "boogie caribbean",
            "carnatic glitch hop", "classical boom bap", "dakar raga", "p-funk samba", "psychedelic acid trance",
            "roots reggae house", "sitar bubblegum dance", "surf acoustic blues", "disco chillstep",
            "drum and bass acoustic rock", "gospel disco", "harpischord klezmer", "french big band",
            "synthwave trance", "accordion delta blues", "acoustic rockabilly", "afrobeat new jack swing",
            "ambient trance alternative rock", "tango trance", "japanese surf rock", "russian dubstep",
            "hip hop techno", "j-pop acid breaks", "liquid drum and bass rockabilly", "bedroom pop", "boogie",
            "carnatic acid trance", "classical", "dakar new wave", "synthwave chillsynth", "synthwave cumbia",
            "p-funk mariachi", "psybient new wave", "roots reggae flamenco", "sitar bubblegum bass", "surf",
            "synthwave", "tango reggae", "disco alternative r&b", "drill sertanejo", "gospel acid breaks",
            "harpischord hip hop", "french afro-rock", "tabla bedroom pop", "accordion ambient techno",
            "acoustic rock chillsynth", "afrobeat griot", "ambient techno mento", "synthwave country",
            "japanese surf", "russian celtic", "hip hop", "indie grunge", "liquid drum and bass new jack swing",
            "p-funk jazz", "tango boogie", "barbershop breakbeat", "blues rock american primitivism", "carnatic",
            "city pop symphonic metal", "dakar math rock", "tango", "psybient griot",
            "roots reggae avant-garde jazz", "sitar bossa nova", "southern rock ska", "synthpop trance",
            "dirty south boom bap", "drill raga", "goa trance afro-cuban jazz", "harpischord g-funk",
            "fife and drum blues p-funk", "accordion afro trap", "acoustic rock afro-jazz", "afrobeat garage",
            "ambient techno hyphy", "tabla dream pop", "japanese shoegaze", "russian cumbia", "hawaiian r&b",
            "indie g-funk", "liquid drum and bass blues", "p-funk cloud rap", "synthwave dancehall",
            "barbershop balkan brass band", "blues rock afropiano", "caribbean", "city pop psybient",
            "dakar j-pop", "tabla jazz", "tango slushwave", "prog swamp blues", "rockabilly tango",
            "sitar blues", "southern rock calypso", "synthpop hawaiian", "tabla breakbeat",
            "dirty south balkan brass band", "drill chillwave", "goa trance", "harpischord drill",
            "flamenco hip hop", "japanese merengue", "accordion african folk", "acoustic rock",
            "afrobeat disco", "ambient techno chanson", "balkan brass band raga", "russian appalachian folk",
            "hawaiian merengue", "indie", "liquid drum and bass bluegrass", "p-funk", "lo-fi swing",
            "blues rock", "cape verdean acoustic rock", "city pop classical", "dakar house", "dirty south",
            "tabla hawaiian", "mariachi indie", "prog shoegaze", "rockabilly raga", "sitar alternative r&b",
            "southern rock", "synthpop coptic", "new orleans afrobeat", "drill cajun", "gnawawave",
            "harpischord drill and bass", "fife and drum blues acid breaks", "japanese jungle", "hyper-house",
            "accordion 16-bit", "acoustic raga", "afrobeat", "ambient techno afroswing",
            "balkan brass band classical", "portuguese southern rock", "havana synthwave",
            "illbient afrikaner folk", "koto swing", "new wave", "russian ambient techno", "hawaiian electropop",
            "illbientwave", "liquid drum and bass", "norteowave", "tabla kawaii future bass",
            "tabla new jack swing", "house surf", "blues folk", "cape verdean", "city pop breakbeat",
            "dakar gospel", "dembow punk", "pacific reggae", "hyper-roots reggae", "prog rockabilly",
            "rockabilly country", "sitar afro-jazz", "soulful soul", "synthpop", "new wave delta blues",
            "house", "drill bubblegum dance", "gnawa funk", "harpischord doo-wop", "electropop grunge",
            "japanese dancehall", "2-step surf", "acoustic grime", "afro-rock bachata", "ambient techno",
            "bachata", "hyphy balkan brass band", "russian afrikaner folk", "havana trap", "illbient cumbia",
            "koto tuareg", "norteo pop", "hyper-afrikaner folk", "blues cumbia", "calypso surf",
            "choral reggae", "dakar future bass", "dembow balkan brass band", "piano acid techno",
            "prog dubstep", "rockabilly", "sitar afro-funk", "soulful ska", "symphonic opera",
            "house roots reggae", "hip hop roots reggae", "drill breakbeat", "gnawa bubblegum bass",
            "harpischord boogie", "electronic math rock", "japanese chanson", "2-step country",
            "acoustic funk", "afro-rock ambient dub", "ambient noise wall chanson", "avant-garde jazz rap",
            "portuguese surf rock", "havana techno", "illbient alternative rock", "koto trap",
            "new wave acid trance", "blues afro house", "calypso opera", "choral folk", "dakar flamenco",
            "dembow", "piano coptic", "prog drum and bass", "rock liquid drum and bass", "shoegaze psybient",
            "soulful reggaeton", "symphonic metal", "drill and bass gnawa", "gnawa afrobeat",
            "harpischord anti-folk", "electronic grunge", "japanese boogie", "2-step", "acoustic electropop",
            "afro-rock", "ambient house p-funk", "avant-garde jazz illbient", "portuguese dancehall",
            "havana grime", "illbient", "koto surf", "new orleans trance", "bluegrass punk",
            "calypso afroswing", "choral country", "dakar boom bap", "dark reggaeton", "prog southern rock",
            "prog disco", "rock balkan brass band", "shoegaze boom bap", "soulful city pop",
            "symphonic merengue", "drill", "glitch hop swing", "harpischord acid jazz", "electro-techno",
            "japanese ambient house", "16-bit celtic", "acoustic chicago blues reggaeton", "afro-jazz carnatic",
            "ambient house cajun", "avant-garde jazz", "portuguese chillsynth", "french acoustic chicago blues",
            "hypnagogic swamp blues", "koto polka", "new orleans samba", "bluegrass k-pop", "cajun synthpop",
            "choral chillsynth", "dakar ambient dub", "dark merengue", "psychedelic tango", "prog breakbeat",
            "rock americana", "shoegaze afro-funk", "soulful chillsynth", "symphonic mariachi", "dreamy trance",
            "glitch hop acoustic texas blues", "grunge new jack swing", "electro-new wave", "japanese algorave",
            "16-bit", "acoustic chicago blues motown", "afro-jazz blues rock", "ambient house breakstep",
            "avant-garde jazz disco", "portuguese chillstep", "funk bedroom pop", "hypnagogic shoegaze",
            "koto house", "new orleans house", "bluegrass bubblegum bass", "cajun new wave", "choral chanson",
            "dakar afrobeat", "dark jazz", "reggae k-pop", "prog big band", "rock", "shoegaze afro-cuban jazz",
            "soulful cabaret", "symphonic doo-wop", "dreamy tango", "glitch hop 2-step", "grunge funk",
            "electro-jungle", "hindi southern rock"
        ];

        const moods = {
            "„É†„Éº„Éâ„ÉªÈõ∞Âõ≤Ê∞ó": ["Atmospheric", "Ambient", "Ethereal", "Euphoric", "Mystical", "Dreamy", "Surreal", "Tranquil", "Serene", "Haunting", "Intoxicating", "Eerie", "Celestial", "Chilling", "Melancholic", "Apocalyptic"],
            "„ÉÜ„ÇØ„Çπ„ÉÅ„É£„Éº„Éª„ÉÄ„Ç§„Éä„Éü„ÇØ„Çπ": ["Airy", "Dense", "Fluid", "Smooth", "Rough", "Textured", "Layered", "Blurred", "Crisp", "Fuzzy", "Sparkling", "Glossy", "Transparent", "Luminous", "Vibrant", "Shimmering"],
            "„É™„Ç∫„É†„ÉªÈü≥Ê•ΩÁöÑ": ["Rhythmic", "Percussive", "Melodic", "Harmonic", "Polyphonic", "Syncopated", "Dynamic", "Staccato", "Crescendoing", "Descending", "Ascending", "Cadenced", "Dotted", "Arhythmic", "Cross-rhythmic"],
            "ÊÑüÊÉÖ„ÉªË°®Áèæ": ["Emotional", "Joyous", "Sad", "Angry", "Aggressive", "Gentle", "Warm", "Cold", "Festive", "Nostalgic", "Romantic", "Passionate", "Soothing", "Inspiring", "Soulful"],
            "„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„ÉªÂêàÊàê": ["Digital", "Analog", "Electronic", "Robotic", "Cybernetic", "Futuristic", "Synthetic", "Automated", "Virtual", "Algorithmic", "Biotechnological"],
            "Âãï„Åç„Éª„Ç®„Éç„É´„ÇÆ„Éº": ["Explosive", "Fast-paced", "Slow", "High-energy", "Lethargic", "Static", "Chaotic", "Controlled", "Spontaneous", "Cinematic", "Dramatic", "Climactic", "Bouncing", "Flowing", "Pulsating"],
            "Ëá™ÁÑ∂„ÉªÁí∞Â¢É": ["Oceanic", "Forest-like", "Urban", "Desert", "Mountainous", "Space", "Underwater", "Atmospheric", "Geographical", "Seasonal", "Weather-related"]
        };

        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let selectedItems = [];
        let selectedLanguage = 'cantonese';
        let selectedPromptLanguage = 'cantonese'; // „Éó„É≠„É≥„Éó„ÉàË®ÄË™û
        let selectedStructures = [];
        let currentLyricsCandidate = -1;
        let generatedLyrics = {};

        // „Éó„É≠„É≥„Éó„ÉàË®ÄË™ûÈÅ∏Êäû
        function selectPromptLanguage(button, lang) {
            document.querySelectorAll('[id^="prompt-lang-"]').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedPromptLanguage = lang;
            updatePromptSectionTitle();
            updatePrompt();
        }

        // „Éó„É≠„É≥„Éó„Éà„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„Çø„Ç§„Éà„É´„ÇíÊõ¥Êñ∞
        function updatePromptSectionTitle() {
            const titleElement = document.querySelector('#prompt-section h2');
            if (titleElement) {
                const titles = {
                    'cantonese': 'üéõÔ∏è ÁîüÊàêÂòÖÈ¢®Ê†ºÊèêÁ§∫',
                    'chinese': 'üéõÔ∏è ÁîüÊàêÁöÑÈ£éÊ†ºÊèêÁ§∫',
                    'japanese': 'üéõÔ∏è ÁîüÊàê„Åï„Çå„Åü„Çπ„Çø„Ç§„É´„Éó„É≠„É≥„Éó„Éà',
                    'english': 'üéõÔ∏è Generated Style Prompt'
                };
                titleElement.textContent = titles[selectedPromptLanguage] || titles['japanese'];
            }
            
            // „Éú„Çø„É≥„ÉÜ„Ç≠„Çπ„Éà„ÇÇÊõ¥Êñ∞
            updatePromptButtons();
        }

        // „Éó„É≠„É≥„Éó„Éà„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„Éú„Çø„É≥„ÉÜ„Ç≠„Çπ„Éà„ÇíÊõ¥Êñ∞
        function updatePromptButtons() {
            const copyBtn = document.querySelector('#prompt-section button[onclick="copyPrompt()"]');
            const clearBtn = document.querySelector('#prompt-section button[onclick="clearPrompt()"]');
            
            const buttonTexts = {
                'cantonese': {
                    copy: 'üìã Ë§áË£Ω',
                    clear: '‚ùå Ê∏ÖÈô§'
                },
                'chinese': {
                    copy: 'üìã Â§çÂà∂',
                    clear: '‚ùå Ê∏ÖÈô§'
                },
                'japanese': {
                    copy: 'üìã „Ç≥„Éî„Éº',
                    clear: '‚ùå „ÇØ„É™„Ç¢'
                },
                'english': {
                    copy: 'üìã Copy',
                    clear: '‚ùå Clear'
                }
            };
            
            const texts = buttonTexts[selectedPromptLanguage] || buttonTexts['japanese'];
            
            if (copyBtn) {
                copyBtn.innerHTML = `<i class="fas fa-copy mr-2"></i>${texts.copy}`;
            }
            if (clearBtn) {
                clearBtn.innerHTML = `<i class="fas fa-times mr-2"></i>${texts.clear}`;
            }
        }

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            initializeArtists();
            initializeGenres();
            initializeMoods();
            updateCounts(); // ÂÄãÊï∞„ÇíË°®Á§∫
            updatePromptSectionTitle(); // ÂàùÊúüË®ÄË™û„Åß„Çø„Ç§„Éà„É´Ë®≠ÂÆö
            
            // ÂàùÊúüË°®Á§∫Ôºö„Åô„Åπ„Å¶„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË°®Á§∫ÔºàÊ≠åË©ûÁîüÊàê‰ª•Â§ñÔºâ
            document.getElementById('genres-section').style.display = 'block';
            document.getElementById('moods-section').style.display = 'block';
            document.getElementById('vocal-section').style.display = 'block';
            document.getElementById('artists-section').style.display = 'block';
            
            // „Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç¶„Ç£„É≥„Éâ„Ç¶„ÇíÂàùÊúüË°®Á§∫ÔºàË§áÊï∞„ÅÆ„Çø„Ç§„Éü„É≥„Ç∞„ÅßÁ¢∫ÂÆü„Å´ÂÆüË°åÔºâ
            showInitialPromptSection();
            setTimeout(showInitialPromptSection, 100);
            setTimeout(showInitialPromptSection, 500);
            setTimeout(showInitialPromptSection, 1000);
            
            // ÂàùÊúü„Éó„É≠„É≥„Éó„Éà„ÇíÊõ¥Êñ∞
            setTimeout(function() {
                updatePrompt();
                console.log('Initial prompt updated');
            }, 1500);
        });

        // ÂàùÊúü„Éó„É≠„É≥„Éó„Éà„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫Èñ¢Êï∞
        function showInitialPromptSection() {
            console.log('showInitialPromptSection called');
            const promptSection = document.getElementById('prompt-section');
            console.log('promptSection found:', !!promptSection);
            
            if (promptSection) {
                // Âº∑Âà∂ÁöÑ„Å´„Åô„Åπ„Å¶„ÅÆ„Çπ„Çø„Ç§„É´„ÇíË®≠ÂÆöÔºà‰∏≠Â§ÆË°®Á§∫„ÄÅ„Ç≥„É≥„Éë„ÇØ„Éà„Çµ„Ç§„Ç∫Ôºâ
                promptSection.style.display = 'block';
                promptSection.style.visibility = 'visible';
                promptSection.style.opacity = '1';
                promptSection.style.zIndex = '9999';
                promptSection.style.position = 'fixed';
                promptSection.style.top = '30%';
                promptSection.style.left = '50%';
                promptSection.style.transform = 'translate(-50%, -50%)';
                promptSection.style.width = '95%';
                promptSection.style.maxWidth = '800px';
                promptSection.style.margin = '0 auto';
                promptSection.style.height = 'auto';
                promptSection.style.maxHeight = '300px';
                promptSection.style.background = 'rgba(17, 24, 39, 0.95)';
                promptSection.style.backdropFilter = 'blur(16px)';
                promptSection.style.border = '2px solid #8b5cf6';
                promptSection.style.borderRadius = '0.5rem';
                promptSection.style.boxShadow = '0 25px 50px -12px rgba(0, 0, 0, 0.8)';
                promptSection.classList.remove('hidden');
                console.log('Initial prompt section displayed with centered compact style');
                console.log('Prompt section computed style:', window.getComputedStyle(promptSection).display);
                console.log('Prompt section position:', promptSection.getBoundingClientRect());
                
                // ÂàùÊúü„Éó„É≠„É≥„Éó„Éà„ÉÜ„Ç≠„Çπ„Éà„ÇíË®≠ÂÆöÔºà„Éá„Éï„Ç©„É´„Éà„ÅßCantonese lyrics„ÇíË°®Á§∫Ôºâ
                const generatedPrompt = document.getElementById('generated-prompt');
                console.log('generatedPrompt found:', !!generatedPrompt);
                if (generatedPrompt) {
                    const initialPrompt = 'Cantonese lyrics';
                    generatedPrompt.textContent = initialPrompt;
                    console.log('Initial prompt text set:', initialPrompt);
                }
                
                // ÂàùÊúüÁä∂ÊÖã„ÅßÂ∫ÉÊù±Ë™û„Éú„Çø„É≥„ÇíÈÅ∏ÊäûÁä∂ÊÖã„Å´„Åô„Çã
                const cantoneseBtn = document.getElementById('prompt-lang-cantonese');
                if (cantoneseBtn) {
                    cantoneseBtn.classList.add('selected');
                    console.log('Cantonese button selected');
                }
            } else {
                console.log('prompt-section element not found');
            }
        }

        // ÂÄãÊï∞„ÇíÊõ¥Êñ∞„Åô„ÇãÈñ¢Êï∞
        function updateCounts() {
            // „Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàÊï∞„ÇíË°®Á§∫
            const artistsCount = document.getElementById('artists-count');
            if (artistsCount) {
                artistsCount.textContent = `(ÂÖ®${artists.length}ÂÄã)`;
            }
            
            // „Ç∏„É£„É≥„É´Êï∞„ÇíË®àÁÆó„Åó„Å¶Ë°®Á§∫
            let genreCount = 0;
            Object.values(genres).forEach(category => {
                genreCount += category.length;
            });
            
            // ÂÖ®„Ç∏„É£„É≥„É´Êï∞„ÇíË®àÁÆó
            const totalGenreCount = genreCount + csvGenres.length;
            
            const genresCount = document.getElementById('genres-count');
            if (genresCount) {
                genresCount.textContent = `(ÂÖ®${totalGenreCount}ÂÄã„ÅÆ„Ç∏„É£„É≥„É´)`;
            }
        }

        // „Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàÂàùÊúüÂåñ
        function initializeArtists() {
            const container = document.getElementById('artists-container');
            artists.forEach(artist => {
                const btn = document.createElement('button');
                btn.className = 'artist-btn';
                btn.innerHTML = `${artist.name}<br><small>${artist.style.substring(0, 30)}...</small>`;
                btn.onclick = () => toggleSelection(btn, artist.style);
                btn.dataset.artist = artist.name.toLowerCase();
                btn.dataset.style = artist.style.toLowerCase();
                container.appendChild(btn);
            });
        }

        // „Ç∏„É£„É≥„É´ÂàùÊúüÂåñ
        function initializeGenres() {
            const container = document.getElementById('genres-container');
            
            // Âü∫Êú¨„Ç∏„É£„É≥„É´„ÇíË°®Á§∫
            Object.keys(genres).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-6';
                categoryDiv.innerHTML = `<h3 class="text-lg font-semibold mb-3">${category}</h3>`;
                
                const genreContainer = document.createElement('div');
                genreContainer.className = 'flex flex-wrap';
                
                genres[category].forEach(genre => {
                    const btn = document.createElement('button');
                    btn.className = 'genre-btn';
                    btn.textContent = genre;
                    btn.onclick = () => toggleSelection(btn, genre);
                    btn.dataset.genre = genre.toLowerCase();
                    genreContainer.appendChild(btn);
                });
                
                categoryDiv.appendChild(genreContainer);
                container.appendChild(categoryDiv);
            });
            
            // CSV„Ç∏„É£„É≥„É´„ÇíÈÅ©Âàá„Å™„Ç´„ÉÜ„Ç¥„É™„Å´ÂàÜÈ°û„Åó„Å¶Ë°®Á§∫
            const csvGenreCategories = categorizeCSVGenres();
            
            Object.keys(csvGenreCategories).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-6';
                categoryDiv.innerHTML = `<h3 class="text-lg font-semibold mb-3">${category}</h3>`;
                
                const genreContainer = document.createElement('div');
                genreContainer.className = 'flex flex-wrap';
                
                csvGenreCategories[category].forEach(genre => {
                    const btn = document.createElement('button');
                    btn.className = 'genre-btn'; // Áµ±‰∏Ä„Åï„Çå„ÅüÁ¥´„ÅÆ„Éú„Çø„É≥
                    btn.textContent = genre;
                    btn.onclick = () => toggleSelection(btn, genre);
                    btn.dataset.genre = genre.toLowerCase();
                    genreContainer.appendChild(btn);
                });
                
                categoryDiv.appendChild(genreContainer);
                container.appendChild(categoryDiv);
            });
        }
        
        // CSV„Ç∏„É£„É≥„É´„ÇíÈÅ©Âàá„Å™„Ç´„ÉÜ„Ç¥„É™„Å´ÂàÜÈ°û„Åô„ÇãÈñ¢Êï∞
        function categorizeCSVGenres() {
            const categories = {
                "„Éï„É•„Éº„Ç∏„Éß„É≥„Éª„Ç∏„É£„Ç∫": [],
                "„Ç¢„Éï„É≠„Éª„ÉØ„Éº„É´„Éâ": [],
                "„Ç®„É¨„ÇØ„Éà„É≠„Éã„ÉÉ„ÇØ„Éª„Éï„É•„Éº„Ç∏„Éß„É≥": [],
                "„Ç¢„É≥„Éì„Ç®„É≥„Éà„Éª„ÉÅ„É´„Ç¢„Ç¶„Éà": [],
                "„Éí„ÉÉ„Éó„Éõ„ÉÉ„Éó„Éª„Éï„É•„Éº„Ç∏„Éß„É≥": [],
                "„É≠„ÉÉ„ÇØ„Éª„Éï„É•„Éº„Ç∏„Éß„É≥": [],
                "„Éù„ÉÉ„Éó„Éª„Éï„É•„Éº„Ç∏„Éß„É≥": [],
                "„Éï„Ç©„Éº„ÇØ„Éª„Éï„É•„Éº„Ç∏„Éß„É≥": [],
                "„É¨„Ç≤„Ç®„Éª„Ç´„É™„Éì„Ç¢„É≥": [],
                "ÂÆüÈ®ìÁöÑ„Éª„Ç¢„É¥„Ç°„É≥„ÇÆ„É£„É´„Éâ": []
            };
            
            csvGenres.forEach(genre => {
                const lowerGenre = genre.toLowerCase();
                
                // „Ç∏„É£„Ç∫Á≥ª
                if (lowerGenre.includes('jazz') || lowerGenre.includes('swing') || lowerGenre.includes('bebop') || 
                    lowerGenre.includes('bossa nova') || lowerGenre.includes('acid jazz')) {
                    categories["„Éï„É•„Éº„Ç∏„Éß„É≥„Éª„Ç∏„É£„Ç∫"].push(genre);
                }
                // „Ç¢„Éï„É≠„Éª„ÉØ„Éº„É´„ÉâÁ≥ª
                else if (lowerGenre.includes('afro') || lowerGenre.includes('african') || lowerGenre.includes('arabic') || 
                         lowerGenre.includes('hindi') || lowerGenre.includes('mandarin') || lowerGenre.includes('spanish') ||
                         lowerGenre.includes('tuareg') || lowerGenre.includes('gnawa') || lowerGenre.includes('coptic') ||
                         lowerGenre.includes('bengali') || lowerGenre.includes('urdu')) {
                    categories["„Ç¢„Éï„É≠„Éª„ÉØ„Éº„É´„Éâ"].push(genre);
                }
                // „Ç®„É¨„ÇØ„Éà„É≠„Éã„ÉÉ„ÇØÁ≥ª
                else if (lowerGenre.includes('techno') || lowerGenre.includes('house') || lowerGenre.includes('electro') ||
                         lowerGenre.includes('drum and bass') || lowerGenre.includes('dubstep') || lowerGenre.includes('edm') ||
                         lowerGenre.includes('trance') || lowerGenre.includes('acid') || lowerGenre.includes('synthwave') ||
                         lowerGenre.includes('algorave') || lowerGenre.includes('breakbeat')) {
                    categories["„Ç®„É¨„ÇØ„Éà„É≠„Éã„ÉÉ„ÇØ„Éª„Éï„É•„Éº„Ç∏„Éß„É≥"].push(genre);
                }
                // „Ç¢„É≥„Éì„Ç®„É≥„Éà„Éª„ÉÅ„É´„Ç¢„Ç¶„ÉàÁ≥ª
                else if (lowerGenre.includes('ambient') || lowerGenre.includes('chillwave') || lowerGenre.includes('dreamy') ||
                         lowerGenre.includes('downtempo') || lowerGenre.includes('shoegaze') || lowerGenre.includes('bedroom')) {
                    categories["„Ç¢„É≥„Éì„Ç®„É≥„Éà„Éª„ÉÅ„É´„Ç¢„Ç¶„Éà"].push(genre);
                }
                // „Éí„ÉÉ„Éó„Éõ„ÉÉ„ÉóÁ≥ª
                else if (lowerGenre.includes('rap') || lowerGenre.includes('hip hop') || lowerGenre.includes('trap') ||
                         lowerGenre.includes('boom bap') || lowerGenre.includes('drill') || lowerGenre.includes('grime')) {
                    categories["„Éí„ÉÉ„Éó„Éõ„ÉÉ„Éó„Éª„Éï„É•„Éº„Ç∏„Éß„É≥"].push(genre);
                }
                // „É≠„ÉÉ„ÇØÁ≥ª
                else if (lowerGenre.includes('rock') || lowerGenre.includes('grunge') || lowerGenre.includes('metal') ||
                         lowerGenre.includes('punk') || lowerGenre.includes('garage')) {
                    categories["„É≠„ÉÉ„ÇØ„Éª„Éï„É•„Éº„Ç∏„Éß„É≥"].push(genre);
                }
                // „Éù„ÉÉ„ÉóÁ≥ª
                else if (lowerGenre.includes('pop') || lowerGenre.includes('bubblegum') || lowerGenre.includes('k-pop') ||
                         lowerGenre.includes('j-pop') || lowerGenre.includes('disco') || lowerGenre.includes('dance')) {
                    categories["„Éù„ÉÉ„Éó„Éª„Éï„É•„Éº„Ç∏„Éß„É≥"].push(genre);
                }
                // „Éï„Ç©„Éº„ÇØ„Éª„Ç´„É≥„Éà„É™„ÉºÁ≥ª
                else if (lowerGenre.includes('folk') || lowerGenre.includes('country') || lowerGenre.includes('bluegrass') ||
                         lowerGenre.includes('americana') || lowerGenre.includes('alt-country') || lowerGenre.includes('cajun')) {
                    categories["„Éï„Ç©„Éº„ÇØ„Éª„Éï„É•„Éº„Ç∏„Éß„É≥"].push(genre);
                }
                // „É¨„Ç≤„Ç®„Éª„Ç´„É™„Éì„Ç¢„É≥Á≥ª
                else if (lowerGenre.includes('reggae') || lowerGenre.includes('dancehall') || lowerGenre.includes('samba') ||
                         lowerGenre.includes('cumbia') || lowerGenre.includes('merengue') || lowerGenre.includes('calypso') ||
                         lowerGenre.includes('caribbean')) {
                    categories["„É¨„Ç≤„Ç®„Éª„Ç´„É™„Éì„Ç¢„É≥"].push(genre);
                }
                // „Åù„ÅÆ‰ªñÂÆüÈ®ìÁöÑ
                else {
                    categories["ÂÆüÈ®ìÁöÑ„Éª„Ç¢„É¥„Ç°„É≥„ÇÆ„É£„É´„Éâ"].push(genre);
                }
            });
            
            // Á©∫„ÅÆ„Ç´„ÉÜ„Ç¥„É™„ÇíÂâäÈô§
            Object.keys(categories).forEach(key => {
                if (categories[key].length === 0) {
                    delete categories[key];
                }
            });
            
            return categories;
        }



        // „É†„Éº„ÉâÂàùÊúüÂåñ
        function initializeMoods() {
            const container = document.getElementById('moods-container');
            Object.keys(moods).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-6';
                categoryDiv.innerHTML = `<h3 class="text-lg font-semibold mb-3">${category}</h3>`;
                
                const moodContainer = document.createElement('div');
                moodContainer.className = 'flex flex-wrap';
                
                moods[category].forEach(mood => {
                    const btn = document.createElement('button');
                    btn.className = 'genre-btn';
                    btn.textContent = mood;
                    btn.onclick = () => toggleSelection(btn, mood);
                    btn.dataset.mood = mood.toLowerCase();
                    moodContainer.appendChild(btn);
                });
                
                categoryDiv.appendChild(moodContainer);
                container.appendChild(categoryDiv);
            });
        }



        // „Çø„ÉñÂàá„ÇäÊõø„Åà
        function showTab(tabName) {
            // ÂÖ®„Å¶„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫
            document.getElementById('moods-section').style.display = 'none';
            document.getElementById('vocal-section').style.display = 'none';
            document.getElementById('genres-section').style.display = 'none';
            document.getElementById('artists-section').style.display = 'none';
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË°®Á§∫
            document.getElementById(tabName + '-section').style.display = 'block';
            
            // ÈÅ∏Êäû„Åó„Åü„Çª„ÇØ„Ç∑„Éß„É≥„Åæ„Åß„Çπ„ÇØ„É≠„Éº„É´
            setTimeout(() => {
                document.getElementById(tabName + '-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
            
            // „Çø„Éñ„Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.includes('„Ç∏„É£„É≥„É´') && tabName === 'genres') btn.classList.add('active');
                else if (btn.textContent.includes('„É†„Éº„Éâ') && tabName === 'moods') btn.classList.add('active');
                else if (btn.textContent.includes('„Éú„Éº„Ç´„É´') && tabName === 'vocal') btn.classList.add('active');
                else if (btn.textContent.includes('Ê≠åÊâã') && tabName === 'artists') btn.classList.add('active');
            });
        }

        // ÈÅ∏ÊäûÂàá„ÇäÊõø„Åà
        function toggleSelection(button, value) {
            const index = selectedItems.indexOf(value);
            if (index > -1) {
                selectedItems.splice(index, 1);
                button.classList.remove('selected');
                console.log('Removed:', value, 'Current items:', selectedItems);
            } else {
                selectedItems.push(value);
                button.classList.add('selected');
                console.log('Added:', value, 'Current items:', selectedItems);
            }
            updatePrompt();
        }



        // „Éó„É≠„É≥„Éó„ÉàÊõ¥Êñ∞
        async function updatePrompt() {
            // Ë™çË®º„ÉÅ„Çß„ÉÉ„ÇØÔºà„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ‰ªò„ÅçÔºâ
            if (!authCheckComplete) {
                console.log('Ë™çË®º„Ç∑„Çπ„ÉÜ„É†„ÅÆÂàùÊúüÂåñ‰∏≠„Åß„Åô„ÄÇ');
                // ÂàùÊúüÂåñ„ÇíÂæÖ„Å§„Åã„ÄÅ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ„ÅßÁ∂öË°å
                if (!supabaseClient) {
                    console.log('Ë™çË®º„Å™„Åó„É¢„Éº„Éâ„ÅßÁ∂öË°å');
                } else {
                    return;
                }
            }
            
            // ‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØÔºà‰∏ÄÊôÇÁöÑ„Å´ÂÆåÂÖ®ÁÑ°ÂäπÂåñÔºâ
            console.log('‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ„Çí„Çπ„Ç≠„ÉÉ„Éó - Âà∂Èôê„Å™„Åó„ÅßÂãï‰Ωú');
            /*
            try {
                const canGenerate = await checkPromptGenerationLimit();
                if (!canGenerate) {
                    showUsageLimitModal('prompt');
                    return;
                }
            } catch (error) {
                console.log('‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ„Ç®„É©„Éº„ÄÅÂà∂Èôê„Å™„Åó„ÅßÁ∂öË°å:', error);
            }
            */
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Ç¢„Ç§„ÉÜ„É†„ÅØÂ∏∏„Å´Ëã±Ë™û„ÅÆ„Åæ„Åæ‰øùÊåÅ
            let prompt = selectedItems.join(', ');
            
            // Ê≠åË©ûË®ÄË™û„ÅÆ„Åø„ÇíÈÅ∏Êäû„Åó„ÅüË®ÄË™û„Å´Âøú„Åò„Å¶ËøΩÂä†
            if (selectedPromptLanguage === 'cantonese') {
                prompt = prompt ? prompt + ', Cantonese lyrics' : 'Cantonese lyrics';
            } else if (selectedPromptLanguage === 'chinese') {
                prompt = prompt ? prompt + ', Chinese lyrics' : 'Chinese lyrics';
            } else if (selectedPromptLanguage === 'japanese') {
                prompt = prompt ? prompt + ', Japanese lyrics' : 'Japanese lyrics';
            } else if (selectedPromptLanguage === 'english') {
                prompt = prompt ? prompt + ', English lyrics' : 'English lyrics';
            }
            
            document.getElementById('generated-prompt').textContent = prompt || getPlaceholderText();
            
            // „Éó„É≠„É≥„Éó„Éà„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆË°®Á§∫/ÈùûË°®Á§∫
            const promptSection = document.getElementById('prompt-section');
            console.log('UpdatePrompt - selectedItems:', selectedItems, 'prompt:', prompt);
            
            // Â∏∏„Å´„Éó„É≠„É≥„Éó„Éà„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË°®Á§∫ÔºàÂàùÊúüÁä∂ÊÖã„Åß„ÇÇË°®Á§∫Ôºâ
            if (promptSection) {
                promptSection.style.display = 'block';
                console.log('Showing prompt section');
                
                // ‰ΩøÁî®ÂõûÊï∞„ÇíÂ¢ó„ÇÑ„Åó„Å¶‰øùÂ≠òÔºàÂÆüÈöõ„Å´„Ç¢„Ç§„ÉÜ„É†„ÅåÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅÆ„ÅøÔºâ
                if (selectedItems.length > 0 && prompt !== getPlaceholderText()) {
                    try {
                        await incrementUsageCount('prompt');
                    } catch (error) {
                        console.log('‰ΩøÁî®ÂõûÊï∞Êõ¥Êñ∞„Ç®„É©„Éº:', error);
                    }
                }
            }
        }

        // „Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„Éº„ÉÜ„Ç≠„Çπ„Éà„ÇíË®ÄË™û„Å´Âøú„Åò„Å¶ÂèñÂæó
        function getPlaceholderText() {
            const placeholders = {
                'cantonese': 'ÈÅ∏ÊìáÂòÖÈ¢®Ê†ºÊúÉÂñ∫Âë¢Â∫¶È°ØÁ§∫',
                'chinese': 'ÈÄâÊã©ÁöÑÈ£éÊ†ºÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫',
                'japanese': 'ÈÅ∏Êäû„Åó„Åü„Çπ„Çø„Ç§„É´„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô',
                'english': 'Selected styles will be displayed here'
            };
            return placeholders[selectedPromptLanguage] || placeholders['japanese'];
        }



        // „Éó„É≠„É≥„Éó„Éà„Çí„ÇØ„É™„Ç¢
        function clearPrompt() {
            selectedItems = [];
            document.querySelectorAll('.selected').forEach(btn => {
                if (!btn.id || !btn.id.startsWith('lang-')) {
                    btn.classList.remove('selected');
                }
            });
            updatePrompt();
        }

        // Ê≠åË©ûÁîüÊàê
        function generateLyrics() {
            const title = document.getElementById('song-title').value;
            const theme = document.getElementById('song-theme').value;
            
            // Ââç„ÅÆÂÜÖÂÆπ„Çí„ÇØ„É™„Ç¢
            clearPreviousLyrics();
            
            if (!title && !theme) {
                document.getElementById('lyrics-candidates').style.display = 'none';
                return;
            }
            
            // 3„Å§„ÅÆÂÄôË£ú„ÇíÁîüÊàê
            generateLyricsCandidate(0, title, theme, '„Éù„ÉÉ„Éó„ÇπÈ¢®');
            generateLyricsCandidate(1, title, theme, '„Éê„É©„Éº„ÉâÈ¢®');
            generateLyricsCandidate(2, title, theme, '„Ç¢„ÉÉ„Éó„ÉÜ„É≥„ÉùÈ¢®');
            
            document.getElementById('lyrics-candidates').style.display = 'block';
        }

        // Ââç„ÅÆÊ≠åË©û„Çí„ÇØ„É™„Ç¢„Åô„ÇãÈñ¢Êï∞
        function clearPreviousLyrics() {
            // ÁîüÊàê„Åï„Çå„ÅüÊ≠åË©û„Çí„ÇØ„É™„Ç¢
            generatedLyrics = {};
            
            // ÂÄôË£úË°®Á§∫„Çí„ÇØ„É™„Ç¢
            ['lyrics-a', 'lyrics-b', 'lyrics-c'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = '';
                    if (element.parentElement && element.parentElement.classList) {
                        element.parentElement.classList.remove('selected');
                    }
                }
            });
            
            // ÊúÄÁµÇÊ≠åË©ûË°®Á§∫„Çí„ÇØ„É™„Ç¢
            const finalLyrics = document.getElementById('final-lyrics');
            if (finalLyrics) {
                finalLyrics.textContent = '';
            }
            
            // ÊúÄÁµÇÊ≠åË©û„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫
            const finalLyricsSection = document.getElementById('final-lyrics-section');
            if (finalLyricsSection) {
                finalLyricsSection.style.display = 'none';
            }
        }

        // Ê≠åË©ûÂÄôË£úÁîüÊàê
        function generateLyricsCandidate(index, title, theme, style) {
            let lyrics = '';
            
            if (selectedLanguage === 'cantonese') {
                lyrics = generateCantroneseLyrics(title, theme, style);
            } else if (selectedLanguage === 'japanese') {
                lyrics = generateJapaneseLyrics(title, theme, style);
            } else {
                lyrics = generateInstrumentalStructure(title, theme, style);
            }
            
            const candidateIds = ['lyrics-a', 'lyrics-b', 'lyrics-c'];
            const candidateId = candidateIds[index];
            generatedLyrics[candidateId] = lyrics;
            document.getElementById(candidateId).textContent = lyrics;
        }

        // Â∫ÉÊù±Ë™ûÊ≠åË©ûÁîüÊàê
        function generateCantroneseLyrics(title, theme, style) {
            const structures = selectedStructures.length > 0 ? selectedStructures : ['Intro', 'Verse', 'Chorus', 'Bridge', 'Outro'];
            let lyrics = '';
            
            structures.forEach(structure => {
                lyrics += `[${structure}]\n`;
                
                switch(structure) {
                    case 'Intro':
                        if (style === '„Éù„ÉÉ„Éó„ÇπÈ¢®') {
                            lyrics += `Èü≥Ê®ÇÈüøËµ∑ÂòÖÊôÇÂÄô\nÂ§úÊôöÈñãÂßãËÆäÂæóÁâπÂà•\n`;
                        } else if (style === '„Éê„É©„Éº„ÉâÈ¢®') {
                            lyrics += `ÈùúÈùúÂòÖÂ§úÊôöË£°Èù¢\nÊúàÂÖâÁÖß‰ΩèÊàëÂòÖÂøÉ\n`;
                        } else {
                            lyrics += `ÁØÄÊãçÈñãÂßãË∑≥Âãï\nÊ∫ñÂÇôÂ•Ω‰∏ÄÈΩäÁãÇÊ≠°\n`;
                        }
                        break;
                        
                    case 'Verse':
                        if (title && theme) {
                            lyrics += `ÈóúÊñº„Ää${title}„ÄãÂòÖÊïÖ‰∫ã\n${theme}ÂòÖÂõûÊÜ∂\n‰∏ÄÁõ¥ÈÉΩËóèÂñ∫ÊàëÂøÉÂ∫ï\nÊ∞∏ÈÅ†ÈÉΩÂîîÊúÉÂøòË®ò\nÂë¢‰ªΩÊÑüÊÉÖÂ•ΩÁèçË≤¥\nÈô™‰º¥ÊàëÂà∞ËÄåÂÆ∂\n`;
                        } else if (title) {
                            lyrics += `„Ää${title}„ÄãÂ∞±‰øÇÊàëÂòÖÂ§¢ÊÉ≥\n‰∏ÄË∑ØËµ∞‰æÜÂîîÂÆπÊòì\n‰ΩÜ‰øÇÊàëÂæû‰æÜÂÜáÊîæÊ£Ñ\nÂõ†ÁÇ∫Áõ∏‰ø°ÊúÉÊúâÂ•áË∑°\nÊØè‰∏ÄÊ≠•ÈÉΩÂÖÖÊªøÊÑèÁæ©\nÂêë‰ΩèÁõÆÊ®ôÁπºÁ∫åÂâçÈÄ≤\n`;
                        } else {
                            lyrics += `Ë°åÈÅéÁÜüÊÇâÂòÖË°óÈÅì\nÂõûÊÜ∂ÊπßÊôí‰∏äÂøÉÈ†≠\n‰Ω†ÂòÖÁ¨ëÂÆπ‰æùÁÑ∂ÂíÅÊ∫´Êüî\n‰ª§ÊàëÂøçÂîî‰ΩèÂõûÊúõ\nÊ≠≤ÊúàÂ¶ÇÊµÅÊ∞¥ÂíÅÈÅé\n‰ΩÜÊÑõÊÉÖÊ∞∏ÈÅ†‰∏çËÆä\n`;
                        }
                        break;
                        
                    case 'Chorus':
                        if (title) {
                            lyrics += `„Ää${title}„Äã‰øÇÊàëÂøÉ‰∏≠Ê∞∏ÈÅ†ÂòÖÊ≠å\nÁÑ°Ë´ñÂéªÂà∞ÈÇäÂ∫¶ÈÉΩÊúÉË®òÂæó\nÂë¢‰ªΩÊÑõÊ∞∏ÈÅ†ÂîîÊúÉËÆä\nÂ∞±ÁÆó‰∏ñÁïåÈªûÊ®£ÊîπËÆä\nÊàëÈÉΩÊúÉÂ†ÖÊåÅÂà∞ÊúÄÂæå\nÂõ†ÁÇ∫‰Ω†‰øÇÊàëÂòÖ‰∏ÄÂàá\nÊÑõ‰Ω†Áõ¥Âà∞‰∏ñÁïåÁõ°È†≠\nÂë¢‰ªΩÊÉÖÊ∞∏ÈÅ†ÂîîÊúÉÂÆå\n`;
                        } else {
                            lyrics += `È¶ôÊ∏ØÂòÖÂ§úÊôöÂ•ΩÈùöÂ•ΩÈùö\n‰ΩÜ‰øÇÂÜáÂíó‰Ω†Â∞±ÂîîÂêåÊôí\nÁáàÁÅ´ÈóåÁèäËôï\nÊàëÂìãÂòÖÊÑõÊÉÖÊïÖ‰∫ã\nÊ∞∏ÈÅ†ÈÉΩÂîîÊúÉÂÆåÁµê\nÂøÉ‰∏≠Ê∞∏ÈÅ†Êúâ‰Ω†ÂòÖ‰ΩçÁΩÆ\nÊÑõ‰Ω†Áõ¥Âà∞‰∏ñÁïåÁõ°È†≠\nÂë¢‰ªΩÊÉÖÊ∞∏ÈÅ†ÂîîÊúÉËÆä\n`;
                        }
                        break;
                        
                    case 'Bridge':
                        lyrics += `Â∞±ÁÆóÊôÇÈñìÈªûÊ®£ÈÅé\nÂ∞±ÁÆó‰∏ñÁïåÈªûÊ®£ËÆä\nÊàëÂ∞ç‰Ω†ÂòÖÂøÉ\nÊ∞∏ÈÅ†ÈÉΩÂîîÊúÉÊîπËÆä\n`;
                        break;
                        
                    case 'Outro':
                        if (style === '„Éê„É©„Éº„ÉâÈ¢®') {
                            lyrics += `Èü≥Ê®ÇÊÖ¢ÊÖ¢fade out\n‰ΩÜÊÑõÊÉÖÊïÖ‰∫ãÁπºÁ∫å\nÂñ∫ÊàëÂìãÂøÉ‰∏≠Ê∞∏ÈÅ†Â≠òÂú®\n`;
                        } else {
                            lyrics += `Â§úÊ∑±‰∫∫ÈùúÂòÖÊôÇÂÄô\n‰æùÁÑ∂ÊúÉË´óËµ∑‰Ω†\nÊÑõÊÉÖÂòÖÊóãÂæãÁπºÁ∫å\n`;
                        }
                        break;
                        
                    default:
                        lyrics += `[${structure}Ê®ÇÂô®ÊºîÂ•èÈÉ®ÂàÜ]\n`;
                }
                lyrics += '\n';
            });
            
            return lyrics.trim();
        }

        // Êó•Êú¨Ë™ûÊ≠åË©ûÁîüÊàê
        function generateJapaneseLyrics(title, theme, style) {
            const structures = selectedStructures.length > 0 ? selectedStructures : ['Intro', 'Verse', 'Chorus', 'Bridge', 'Outro'];
            let lyrics = '';
            
            structures.forEach(structure => {
                lyrics += `[${structure}]\n`;
                
                switch(structure) {
                    case 'Intro':
                        if (style === '„Éù„ÉÉ„Éó„ÇπÈ¢®') {
                            lyrics += `Êñ∞„Åó„ÅÑÊúù„ÅåÂßã„Åæ„Çã\nÂ∏åÊúõ„ÅÆÂÖâ„ÅåÂ∑Æ„ÅóËæº„Çì„Åß\n`;
                        } else if (style === '„Éê„É©„Éº„ÉâÈ¢®') {
                            lyrics += `Èùô„Åã„Å™Â§ú„Å´Èüø„Åè\n„ÅÇ„Å™„Åü„ÅÆÂ£∞„ÅåËÅû„Åì„Åà„Çã\n`;
                        } else {
                            lyrics += `„É™„Ç∫„É†„ÅåÂøÉ„ÇíË∫ç„Çâ„Åõ\n‰ªäÂ§ú„ÅØÁâπÂà•„Å™Â§ú\n`;
                        }
                        break;
                        
                    case 'Verse':
                        if (title && theme) {
                            lyrics += `„Äå${title}„Äç„Å´„Å§„ÅÑ„Å¶Ê≠å„Åä„ÅÜ\n${theme}„ÅÆÊÉ≥„ÅÑ„ÇíËæº„ÇÅ„Å¶\nÂøÉ„Å´Èüø„ÅèË®ÄËëâ„Åß\n‰ºù„Åà„Åü„ÅÑÊ∞óÊåÅ„Å°„Åå„ÅÇ„Çã\nÊôÇ„ÅåÈÅé„Åé„Å¶„ÇÇÂ§â„Çè„Çâ„Å™„ÅÑ\n„Åì„ÅÆÊÑõ„ÅØÊ∞∏ÈÅ†„Å´\n`;
                        } else if (title) {
                            lyrics += `„Äå${title}„Äç„Å®„ÅÑ„ÅÜÂêç„ÅÆÁâ©Ë™û\nÂßã„Åæ„Çä„ÅØ„ÅÑ„Å§„ÇÇÂ∞è„Åï„Åè„Å¶\nÂ§¢„Çí‰ø°„Åò„Å¶Ê≠©„ÅçÁ∂ö„Åë\nË´¶„ÇÅ„Å™„ÅÑÂøÉ„Åß\nÊú™Êù•„Å∏„ÅÆÊââ„ÇíÈñã„ÅÑ„Å¶\nÊñ∞„Åó„ÅÑ‰∏ñÁïå„Å∏\n`;
                        } else {
                            lyrics += `ÊÄù„ÅÑÂá∫„ÅÆ‰∏≠„ÇíÊ≠©„ÅÑ„Å¶\n„ÅÇ„Å™„Åü„ÅÆÁ¨ëÈ°î„ÇíÊé¢„Åó„Å¶„Çã\nÂ≠£ÁØÄ„ÅØÂ∑°„Å£„Å¶„ÇÇ\nÂ§â„Çè„Çâ„Å™„ÅÑÊÉ≥„ÅÑ„Åå„ÅÇ„Çã\nÊ∞∏ÈÅ†„Å´Á∂ö„ÅèÊÑõ„ÅÆÊ≠å\nÂøÉ„Å´Âàª„Åæ„Çå„Å¶\n`;
                        }
                        break;
                        
                    case 'Chorus':
                        if (title) {
                            lyrics += `„Äå${title}„Äç„ÅØÂøÉ„ÅÆÊ≠å\n„ÅÑ„Å§„Åæ„Åß„ÇÇÈüø„ÅÑ„Å¶„ÅÑ„Çã\n„Å©„Çì„Å™ÊôÇ„ÇÇÊîØ„Åà„Å¶„Åè„Çå„Çã\nÂ§ßÂàá„Å™ÂÆùÁâ©\nÊÑõ„ÅØÊ∞∏ÈÅ†„Å´Á∂ö„ÅÑ„Å¶\nÊ±∫„Åó„Å¶Ëâ≤Ë§™„Åõ„Å™„ÅÑ\n‰∏ñÁïå„ÅÆÊûú„Å¶„Åæ„Åß\n„Åì„ÅÆÊÉ≥„ÅÑ„ÇíÂ±ä„Åë„Åü„ÅÑ\n`;
                        } else {
                            lyrics += `ÊÑõ„ÅØÊ∞∏ÈÅ†„Å´Áæé„Åó„Åè\n„ÅÇ„Å™„Åü„Åå„ÅÑ„Çã„Åã„ÇâËºù„ÅÑ„Å¶\nÊòüÁ©∫„ÅÆ‰∏ã„Åß\nË™ì„Å£„ÅüÁ¥ÑÊùü\nÊôÇ„ÇíË∂Ö„Åà„Å¶„ÇÇÂ§â„Çè„Çâ„Å™„ÅÑ\nÂøÉ„Å´Âàª„Åæ„Çå„ÅüÊÑõ„ÅÆÊ≠å\n‰∏ñÁïå‰∏≠„Å´Èüø„Åã„Åõ„Å¶\n„Åì„ÅÆÊÉ≥„ÅÑ„Çí‰ºù„Åà„Åü„ÅÑ\n`;
                        }
                        break;
                        
                    case 'Bridge':
                        lyrics += `„Åü„Å®„ÅàÈÅì„ÅÆ„Çä„ÅåÈô∫„Åó„Åè„Å¶„ÇÇ\n„ÅÇ„Å™„Åü„Åå„ÅÑ„Çå„Å∞ÊÄñ„Åè„Å™„ÅÑ\n‰∏ÄÁ∑í„Å´Ê≠©„ÅÑ„Å¶„ÅÑ„Åì„ÅÜ\nÊú™Êù•„Å∏„ÅÆÊââ„ÇíÈñã„ÅÑ„Å¶\n`;
                        break;
                        
                    case 'Outro':
                        if (style === '„Éê„É©„Éº„ÉâÈ¢®') {
                            lyrics += `ÈùôÂØÇ„ÅÆ‰∏≠„Å´Èüø„Åè\nÊÑõ„ÅÆÊóãÂæã„ÅØÊ∞∏ÈÅ†„Å´\n„ÅÇ„Å™„Åü„Å®ÂÖ±„Å´Ê≠©„Çì„Åß„ÅÑ„Åè\n`;
                        } else {
                            lyrics += `Êñ∞„Åó„ÅÑÊúù„ÅåÊù•„Å¶„ÇÇ\n„Åì„ÅÆÊ≠å„ÅØÁ∂ö„ÅÑ„Å¶„ÅÑ„Åè\nÂøÉ„ÅÆ‰∏≠„ÅßÈüø„ÅèÊÑõ„ÅÆÊ≠å\n`;
                        }
                        break;
                        
                    default:
                        lyrics += `[${structure}Ê•ΩÂô®ÊºîÂ•èÈÉ®ÂàÜ]\n`;
                }
                lyrics += '\n';
            });
            
            return lyrics.trim();
        }

        // „Ç§„É≥„Çπ„Éà„Ç•„É´„É°„É≥„Çø„É´ÊßãÊàêÁîüÊàê
        function generateInstrumentalStructure(title, theme, style) {
            const structures = selectedStructures.length > 0 ? selectedStructures : ['Intro', 'Verse', 'Chorus', 'Bridge', 'Outro'];
            let lyrics = '';
            
            structures.forEach(structure => {
                lyrics += `[${structure}]\n`;
                
                switch(structure) {
                    case 'Intro':
                        lyrics += `„ÇΩ„Éï„Éà„Å™„Éî„Ç¢„Éé„ÅßÂßã„Åæ„Çã\nÈùô„Åã„Å™„É°„É≠„Éá„Ç£„Éº„ÅåÊµÅ„Çå\n`;
                        break;
                    case 'Verse':
                        lyrics += `„É°„Ç§„É≥„É°„É≠„Éá„Ç£„Éº„ÅåÂ±ïÈñã\n„Çπ„Éà„É™„É≥„Ç∞„Çπ„ÅåÂä†„Çè„Çä\nË±ä„Åã„Å™„Éè„Éº„É¢„Éã„Éº„Çí‰Ωú„Çã\n`;
                        break;
                    case 'Chorus':
                        lyrics += `„Éï„É´„Ç™„Éº„Ç±„Çπ„Éà„É©„ÅßÁõõ„Çä‰∏ä„Åå„Çä\nÂç∞Ë±°ÁöÑ„Å™„É°„É≠„Éá„Ç£„Éº„É©„Ç§„É≥\nÊÑüÊÉÖË±ä„Åã„Å™Ë°®Áèæ\n`;
                        break;
                    case 'Bridge':
                        lyrics += `Ëª¢Ë™ø„Å®„Å®„ÇÇ„Å´Êñ∞„Åó„ÅÑÂ±ïÈñã\n„ÇΩ„É≠Ê•ΩÂô®„ÅåÊÑüÊÉÖ„ÇíË°®Áèæ\n`;
                        break;
                    case 'Guitar Solo':
                        lyrics += `ÊÉÖÁÜ±ÁöÑ„Å™„ÇÆ„Çø„Éº„ÇΩ„É≠\nÊäÄË°ìÁöÑ„ÅßË°®ÁèæÂäõË±ä„Åã\n`;
                        break;
                    case 'Piano Solo':
                        lyrics += `Áæé„Åó„ÅÑ„Éî„Ç¢„Éé„ÇΩ„É≠\nÁπäÁ¥∞„ÅßÂøÉ„Å´Èüø„ÅèÊºîÂ•è\n`;
                        break;
                    case 'Outro':
                        lyrics += `‰ΩôÈüª„ÇíÊÆã„Åó„Å¶„Éï„Çß„Éº„Éâ„Ç¢„Ç¶„Éà\nÈùôÂØÇ„ÅÆ‰∏≠„Å´Ê∂à„Åà„Å¶„ÅÑ„Åè\n`;
                        break;
                    default:
                        lyrics += `[${structure}Ê•ΩÂô®ÊºîÂ•èÈÉ®ÂàÜ]\n`;
                }
                lyrics += '\n';
            });
            
            return lyrics.trim();
        }

        // Ê≠åË©ûÂÄôË£úÈÅ∏Êäû
        function selectLyrics(candidateDiv, key) {
            // „Åô„Åπ„Å¶„ÅÆÂÄôË£ú„ÅÆÈÅ∏Êäû„ÇíËß£Èô§
            document.querySelectorAll('.lyrics-candidate').forEach(div => {
                div.classList.remove('selected');
            });
            
            // ÈÅ∏Êäû„Åó„ÅüÂÄôË£ú„Çí„Éè„Ç§„É©„Ç§„Éà
            candidateDiv.classList.add('selected');
            
            // ÊúÄÁµÇÊ≠åË©û„Å®„Åó„Å¶Ë°®Á§∫
            const selectedLyrics = generatedLyrics[key];
            document.getElementById('final-lyrics').textContent = selectedLyrics;
            document.getElementById('final-lyrics-section').style.display = 'block';
        }

        // „Çø„Ç§„Éà„É´„ÇÑ„ÉÜ„Éº„Éû„ÅÆÂÖ•Âäõ„Çí„É™„Çª„ÉÉ„Éà„Åô„ÇãÈñ¢Êï∞
        function resetLyricsInput() {
            document.getElementById('song-title').value = '';
            document.getElementById('song-theme').value = '';
            clearPreviousLyrics();
            
            // ÊßãÈÄ†ÈÅ∏Êäû„ÇÇ„É™„Çª„ÉÉ„Éà
            selectedStructures = [];
            document.querySelectorAll('[onclick^="toggleStructure"]').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        // Ê§úÁ¥¢Ê©üËÉΩ
        function searchArtists(query) {
            const buttons = document.querySelectorAll('#artists-container .artist-btn');
            buttons.forEach(btn => {
                const artist = btn.dataset.artist || '';
                const style = btn.dataset.style || '';
                if (artist.includes(query.toLowerCase()) || style.includes(query.toLowerCase())) {
                    btn.style.display = 'inline-block';
                } else {
                    btn.style.display = 'none';
                }
            });
        }

        function searchGenres(query) {
            // ÂÖ®„Å¶„ÅÆ„Ç∏„É£„É≥„É´„Éú„Çø„É≥„ÇíÊ§úÁ¥¢ÔºàÁµ±‰∏Ä„Åï„Çå„Åü„ÇØ„É©„ÇπÔºâ
            const genreButtons = document.querySelectorAll('#genres-container .genre-btn');
            genreButtons.forEach(btn => {
                const genre = btn.dataset.genre || '';
                const buttonText = btn.textContent.toLowerCase();
                if (genre.includes(query.toLowerCase()) || buttonText.includes(query.toLowerCase())) {
                    btn.style.display = 'inline-block';
                } else {
                    btn.style.display = 'none';
                }
            });
        }

        // „Ç≥„Éî„ÉºÊ©üËÉΩ
        function copyPrompt() {
            const prompt = document.getElementById('generated-prompt').textContent;
            navigator.clipboard.writeText(prompt).then(() => {
                const messages = {
                    'cantonese': 'ÊèêÁ§∫Â∑≤Ë§áË£ΩÔºÅ',
                    'chinese': 'ÊèêÁ§∫Â∑≤Â§çÂà∂ÔºÅ',
                    'japanese': '„Éó„É≠„É≥„Éó„Éà„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ',
                    'english': 'Prompt copied!'
                };
                alert(messages[selectedPromptLanguage] || messages['japanese']);
            });
        }

        function copyLyrics() {
            const lyrics = document.getElementById('final-lyrics').textContent;
            navigator.clipboard.writeText(lyrics).then(() => {
                const messages = {
                    'cantonese': 'Ê≠åË©ûÂ∑≤Ë§áË£ΩÔºÅ',
                    'chinese': 'Ê≠åËØçÂ∑≤Â§çÂà∂ÔºÅ',
                    'japanese': 'Ê≠åË©û„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ',
                    'english': 'Lyrics copied!'
                };
                alert(messages[selectedPromptLanguage] || messages['japanese']);
            });
        }

        // CSV„Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÊ©üËÉΩ
        function uploadCSV() {
            const fileInput = document.getElementById('csv-upload');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('CSV„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                const lines = content.split('\n').filter(line => line.trim());
                
                // Êñ∞„Åó„ÅÑ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„ÇíËøΩÂä†
                const newArtists = [];
                lines.forEach(line => {
                    const artistName = line.trim();
                    if (artistName && !artists.find(a => a.name === artistName)) {
                        newArtists.push({
                            name: artistName,
                            style: getDefaultStyle(artistName)
                        });
                    }
                });
                
                if (newArtists.length > 0) {
                    // Êó¢Â≠ò„ÅÆ„Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàÈÖçÂàó„Å´ËøΩÂä†
                    artists.push(...newArtists);
                    
                    // „Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàË°®Á§∫„ÇíÊõ¥Êñ∞
                    const container = document.getElementById('artists-container');
                    container.innerHTML = '';
                    initializeArtists();
                    updateCounts();
                    
                    document.getElementById('upload-status').innerHTML = 
                        `<span class="text-green-600"><i class="fas fa-check-circle mr-2"></i>${newArtists.length}ÂÄã„ÅÆÊñ∞„Åó„ÅÑ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„ÇíËøΩÂä†„Åó„Åæ„Åó„ÅüÔºÅ</span>`;
                } else {
                    document.getElementById('upload-status').innerHTML = 
                        '<span class="text-yellow-600"><i class="fas fa-info-circle mr-2"></i>Êñ∞„Åó„ÅÑ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„ÅØË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü</span>';
                }
            };
            
            reader.onerror = function() {
                document.getElementById('upload-status').innerHTML = 
                    '<span class="text-red-600"><i class="fas fa-exclamation-circle mr-2"></i>„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü</span>';
            };
            
            reader.readAsText(file);
        }

        // „É≠„Éº„Ç´„É´CSV„Éï„Ç°„Ç§„É´„ÇíËá™ÂãïÁöÑ„Å´Ë™≠„ÅøËæº„ÇÄÔºà„Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇÔºâ
        async function loadLocalCSV() {
            try {
                // suno.csv„Å®suno-2.csv„ÇíË™≠„ÅøËæº„ÇÄË©¶„Åø
                const csvFiles = ['suno.csv', 'suno-2.csv'];
                
                for (const fileName of csvFiles) {
                    try {
                        const response = await fetch(fileName);
                        if (response.ok) {
                            const content = await response.text();
                            const lines = content.split('\n').filter(line => line.trim());
                            
                            lines.forEach(line => {
                                const artistName = line.trim();
                                if (artistName && !artists.find(a => a.name === artistName)) {
                                    artists.push({
                                        name: artistName,
                                        style: artistStyles[artistName] || getDefaultStyle(artistName)
                                    });
                                }
                            });
                        }
                    } catch (err) {
                        console.log(`${fileName}„ÅÆË™≠„ÅøËæº„Åø„Çí„Çπ„Ç≠„ÉÉ„Éó:`, err);
                    }
                }
                
                // „Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàË°®Á§∫„ÇíÊõ¥Êñ∞
                const container = document.getElementById('artists-container');
                if (container) {
                    container.innerHTML = '';
                    initializeArtists();
                    updateCounts();
                }
            } catch (error) {
                console.log('„É≠„Éº„Ç´„É´CSV„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
            }
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´ÂÆüË°å
        window.addEventListener('DOMContentLoaded', function() {
            loadLocalCSV();
        });

        // ===== AIÊ≠åË©ûÁîüÊàêÊ©üËÉΩÔºàlyrics.html„Åã„ÇâÁµ±ÂêàÔºâ =====
        
        // DOMË¶ÅÁ¥†„ÅÆÂèñÂæó
        const generateAIBtn = document.getElementById('generateAIBtn');
        const processPanel = document.getElementById('processPanel');
        const resultPanel = document.getElementById('resultPanel');
        const improvementPanel = document.getElementById('improvementPanel');
        const lyricsOutput = document.getElementById('lyricsOutput');
        const emotionResult = document.getElementById('emotionResult');

        // AIÊ≠åË©ûÁîüÊàê„Éú„Çø„É≥„ÅÆ„ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà
        if (generateAIBtn) {
            generateAIBtn.addEventListener('click', async function() {
                // „Éú„Çø„É≥„ÇíÁÑ°ÂäπÂåñ
                generateAIBtn.disabled = true;
                generateAIBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>ÁîüÊàê‰∏≠...';

                // ÂÖ•ÂäõÂÄ§„ÅÆÂèñÂæó
                const settings = {
                    emotion: document.getElementById('primaryEmotion').value,
                    intensity: document.getElementById('emotionIntensity').value,
                    theme: document.getElementById('ai-theme').value,
                    genre: document.getElementById('ai-genre').value,
                    tempo: document.getElementById('tempo').value,
                    rhymePattern: document.getElementById('rhymePattern').value,
                    structure: document.getElementById('ai-structure').value,
                    lineCount: document.getElementById('lineCount').value,
                    style: document.getElementById('ai-style').value,
                    inspiration: document.getElementById('inspiration').value,
                    avoidance: document.getElementById('avoidance').value
                };

                // „Éó„É≠„Çª„Çπ„Éë„Éç„É´„ÇíË°®Á§∫
                processPanel.classList.remove('hidden');
                resultPanel.classList.add('hidden');
                improvementPanel.classList.add('hidden');

                // ÊÑüÊÉÖÂàÜÊûê„ÅÆÂÆüË°å
                await simulateEmotionAnalysis(settings);

                // Ê≠åË©ûÁîüÊàê„ÅÆÂÆüË°å
                await generateAILyrics(settings);

                // ÁµêÊûú„Éë„Éç„É´„ÇíË°®Á§∫
                resultPanel.classList.remove('hidden');
                improvementPanel.classList.remove('hidden');

                // „Éú„Çø„É≥„ÇíÊúâÂäπÂåñ
                generateAIBtn.disabled = false;
                generateAIBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>AIÊ≠åË©û„ÇíÁîüÊàê„Åô„Çã';
            });
        }

        // ÊÑüÊÉÖÂàÜÊûê„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
        async function simulateEmotionAnalysis(settings) {
            const emotionLabels = {
                'joy': 'Âñú„Å≥',
                'sadness': 'ÊÇ≤„Åó„Åø',
                'love': 'ÊÑõ',
                'nostalgia': 'ÈÉ∑ÊÑÅ',
                'hope': 'Â∏åÊúõ',
                'anger': 'ÊÄí„Çä',
                'fear': 'ÊÅê„Çå'
            };

            if (emotionResult) {
                emotionResult.textContent = emotionLabels[settings.emotion];
            }

            // ÊÑüÊÉÖ„ÉÅ„É£„Éº„Éà„ÅÆ‰ΩúÊàê
            const ctx = document.getElementById('emotionChart');
            if (ctx) {
                emotionChart = new Chart(ctx.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['Âñú„Å≥', 'ÊÇ≤„Åó„Åø', 'ÊÑõ', 'Â∏åÊúõ', 'ÊÄí„Çä', 'ÊÅê„Çå'],
                        datasets: [{
                            label: 'ÊÑüÊÉÖÂº∑Â∫¶',
                            data: generateEmotionData(settings.emotion, settings.intensity),
                            borderColor: 'rgba(79, 70, 229, 1)',
                            backgroundColor: 'rgba(79, 70, 229, 0.1)',
                            pointBackgroundColor: 'rgba(79, 70, 229, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(79, 70, 229, 1)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10
                            }
                        }
                    }
                });
            }

            // Ë®ÄË™ûÂàÜÊûê„ÉÅ„É£„Éº„Éà„ÅÆ‰ΩúÊàê
            const ctx2 = document.getElementById('linguisticChart');
            if (ctx2) {
                linguisticChart = new Chart(ctx2.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Ë™ûÂΩôË±äÂØåÂ∫¶', 'ÈüªÂæãÈÅ©ÂêàÂ∫¶', 'Èü≥Ê•ΩÁöÑË™øÂíå', 'Áã¨ÂâµÊÄß', 'ÊÑüÊÉÖË°®Áèæ'],
                        datasets: [{
                            label: 'Ë©ï‰æ°„Çπ„Ç≥„Ç¢',
                            data: [85, 92, 88, 76, 94],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(139, 92, 246, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderColor: [
                                'rgba(34, 197, 94, 1)',
                                'rgba(59, 130, 246, 1)',
                                'rgba(139, 92, 246, 1)',
                                'rgba(245, 158, 11, 1)',
                                'rgba(239, 68, 68, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            // 2ÁßíÂæÖÊ©üÔºàÂàÜÊûêÊôÇÈñì„Çí„Ç∑„Éü„É•„É¨„Éº„ÉàÔºâ
            await new Promise(resolve => setTimeout(resolve, 2000));
        }

        // AIÊ≠åË©ûÁîüÊàê
        async function generateAILyrics(settings) {
            // „Çµ„É≥„Éó„É´Ê≠åË©û„Åã„ÇâÈÅ∏Êäû
            let lyrics = sampleLyrics[settings.emotion] || sampleLyrics['joy'];

            // Ë®≠ÂÆö„Å´Âøú„Åò„Å¶Ê≠åË©û„ÇíË™øÊï¥
            if (settings.theme) {
                lyrics = `„Äê„ÉÜ„Éº„Éû: ${settings.theme}„Äë\n\n` + lyrics;
            }

            // „Çø„Ç§„Éî„É≥„Ç∞ÂäπÊûú„ÅßÊ≠åË©û„ÇíË°®Á§∫
            if (lyricsOutput) {
                await typeText(lyricsOutput, lyrics);
            }

            // ÂìÅË≥™„ÉÅ„É£„Éº„Éà„ÅÆ‰ΩúÊàê
            const ctx3 = document.getElementById('qualityChart');
            if (ctx3) {
                qualityChart = new Chart(ctx3.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['ÊÑüÊÉÖÁöÑ„Ç§„É≥„Éë„ÇØ„Éà', 'Ë®ÄË™ûÁöÑÁæé„Åó„Åï', 'Èü≥Ê•ΩÁöÑÈÅ©ÂêàÊÄß', 'Áã¨ÂâµÊÄß'],
                        datasets: [{
                            data: [84, 92, 88, 76],
                            backgroundColor: [
                                'rgba(239, 68, 68, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(245, 158, 11, 0.8)'
                            ],
                            borderColor: [
                                'rgba(239, 68, 68, 1)',
                                'rgba(34, 197, 94, 1)',
                                'rgba(59, 130, 246, 1)',
                                'rgba(245, 158, 11, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        // ÊÑüÊÉÖ„Éá„Éº„ÇøÁîüÊàê
        function generateEmotionData(primaryEmotion, intensity) {
            const base = [3, 3, 3, 3, 3, 3];
            const emotionMap = {
                'joy': 0,
                'sadness': 1,
                'love': 2,
                'hope': 3,
                'anger': 4,
                'fear': 5,
                'nostalgia': 1
            };

            const index = emotionMap[primaryEmotion] || 0;
            base[index] = parseInt(intensity);

            // Èñ¢ÈÄ£„Åô„ÇãÊÑüÊÉÖ„ÇÇÂ∞ë„Åó‰∏ä„Åí„Çã
            if (primaryEmotion === 'love') {
                base[0] = Math.max(base[0], 5); // Âñú„Å≥
                base[3] = Math.max(base[3], 4); // Â∏åÊúõ
            } else if (primaryEmotion === 'nostalgia') {
                base[0] = Math.max(base[0], 4); // Âñú„Å≥
                base[1] = Math.max(base[1], 6); // ÊÇ≤„Åó„Åø
            }

            return base;
        }

        // „Çø„Ç§„Éî„É≥„Ç∞ÂäπÊûú
        async function typeText(element, text) {
            element.textContent = '';
            element.classList.add('typing-animation');

            for (let i = 0; i < text.length; i++) {
                element.textContent += text[i];
                await new Promise(resolve => setTimeout(resolve, 50));
            }

            element.classList.remove('typing-animation');
        }

        // ÂÜçÁîüÊàê„Éú„Çø„É≥
        const regenerateBtn = document.getElementById('regenerateBtn');
        if (regenerateBtn) {
            regenerateBtn.addEventListener('click', function() {
                if (generateAIBtn) generateAIBtn.click();
            });
        }

        // ÊîπËâØ„Éú„Çø„É≥
        const refineBtn = document.getElementById('refineBtn');
        if (refineBtn) {
            refineBtn.addEventListener('click', function() {
                alert('ÊîπËâØÊ©üËÉΩ„ÅØÈñãÁô∫‰∏≠„Åß„Åô„ÄÇ„Çà„ÇäÈ´òÂ∫¶„Å™AIÊäÄË°ì„ÇíÁµÑ„ÅøËæº„ÇÄ‰∫àÂÆö„Åß„Åô„ÄÇ');
            });
        }

        // „Ç®„ÇØ„Çπ„Éù„Éº„Éà„Éú„Çø„É≥
        const exportBtn = document.getElementById('exportBtn');
        if (exportBtn) {
            exportBtn.addEventListener('click', function() {
                const lyrics = lyricsOutput ? lyricsOutput.textContent : '';
                const blob = new Blob([lyrics], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'generated_lyrics.txt';
                a.click();
                URL.revokeObjectURL(url);
            });
        }

        // ÊÑüÊÉÖÂº∑Â∫¶„Çπ„É©„Ç§„ÉÄ„Éº„ÅÆÂ§âÊõ¥„Ç§„Éô„É≥„Éà
        const emotionIntensitySlider = document.getElementById('emotionIntensity');
        if (emotionIntensitySlider) {
            emotionIntensitySlider.addEventListener('input', function() {
                const value = this.value;
                const meter = document.querySelector('.emotion-meter');
                if (meter) {
                    const percentage = (value / 10) * 100;
                    meter.style.background = `linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #3b82f6 75%, #8b5cf6 100%)`;
                    meter.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
                }
            });
            
            // ÂàùÊúüÂåñ
            emotionIntensitySlider.dispatchEvent(new Event('input'));
        }

        // „É¢„Éº„ÉâÂàá„ÇäÊõø„Åà„ÇíÊõ¥Êñ∞
        function setMode(mode) {
            // „É¢„Éº„Éâ„Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            
            // „Åô„Åπ„Å¶„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫
            document.getElementById('prompt-creation-section').style.display = 'none';
            const proSection = document.getElementById('pro-lyrics-creation-section');
            if (proSection) proSection.style.display = 'none';
            
            if (mode === 'prompt') {
                document.getElementById('prompt-mode-btn').classList.add('active');
                document.getElementById('prompt-creation-section').style.display = 'block';
                // ÂàùÊúüË°®Á§∫Ôºö„Éú„Éº„Ç´„É´„Çø„Ç∞„ÇíË°®Á§∫
                document.getElementById('vocal-section').style.display = 'block';
                document.getElementById('moods-section').style.display = 'none';
                document.getElementById('genres-section').style.display = 'none';
                document.getElementById('artists-section').style.display = 'none';
            } else if (mode === 'pro-lyrics') {
                document.getElementById('pro-lyrics-mode-btn').classList.add('active');
                if (proSection) proSection.style.display = 'block';
                // „Éó„É≠„É≥„Éó„Éà„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫
                const promptSection = document.getElementById('prompt-section');
                if (promptSection) {
                    promptSection.style.display = 'none';
                }
            }
        }

        // ===== ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É†Ê©üËÉΩ =====
        
        // ProÊ≠åË©ûÁîüÊàêÊ©üËÉΩ
        async function generateProLyrics() {
            // Ë™çË®º„ÉÅ„Çß„ÉÉ„ÇØÔºà„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ‰ªò„ÅçÔºâ
            if (!authCheckComplete) {
                console.log('Ë™çË®º„Ç∑„Çπ„ÉÜ„É†„ÅÆÂàùÊúüÂåñ‰∏≠„Åß„Åô„ÄÇ');
                if (!supabaseClient) {
                    console.log('Ë™çË®º„Å™„Åó„É¢„Éº„Éâ„ÅßÁ∂öË°å');
                } else {
                    return;
                }
            }
            
            // ‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØÔºà‰∏ÄÊôÇÁöÑ„Å´ÂÆåÂÖ®ÁÑ°ÂäπÂåñÔºâ
            console.log('Ê≠åË©û‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ„Çí„Çπ„Ç≠„ÉÉ„Éó - Âà∂Èôê„Å™„Åó„ÅßÂãï‰Ωú');
            /*
            try {
                const canGenerate = await checkLyricGenerationLimit();
                if (!canGenerate) {
                    showUsageLimitModal('lyrics');
                    return;
                }
            } catch (error) {
                console.log('‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ„Ç®„É©„Éº„ÄÅÂà∂Èôê„Å™„Åó„ÅßÁ∂öË°å:', error);
            }
            */
            
            const output = document.getElementById('proLyricsOutput');
            const evaluation = document.getElementById('proLyricsEvaluation');
            
            // „Éë„É©„É°„Éº„Çø„ÇíÂèñÂæó
            const params = getProLyricsParameters();
            
            // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
            output.innerHTML = `
                <div class="text-center">
                    <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"></div>
                    <p class="text-lg text-gray-600">Pro AI „ÅåÈ´òÂ∫¶„Å™Ê≠åË©û„ÇíÁîüÊàê‰∏≠...</p>
                    <p class="text-sm text-gray-500 mt-2">„ÉÜ„Éº„Éû: ${params.theme} | „Ç∏„É£„É≥„É´: ${params.genre} | ÊÑüÊÉÖ: ${params.emotion}</p>
                </div>
            `;
            
            // 3ÁßíÂæå„Å´ÁîüÊàêÁµêÊûú„ÇíË°®Á§∫
            setTimeout(async () => {
                const generatedLyrics = generateLyricsBasedOnParameters(params);
                output.innerHTML = generatedLyrics;
                
                evaluation.classList.remove('hidden');
                
                // „Éë„É©„É°„Éº„Çø„Å´Âü∫„Å•„ÅÑ„Å¶„Çπ„Ç≥„Ç¢„ÇíË®àÁÆó
                const scores = calculateProScores(params);
                animateProScore('proEmotionScore', scores.emotion);
                animateProScore('proLanguageScore', scores.language);
                animateProScore('proOriginalityScore', scores.originality);
                animateProScore('proMusicalScore', scores.musical);
                
                // ‰ΩøÁî®ÂõûÊï∞„ÇíÂ¢ó„ÇÑ„Åô
                try {
                    await incrementUsageCount('lyrics');
                } catch (error) {
                    console.log('‰ΩøÁî®ÂõûÊï∞Êõ¥Êñ∞„Ç®„É©„Éº:', error);
                }
            }, 3000);
        }
        
        // ProÊ≠åË©û„Éë„É©„É°„Éº„Çø„ÇíÂèñÂæó„Åô„ÇãÈñ¢Êï∞
        function getProLyricsParameters() {
            // ÂÆâÂÖ®„Å´DOMË¶ÅÁ¥†„ÇíÂèñÂæó„Åô„ÇãÈñ¢Êï∞
            function safeGetValue(id, defaultValue) {
                const element = document.getElementById(id);
                return element ? element.value : defaultValue;
            }
            
            function safeGetChecked(id, defaultValue) {
                const element = document.getElementById(id);
                return element ? element.checked : defaultValue;
            }
            
            return {
                theme: safeGetValue('pro-theme', 'Â∏åÊúõ'),
                genre: safeGetValue('pro-genre', '„Éù„ÉÉ„Éó„Çπ'),
                targetAge: safeGetValue('pro-age', 'ÂÖ®Âπ¥ÈΩ¢'),
                emotion: safeGetValue('pro-emotion', 'Âñú„Å≥'),
                emotionIntensity: safeGetValue('pro-emotion-intensity', 5),
                emotionPattern: safeGetValue('pro-emotion-change', '‰∏ÄÂÆö'),
                languageLevel: safeGetValue('pro-language-level', 'Êó•Â∏∏Ë™û'),
                metaphorUsage: safeGetValue('pro-metaphor', 6),
                rhymePattern: safeGetValue('pro-rhythm', 'Ëá™ÁÑ∂„Å™ÊµÅ„Çå'),
                keywords: safeGetValue('pro-keywords', ''),
                avoidWords: safeGetValue('pro-avoid', ''),
                // ÊßãÊàê„ÅØÂõ∫ÂÆöÂÄ§„ÅßË®≠ÂÆöÔºàHTML„Å´ÂÖ•Âäõ„Éï„Ç£„Éº„É´„Éâ„Åå„Å™„ÅÑ„Åü„ÇÅÔºâ
                verseCount: 2,
                chorusCount: 2,
                bridgeInclude: true,
                introInclude: true,
                outroInclude: true
            };
        }
        
        // „Éë„É©„É°„Éº„Çø„Å´Âü∫„Å•„ÅÑ„Å¶Ê≠åË©û„ÇíÁîüÊàê„Åô„ÇãÈñ¢Êï∞
        function generateLyricsBasedOnParameters(params) {
            // Â§öË®ÄË™ûÂØæÂøú„ÅÆ„ÉÜ„Éº„ÉûÂà•Ê≠åË©û„ÉÜ„É≥„Éó„É¨„Éº„Éà
            const themeTemplates = {
                'cantonese': {
                    'Â∏åÊúõ': {
                        keywords: ['Â§¢ÊÉ≥', 'Êú™‰æÜ', 'ÂÖâÊòé', 'ÂâçÈÄ≤', 'Áõ∏‰ø°', 'ÊåëÊà∞', 'ÊàêÈï∑'],
                        imagery: ['ÊúùÈôΩ', 'Êñ∞Á∂†', 'ËóçÂ§©', 'È¢®', 'ÈÅìË∑Ø', 'ÈñÄ', 'ÁøÖËÜÄ']
                    },
                    'ÊÅãÊÑõ': {
                        keywords: ['ÊÑõÊÉÖ', 'ÂøÉÈùà', 'ÊÄùÂøµ', '‰Ω†', 'Ê∞∏ÊÅÜ', 'ÊâøË´æ', 'ÊÉÖÁ∑£'],
                        imagery: ['ÊòüÁ©∫', 'Êúà‰∫Æ', 'Ëä±Êúµ', 'Êµ∑Ê¥ã', 'Êâã', 'ÁúºÁùõ', 'ÂæÆÁ¨ë']
                    },
                    'ÂèãÊÉÖ': {
                        keywords: ['ÊúãÂèã', '‰ø°‰ªª', 'ÊîØÊåÅ', '‰∏ÄËµ∑', 'Ê≠°Á¨ë', 'ÂõûÊÜ∂', 'ÂèãË™º'],
                        imagery: ['Â§ïÈôΩ', 'Â≠∏Ê†°', 'ÂÖ¨Âúí', 'Ê©ãÊ®ë', 'ÈÅìË∑Ø', 'Â§©Á©∫', 'ÂΩ©Ëôπ']
                    },
                    'ÊàêÈï∑': {
                        keywords: ['ËÆäÂåñ', 'Â≠∏Áøí', 'Â†ÖÂº∑', 'ÂÖãÊúç', 'ÁôºÁèæ', 'ÈÄ≤Ê≠•', 'ÊàêÁÜü'],
                        imagery: ['Â±±Â≥∞', 'Ê≤≥ÊµÅ', 'Ê£ÆÊûó', 'Â≠£ÁØÄ', 'Èõ®Ê∞¥', 'Â§™ÈôΩ', 'Â§ßÂú∞']
                    },
                    'ÊïÖÈÉ∑': {
                        keywords: ['Êá∑Âøµ', 'ÂõûÂÆ∂', 'ÂÆ∂‰∫∫', 'Ë®òÊÜ∂', 'Ê∫´Êöñ', 'ÂÆâÂØß', 'Ê†πÊ∫ê'],
                        imagery: ['ÈÑâÊùë', 'ÊØçË¶™', 'ÂÆ∂', 'ÁØÄÊÖ∂', 'È¶ôÂë≥', 'ËÅ≤Èü≥', 'È¢®ÊôØ']
                    }
                },
                'chinese': {
                    'Â∏åÊúõ': {
                        keywords: ['Ê¢¶ÊÉ≥', 'Êú™Êù•', 'ÂÖâÊòé', 'ÂâçËøõ', 'Áõ∏‰ø°', 'ÊåëÊàò', 'ÊàêÈïø'],
                        imagery: ['ÊúùÈò≥', 'Êñ∞Áªø', 'ËìùÂ§©', 'È£é', 'ÈÅìË∑Ø', 'Èó®', 'ÁøÖËÜÄ']
                    },
                    'ÊÅãÊÑõ': {
                        keywords: ['Áà±ÊÉÖ', 'ÂøÉÁÅµ', 'ÊÄùÂøµ', '‰Ω†', 'Ê∞∏ÊÅí', 'ÊâøËØ∫', 'ÊÉÖÁºò'],
                        imagery: ['ÊòüÁ©∫', 'Êúà‰∫Æ', 'Ëä±Êúµ', 'Êµ∑Ê¥ã', 'Êâã', 'ÁúºÁùõ', 'ÂæÆÁ¨ë']
                    },
                    'ÂèãÊÉÖ': {
                        keywords: ['ÊúãÂèã', '‰ø°‰ªª', 'ÊîØÊåÅ', '‰∏ÄËµ∑', 'Ê¨¢Á¨ë', 'ÂõûÂøÜ', 'ÂèãË∞ä'],
                        imagery: ['Â§ïÈò≥', 'Â≠¶Ê†°', 'ÂÖ¨Âõ≠', 'Ê°•Ê¢Å', 'ÈÅìË∑Ø', 'Â§©Á©∫', 'ÂΩ©Ëôπ']
                    },
                    'ÊàêÈï∑': {
                        keywords: ['ÂèòÂåñ', 'Â≠¶‰π†', 'ÂùöÂº∫', 'ÂÖãÊúç', 'ÂèëÁé∞', 'ËøõÊ≠•', 'ÊàêÁÜü'],
                        imagery: ['Â±±Â≥∞', 'Ê≤≥ÊµÅ', 'Ê£ÆÊûó', 'Â≠£ËäÇ', 'Èõ®Ê∞¥', 'Â§™Èò≥', 'Â§ßÂú∞']
                    },
                    'ÊïÖÈÉ∑': {
                        keywords: ['ÊÄÄÂøµ', 'ÂõûÂÆ∂', 'ÂÆ∂‰∫∫', 'ËÆ∞ÂøÜ', 'Ê∏©Êöñ', 'ÂÆâÂÆÅ', 'Ê†πÊ∫ê'],
                        imagery: ['‰π°Êùë', 'ÊØç‰∫≤', 'ÂÆ∂', 'ËäÇÂ∫Ü', 'È¶ôÂë≥', 'Â£∞Èü≥', 'È£éÊôØ']
                    }
                },
                'japanese': {
                    'Â∏åÊúõ': {
                        keywords: ['Â§¢', 'Êú™Êù•', 'ÂÖâ', 'Ê≠©„ÇÄ', '‰ø°„Åò„Çã', 'ÊåëÊà¶', 'ÊàêÈï∑'],
                        imagery: ['ÊúùÊó•', 'Êñ∞Á∑ë', 'ÈùíÁ©∫', 'È¢®', 'ÈÅì', 'Êââ', 'Áøº']
                    },
                    'ÊÅãÊÑõ': {
                        keywords: ['ÊÑõ', 'ÂøÉ', 'ÊÉ≥„ÅÑ', 'Âêõ', 'Ê∞∏ÈÅ†', 'Á¥ÑÊùü', 'ÁµÜ'],
                        imagery: ['ÊòüÁ©∫', 'Êúà', 'Ëä±', 'Êµ∑', 'Êâã', 'Áû≥', 'ÂæÆÁ¨ë„Åø']
                    },
                    'ÂèãÊÉÖ': {
                        keywords: ['‰ª≤Èñì', '‰ø°È†º', 'ÊîØ„Åà', 'ÂÖ±„Å´', 'Á¨ëÈ°î', 'ÊÄù„ÅÑÂá∫', 'ÁµÜ'],
                        imagery: ['Â§ïÊó•', 'Â≠¶Ê†°', 'ÂÖ¨Âúí', 'Ê©ã', 'ÈÅì', 'Á©∫', 'Ëôπ']
                    },
                    'ÊàêÈï∑': {
                        keywords: ['Â§âÂåñ', 'Â≠¶„Å≥', 'Âº∑„Åï', '‰πó„ÇäË∂ä„Åà„Çã', 'Áô∫Ë¶ã', 'ÈÄ≤Ê≠©', 'ÊàêÁÜü'],
                        imagery: ['Â±±', 'Â∑ù', 'Ê£Æ', 'Â≠£ÁØÄ', 'Èõ®', 'Â§™ÈôΩ', 'Â§ßÂú∞']
                    },
                    'ÊïÖÈÉ∑': {
                        keywords: ['Êáê„Åã„Åó„ÅÑ', 'Â∏∞„Çã', 'ÂÆ∂Êóè', 'Ë®òÊÜ∂', 'Ê∏©„Åã„ÅÑ', 'ÂÆâ„Çâ„Åé', 'ÂéüÁÇπ'],
                        imagery: ['Áî∞Ëàé', 'ÊØç', 'ÂÆ∂', 'Á•≠„Çä', 'ÂåÇ„ÅÑ', 'Â£∞', 'ÊôØËâ≤']
                    }
                },
                'english': {
                    'Â∏åÊúõ': {
                        keywords: ['dream', 'future', 'light', 'walk', 'believe', 'challenge', 'growth'],
                        imagery: ['sunrise', 'green', 'blue sky', 'wind', 'path', 'door', 'wings']
                    },
                    'ÊÅãÊÑõ': {
                        keywords: ['love', 'heart', 'feelings', 'you', 'forever', 'promise', 'bond'],
                        imagery: ['starry sky', 'moon', 'flowers', 'ocean', 'hands', 'eyes', 'smile']
                    },
                    'ÂèãÊÉÖ': {
                        keywords: ['friends', 'trust', 'support', 'together', 'laughter', 'memories', 'friendship'],
                        imagery: ['sunset', 'school', 'park', 'bridge', 'road', 'sky', 'rainbow']
                    },
                    'ÊàêÈï∑': {
                        keywords: ['change', 'learn', 'strength', 'overcome', 'discover', 'progress', 'mature'],
                        imagery: ['mountain', 'river', 'forest', 'seasons', 'rain', 'sun', 'earth']
                    },
                    'ÊïÖÈÉ∑': {
                        keywords: ['nostalgic', 'return', 'family', 'memory', 'warm', 'peace', 'origin'],
                        imagery: ['countryside', 'mother', 'home', 'festival', 'scent', 'voice', 'scenery']
                    }
                }
            };
            
            // Â§öË®ÄË™ûÂØæÂøú„ÅÆ„Ç∏„É£„É≥„É´Âà•„Çπ„Çø„Ç§„É´Ë™øÊï¥
            const genreStyles = {
                'cantonese': {
                    '„Éù„ÉÉ„Éó„Çπ': { rhythm: 'ËºïÂø´', language: 'Èö®ÊÑè' },
                    '„É≠„ÉÉ„ÇØ': { rhythm: 'Âº∑ÂãÅ', language: 'ÁÜ±ÊÉÖ' },
                    '„Éê„É©„Éº„Éâ': { rhythm: 'Á∑©ÊÖ¢', language: 'ÊÑüÊÄß' },
                    '„Éï„Ç©„Éº„ÇØ': { rhythm: 'Ëá™ÁÑ∂', language: 'Ê®∏Á¥†' },
                    '„Ç∏„É£„Ç∫': { rhythm: 'ÊêñÊì∫', language: 'Á≤æÁ∑ª' }
                },
                'chinese': {
                    '„Éù„ÉÉ„Éó„Çπ': { rhythm: 'ËΩªÂø´', language: 'ÈöèÊÑè' },
                    '„É≠„ÉÉ„ÇØ': { rhythm: 'Âº∫Âä≤', language: 'ÁÉ≠ÊÉÖ' },
                    '„Éê„É©„Éº„Éâ': { rhythm: 'ÁºìÊÖ¢', language: 'ÊÑüÊÄß' },
                    '„Éï„Ç©„Éº„ÇØ': { rhythm: 'Ëá™ÁÑ∂', language: 'Êú¥Á¥†' },
                    '„Ç∏„É£„Ç∫': { rhythm: 'ÊëáÊëÜ', language: 'Á≤æËá¥' }
                },
                'japanese': {
                    '„Éù„ÉÉ„Éó„Çπ': { rhythm: 'ËªΩÂø´', language: '„Ç´„Ç∏„É•„Ç¢„É´' },
                    '„É≠„ÉÉ„ÇØ': { rhythm: 'ÂäõÂº∑„ÅÑ', language: 'ÊÉÖÁÜ±ÁöÑ' },
                    '„Éê„É©„Éº„Éâ': { rhythm: '„ÇÜ„Å£„Åü„Çä', language: 'ÊÑüÊÉÖÁöÑ' },
                    '„Éï„Ç©„Éº„ÇØ': { rhythm: 'Ëá™ÁÑ∂‰Ωì', language: 'Á¥†Êú¥' },
                    '„Ç∏„É£„Ç∫': { rhythm: '„Çπ„Ç¶„Ç£„É≥„Ç∞', language: 'Ê¥óÁ∑¥' }
                },
                'english': {
                    '„Éù„ÉÉ„Éó„Çπ': { rhythm: 'upbeat', language: 'casual' },
                    '„É≠„ÉÉ„ÇØ': { rhythm: 'powerful', language: 'passionate' },
                    '„Éê„É©„Éº„Éâ': { rhythm: 'slow', language: 'emotional' },
                    '„Éï„Ç©„Éº„ÇØ': { rhythm: 'natural', language: 'simple' },
                    '„Ç∏„É£„Ç∫': { rhythm: 'swing', language: 'sophisticated' }
                }
            };
            
            // Â§öË®ÄË™ûÂØæÂøú„ÅÆÊÑüÊÉÖÂà•Ë°®ÁèæË™øÊï¥
            const emotionExpressions = {
                'cantonese': {
                    'Âñú„Å≥': ['ÈñÉ‰∫Æ', 'Ë∑≥Ë∫ç', 'ËàûËπà', 'Ê≠åÂî±', 'Ê≠°Á¨ë'],
                    'ÊÇ≤„Åó„Åø': ['ÁúºÊ∑ö', 'Èõ®Ê∞¥', 'Èô∞ÂΩ±', 'ÂØÇÈùú', 'Èõ¢Âà•'],
                    'ÊÄí„Çä': ['ÁáÉÁáí', 'ÂëêÂñä', 'È¢®Êö¥', 'Èõ∑Èõª', 'Êà∞È¨•'],
                    'Âπ≥Âíå': ['Âπ≥Èùú', 'ÂÆâÈùú', 'Ê∫´Êüî', 'ÊìÅÊä±', 'Ê≤ªÁôí'],
                    'ËààÂ•Æ': ['Â•îË∑ë', 'È£õÁøî', 'ÁàÜÁôº', 'ÁÜ±ÁÉà', 'Ë∫çÂãï']
                },
                'chinese': {
                    'Âñú„Å≥': ['Èó™‰∫Æ', 'Ë∑≥Ë∑É', 'ËàûËπà', 'Ê≠åÂî±', 'Ê¨¢Á¨ë'],
                    'ÊÇ≤„Åó„Åø': ['ÁúºÊ≥™', 'Èõ®Ê∞¥', 'Èò¥ÂΩ±', 'ÂØÇÈùô', 'Á¶ªÂà´'],
                    'ÊÄí„Çä': ['ÁáÉÁÉß', 'ÂëêÂñä', 'È£éÊö¥', 'Èõ∑Áîµ', 'ÊàòÊñó'],
                    'Âπ≥Âíå': ['Âπ≥Èùô', 'ÂÆâÈùô', 'Ê∏©Êüî', 'Êã•Êä±', 'Ê≤ªÊÑà'],
                    'ËààÂ•Æ': ['Â•îË∑ë', 'È£ûÁøî', 'ÁàÜÂèë', 'ÁÉ≠ÁÉà', 'Ë∑ÉÂä®']
                },
                'japanese': {
                    'Âñú„Å≥': ['Ëºù„Åè', 'Âºæ„ÇÄ', 'Ë∏ä„Çã', 'Ê≠å„ÅÜ', 'Á¨ë„ÅÜ'],
                    'ÊÇ≤„Åó„Åø': ['Ê∂ô', 'Èõ®', 'ÂΩ±', 'ÈùôÂØÇ', 'Âà•„Çå'],
                    'ÊÄí„Çä': ['ÁáÉ„Åà„Çã', 'Âè´„Å∂', 'Âµê', 'Èõ∑', 'Êà¶„ÅÜ'],
                    'Âπ≥Âíå': ['Á©è„ÇÑ„Åã', 'Èùô„Åã', 'ÂÑ™„Åó„ÅÑ', 'ÂåÖ„ÇÄ', 'Áôí„Åô'],
                    'ËààÂ•Æ': ['ÈßÜ„Åë„Çã', 'È£õ„Å∂', 'ÁàÜÁô∫', 'ÁÜ±„ÅÑ', 'Ë∫çÂãï']
                },
                'english': {
                    'Âñú„Å≥': ['shine', 'bounce', 'dance', 'sing', 'laugh'],
                    'ÊÇ≤„Åó„Åø': ['tears', 'rain', 'shadow', 'silence', 'farewell'],
                    'ÊÄí„Çä': ['burn', 'shout', 'storm', 'thunder', 'fight'],
                    'Âπ≥Âíå': ['calm', 'quiet', 'gentle', 'embrace', 'heal'],
                    'ËààÂ•Æ': ['run', 'fly', 'explode', 'hot', 'dynamic']
                }
            };
            
            // ÈÅ∏Êäû„Åï„Çå„ÅüË®ÄË™û„Å´Âü∫„Å•„ÅÑ„Å¶„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÇíÂèñÂæó
            const langTemplates = themeTemplates[selectedPromptLanguage] || themeTemplates['japanese'];
            const template = langTemplates[params.theme] || langTemplates['Â∏åÊúõ'];
            const langGenreStyles = genreStyles[selectedPromptLanguage] || genreStyles['japanese'];
            const style = langGenreStyles[params.genre] || langGenreStyles['„Éù„ÉÉ„Éó„Çπ'];
            const langEmotionExpressions = emotionExpressions[selectedPromptLanguage] || emotionExpressions['japanese'];
            const expressions = langEmotionExpressions[params.emotion] || langEmotionExpressions['Âñú„Å≥'];
            
            // ÊßãÊàê„ÇíÊ±∫ÂÆö
            let structure = [];
            if (params.introInclude) structure.push('Intro');
            for (let i = 1; i <= params.verseCount; i++) {
                structure.push(`Verse ${i}`);
                if (i <= params.chorusCount) structure.push('Chorus');
            }
            if (params.bridgeInclude) structure.push('Bridge');
            if (params.chorusCount > 0) structure.push('Final Chorus');
            if (params.outroInclude) structure.push('Outro');
            
            // Â§öË®ÄË™ûÂØæÂøú„ÅÆË°®Á§∫„ÉÜ„Ç≠„Çπ„Éà
            const displayTexts = {
                'cantonese': {
                    title: 'ÁîüÊàêÂòÖProÊ≠åË©û',
                    theme: '‰∏ªÈ°å',
                    genre: 'È°ûÂûã',
                    emotion: 'ÊÉÖÊÑü',
                    intensity: 'Âº∑Â∫¶',
                    languageLevel: 'Ë™ûË®ÄÁ®ãÂ∫¶',
                    rhythm: 'ÈüªÂæã',
                    metaphor: 'ÊØîÂñª‰ΩøÁî®'
                },
                'chinese': {
                    title: 'ÁîüÊàêÁöÑProÊ≠åËØç',
                    theme: '‰∏ªÈ¢ò',
                    genre: 'Á±ªÂûã',
                    emotion: 'ÊÉÖÊÑü',
                    intensity: 'Âº∫Â∫¶',
                    languageLevel: 'ËØ≠Ë®ÄÁ®ãÂ∫¶',
                    rhythm: 'ÈüµÂæã',
                    metaphor: 'ÊØîÂñª‰ΩøÁî®'
                },
                'japanese': {
                    title: 'ÁîüÊàê„Åï„Çå„ÅüProÊ≠åË©û',
                    theme: '„ÉÜ„Éº„Éû',
                    genre: '„Ç∏„É£„É≥„É´',
                    emotion: 'ÊÑüÊÉÖ',
                    intensity: 'Âº∑Â∫¶',
                    languageLevel: 'Ë®ÄË™û„É¨„Éô„É´',
                    rhythm: 'ÈüªÂæã',
                    metaphor: 'ÊØîÂñ©‰ΩøÁî®'
                },
                'english': {
                    title: 'Generated Pro Lyrics',
                    theme: 'Theme',
                    genre: 'Genre',
                    emotion: 'Emotion',
                    intensity: 'Intensity',
                    languageLevel: 'Language Level',
                    rhythm: 'Rhythm',
                    metaphor: 'Metaphor Usage'
                }
            };
            
            const currentTexts = displayTexts[selectedPromptLanguage] || displayTexts['japanese'];
            
            // Ê≠åË©ûÁîüÊàê
            let lyricsHTML = `
                <div class="space-y-8">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">${currentTexts.title}</h3>
                        <p class="text-gray-600">${currentTexts.theme}: ${params.theme} | ${currentTexts.genre}: ${params.genre} | ${currentTexts.emotion}: ${params.emotion} (${currentTexts.intensity}: ${params.emotionIntensity}%)</p>
                        <p class="text-sm text-gray-500">${currentTexts.languageLevel}: ${params.languageLevel} | ${currentTexts.rhythm}: ${params.rhymePattern} | ${currentTexts.metaphor}: ${params.metaphorUsage}%</p>
                    </div>
                    <div class="space-y-6">
            `;
            
            structure.forEach((section, index) => {
                const color = getSectionColor(section);
                const content = generateSectionContent(section, template, expressions, params);
                
                lyricsHTML += `
                    <div class="bg-${color}-50 border-l-4 border-${color}-500 p-4 rounded">
                        <h4 class="font-semibold text-${color}-800 mb-2">[${section}]</h4>
                        <p class="text-gray-700 leading-relaxed">${content}</p>
                    </div>
                `;
            });
            
            lyricsHTML += `
                    </div>
                </div>
            `;
            
            return lyricsHTML;
        }
        
        // „Çª„ÇØ„Ç∑„Éß„É≥„ÅÆËâ≤„ÇíÊ±∫ÂÆö
        function getSectionColor(section) {
            if (section.includes('Intro') || section.includes('Outro')) return 'green';
            if (section.includes('Verse')) return 'blue';
            if (section.includes('Chorus')) return 'purple';
            if (section.includes('Bridge')) return 'orange';
            return 'gray';
        }
        
        // „Çª„ÇØ„Ç∑„Éß„É≥Âà•„ÅÆÊ≠åË©ûÂÜÖÂÆπ„ÇíÁîüÊàê
        function generateSectionContent(section, template, expressions, params) {
            const keywords = template.keywords;
            const imagery = template.imagery;
            const intensity = parseInt(params.emotionIntensity);
            const metaphorLevel = parseInt(params.metaphorUsage);
            
            // „Çª„ÇØ„Ç∑„Éß„É≥Âà•„ÅÆ„ÉÜ„É≥„Éó„É¨„Éº„Éà
            if (section.includes('Intro')) {
                return generateIntroContent(keywords, imagery, expressions, intensity);
            } else if (section.includes('Verse')) {
                return generateVerseContent(keywords, imagery, expressions, params);
            } else if (section.includes('Chorus')) {
                return generateChorusContent(keywords, expressions, params);
            } else if (section.includes('Bridge')) {
                return generateBridgeContent(keywords, imagery, expressions, params);
            } else if (section.includes('Outro')) {
                return generateOutroContent(keywords, imagery, expressions, intensity);
            }
            
            return '„Ç´„Çπ„Çø„É†Ê≠åË©û„Åå„Åì„Åì„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô';
        }
        
        // IntroÁî®Ê≠åË©ûÁîüÊàêÔºàÂ§öË®ÄË™ûÂØæÂøúÔºâ
        function generateIntroContent(keywords, imagery, expressions, intensity) {
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `${imagery[0]}‰∏≠${expressions[0]} ${keywords[0]}ÁöÑÊóãÂæã`,
                    `${imagery[1]}Âú®${expressions[1]} Âêë${keywords[1]}${expressions[2]}`
                ];
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `${imagery[0]}‰∏≠${expressions[0]} ${keywords[0]}ÁöÑÊóãÂæã`,
                    `${imagery[1]}Âú®${expressions[1]} Âêë${keywords[1]}${expressions[2]}`
                ];
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `In the ${imagery[0]} ${keywords[0]} ${expressions[0]}`,
                    `${imagery[1]} ${expressions[1]} towards ${keywords[1]} ${expressions[2]}`
                ];
            } else {
                // Japanese (default)
                lines = [
                    `${imagery[0]}„Å´${expressions[0]} ${keywords[0]}„ÅÆË™ø„Åπ`,
                    `${imagery[1]}„Åå${expressions[1]}„Å¶ ${keywords[1]}„Å´${expressions[2]}`
                ];
            }
            
            return lines.join('<br>');
        }
        
        // VerseÁî®Ê≠åË©ûÁîüÊàêÔºàÂ§öË®ÄË™ûÂØæÂøúÔºâ
        function generateVerseContent(keywords, imagery, expressions, params) {
            const lines = [];
            const lineCount = params.languageLevel === '‰∏äÁ¥ö' ? 8 : 6;
            
            for (let i = 0; i < lineCount; i++) {
                const keyword = keywords[i % keywords.length];
                const img = imagery[i % imagery.length];
                const expr = expressions[i % expressions.length];
                
                let line = '';
                if (selectedPromptLanguage === 'cantonese') {
                    if (i % 2 === 0) {
                        line = `${img}ÁöÑÂΩºÊñπ ${keyword}Âú®${expr}`;
                    } else {
                        line = `${keyword}${expr}Ëëó Âêë${img}ÂâçÈÄ≤`;
                    }
                } else if (selectedPromptLanguage === 'chinese') {
                    if (i % 2 === 0) {
                        line = `${img}ÁöÑÂΩºÊñπ ${keyword}Âú®${expr}`;
                    } else {
                        line = `${keyword}${expr}ÁùÄ Âêë${img}ÂâçËøõ`;
                    }
                } else if (selectedPromptLanguage === 'english') {
                    if (i % 2 === 0) {
                        line = `Beyond the ${img} ${keyword} ${expr}`;
                    } else {
                        line = `${expr} the ${keyword} towards ${img}`;
                    }
                } else {
                    // Japanese (default)
                    if (i % 2 === 0) {
                        line = `${img}„ÅÆÂêë„Åì„ÅÜ„Å´ ${keyword}„Åå${expr}`;
                    } else {
                        line = `${keyword}„Çí${expr}„Å¶ ${img}„Å∏„Å®Âêë„Åã„ÅÜ`;
                    }
                }
                
                lines.push(line);
            }
            
            return lines.join('<br>');
        }
        
        // ChorusÁî®Ê≠åË©ûÁîüÊàêÔºàÂ§öË®ÄË™ûÂØæÂøúÔºâ
        function generateChorusContent(keywords, expressions, params) {
            const theme = params.theme;
            const emotion = params.emotion;
            const intensity = parseInt(params.emotionIntensity);
            
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `${keywords[0]}Âú®${expressions[0]} ÂøÉ‰∏≠${expressions[1]}Ëëó`,
                    `ÁÑ°Ë´ñ‰ªÄÈ∫ºÂõ∞Èõ£‰æÜËá® ÈÉΩ‰∏çÊúÉ${expressions[2]}`,
                    `Êá∑Ëëó${theme} ${keywords[1]}${expressions[3]}`,
                    `Â∞áÈÄô${keywords[2]}ËûçÂÖ•Ê≠åËÅ≤ ÂêëÂ§©Á©∫${expressions[4]}`
                ];
                
                if (intensity > 70) {
                    lines.push(`ÊÉ≥Ë¶ÅÂÇ≥ÈÅîÁµ¶ÂÖ®‰∏ñÁïå ÈÄô${emotion}ÁöÑÊóãÂæã`);
                    lines.push(`Âõ†ÁÇ∫Êúâ${keywords[3]} ÊàëËÉΩÂ§†${expressions[0]}`);
                }
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `${keywords[0]}Âú®${expressions[0]} ÂøÉ‰∏≠${expressions[1]}ÁùÄ`,
                    `Êó†ËÆ∫‰ªÄ‰πàÂõ∞ÈöæÊù•‰∏¥ ÈÉΩ‰∏ç‰ºö${expressions[2]}`,
                    `ÊÄÄÁùÄ${theme} ${keywords[1]}${expressions[3]}`,
                    `Â∞ÜËøô${keywords[2]}ËûçÂÖ•Ê≠åÂ£∞ ÂêëÂ§©Á©∫${expressions[4]}`
                ];
                
                if (intensity > 70) {
                    lines.push(`ÊÉ≥Ë¶Å‰º†ËææÁªôÂÖ®‰∏ñÁïå Ëøô${emotion}ÁöÑÊóãÂæã`);
                    lines.push(`Âõ†‰∏∫Êúâ${keywords[3]} ÊàëËÉΩÂ§ü${expressions[0]}`);
                }
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `${keywords[0]} ${expressions[0]} in my heart ${expressions[1]}`,
                    `No matter what difficulties come, I won't ${expressions[2]}`,
                    `With ${theme} in my chest, ${expressions[3]} the ${keywords[1]}`,
                    `Put this ${keywords[2]} into song and ${expressions[4]} to the sky`
                ];
                
                if (intensity > 70) {
                    lines.push(`Want to reach the whole world with this melody of ${emotion}`);
                    lines.push(`Because I have ${keywords[3]}, I can ${expressions[0]}`);
                }
            } else {
                // Japanese (default)
                lines = [
                    `${keywords[0]}„ÅØ${expressions[0]} ÂøÉ„Å´${expressions[1]}„Å¶`,
                    `„Å©„Çì„Å™Âõ∞Èõ£„ÅåÊù•„Å¶„ÇÇ ${expressions[2]}„Åì„Å®„ÅØ„Å™„ÅÑ`,
                    `${theme}„ÇíËÉ∏„Å´ ${keywords[1]}„Çí${expressions[3]}`,
                    `„Åì„ÅÆ${keywords[2]}„ÇíÊ≠å„Å´Ëæº„ÇÅ„Å¶ Á©∫„Å´${expressions[4]}„Çà„ÅÜ`
                ];
                
                if (intensity > 70) {
                    lines.push(`‰∏ñÁïå‰∏≠„Å´Â±ä„Åë„Åü„ÅÑ „Åì„ÅÆ${emotion}„ÅÆË™ø„Åπ„Çí`);
                    lines.push(`${keywords[3]}„Åå„ÅÇ„Çã„Åã„Çâ ÂÉï„ÅØ${expressions[0]}„Å™„Çå„Çã`);
                }
            }
            
            return lines.join('<br>');
        }
        
        // BridgeÁî®Ê≠åË©ûÁîüÊàêÔºàÂ§öË®ÄË™ûÂØæÂøúÔºâ
        function generateBridgeContent(keywords, imagery, expressions, params) {
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `‰ª∞Êúõ${imagery[4] || 'ÊòüÁ©∫'} Ë®±‰∏ã${keywords[5] || 'ÊâøË´æ'}`,
                    `‰ªª‰ΩïÂõ∞Èõ£ Âè™Ë¶Å${expressions[1]}Â∞±ËÉΩÂÖãÊúç`,
                    `ÊâãÁâΩÊâã${expressions[2]} ‰∏ÄËµ∑${expressions[3]}ÂâçÈÄ≤`,
                    `ÁÇ∫‰∫ÜË≠âÊòé${keywords[0]}ÁöÑ${keywords[1]}`
                ];
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `‰ª∞Êúõ${imagery[4] || 'ÊòüÁ©∫'} ËÆ∏‰∏ã${keywords[5] || 'ÊâøËØ∫'}`,
                    `‰ªª‰ΩïÂõ∞Èöæ Âè™Ë¶Å${expressions[1]}Â∞±ËÉΩÂÖãÊúç`,
                    `ÊâãÁâµÊâã${expressions[2]} ‰∏ÄËµ∑${expressions[3]}ÂâçËøõ`,
                    `‰∏∫‰∫ÜËØÅÊòé${keywords[0]}ÁöÑ${keywords[1]}`
                ];
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `Looking up at the ${imagery[4] || 'starry sky'} making a ${keywords[5] || 'promise'}`,
                    `Any difficulty can be overcome if we ${expressions[1]}`,
                    `Holding hands ${expressions[2]} let's ${expressions[3]} together`,
                    `To prove the ${keywords[1]} of ${keywords[0]}`
                ];
            } else {
                // Japanese (default)
                lines = [
                    `${imagery[4] || 'ÊòüÁ©∫'}„ÇíË¶ã‰∏ä„Åí„Å¶ Ë™ì„Å£„Åü${keywords[5] || 'Á¥ÑÊùü'}`,
                    `„Å©„Çì„Å™Âõ∞Èõ£„ÇÇ ${expressions[1]}„Å™„Çâ‰πó„ÇäË∂ä„Åà„Çâ„Çå„Çã`,
                    `${expressions[2]}„ÇíÂèñ„ÇäÂêà„Å£„Å¶ ${expressions[3]}„ÅÑ„Å¶„ÅÑ„Åì„ÅÜ`,
                    `${keywords[0]}„ÅÆ${keywords[1]}„Çí Ë®ºÊòé„Åô„Çã„Åü„ÇÅ„Å´`
                ];
            }
            
            return lines.join('<br>');
        }
        
        // OutroÁî®Ê≠åË©ûÁîüÊàêÔºàÂ§öË®ÄË™ûÂØæÂøúÔºâ
        function generateOutroContent(keywords, imagery, expressions, intensity) {
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `Âú®${imagery[0]}‰∏≠ÈüøËµ∑ ${keywords[0]}ÁöÑÊóãÂæã`,
                    `${keywords[1]}‰πòËëó${imagery[1]} Ê∞∏ÈÅ†${expressions[0]}`
                ];
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `Âú®${imagery[0]}‰∏≠ÂìçËµ∑ ${keywords[0]}ÁöÑÊóãÂæã`,
                    `${keywords[1]}‰πòÁùÄ${imagery[1]} Ê∞∏Ëøú${expressions[0]}`
                ];
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `Echoing in the ${imagery[0]} melody of ${keywords[0]}`,
                    `${keywords[1]} riding on ${imagery[1]} forever ${expressions[0]}`
                ];
            } else {
                // Japanese (default)
                lines = [
                    `${imagery[0]}„Å´Èüø„Åè ${keywords[0]}„ÅÆÊóãÂæã`,
                    `${keywords[1]}„Åå${imagery[1]}„Å´‰πó„Å£„Å¶ Ê∞∏ÈÅ†„Å´${expressions[0]}`
                ];
            }
            
            return lines.join('<br>');
        }
        
        // „Éë„É©„É°„Éº„Çø„Å´Âü∫„Å•„ÅÑ„Å¶„Çπ„Ç≥„Ç¢„ÇíË®àÁÆó
        function calculateProScores(params) {
            const baseScore = 70;
            const emotionBonus = Math.floor(params.emotionIntensity / 10);
            const metaphorBonus = Math.floor(params.metaphorUsage / 20);
            const complexityBonus = params.languageLevel === '‰∏äÁ¥ö' ? 15 : params.languageLevel === '‰∏≠Á¥ö' ? 10 : 5;
            
            return {
                emotion: Math.min(95, baseScore + emotionBonus + Math.random() * 10),
                language: Math.min(95, baseScore + complexityBonus + Math.random() * 10),
                originality: Math.min(95, baseScore + metaphorBonus + Math.random() * 15),
                musical: Math.min(95, baseScore + (params.rhymePattern !== '„Å™„Åó' ? 10 : 0) + Math.random() * 10)
            };
        }
        
        // Pro„Çπ„Ç≥„Ç¢„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
        function animateProScore(elementId, targetScore) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            let currentScore = 0;
            const increment = targetScore / 30;
            
            const timer = setInterval(() => {
                currentScore += increment;
                if (currentScore >= targetScore) {
                    currentScore = targetScore;
                    clearInterval(timer);
                }
                element.textContent = Math.round(currentScore);
            }, 50);
        }
        
        // ProÊßãÊàêÂ§âÊõ¥ÈÅ©Áî®
        function applyProStructureChanges() {
            const params = getProLyricsParameters();
            const message = `ProÊßãÊàêÂ§âÊõ¥„ÅåÈÅ©Áî®„Åï„Çå„Åæ„Åó„ÅüÔºÅ
            
Ë®≠ÂÆöÂÜÖÂÆπ:
‚Ä¢ VerseÊï∞: ${params.verseCount}
‚Ä¢ ChorusÊï∞: ${params.chorusCount}
‚Ä¢ Bridge: ${params.bridgeInclude ? '„ÅÇ„Çä' : '„Å™„Åó'}
‚Ä¢ Intro: ${params.introInclude ? '„ÅÇ„Çä' : '„Å™„Åó'}
‚Ä¢ Outro: ${params.outroInclude ? '„ÅÇ„Çä' : '„Å™„Åó'}

Êñ∞„Åó„ÅÑÊßãÊàê„ÅßÊ≠åË©û„ÇíÂÜçÁîüÊàê„Åó„Åæ„Åô„ÄÇ`;
            
            alert(message);
            generateProLyrics();
        }
        
        // Pro URLÂàÜÊûê
        function analyzeURL() {
            const urlInput = document.getElementById('pro-literary-url');
            const url = urlInput ? urlInput.value : '';
            
            if (!url) {
                alert('URL„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (analysis) {
                analysis.classList.remove('hidden');
                analysis.innerHTML = `
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-800 mb-2">ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†ÂàÜÊûêÁµêÊûú</h4>
                        <p class="text-sm text-gray-600">ÂàÜÊûêÂØæË±°: ${url}</p>
                        <div class="mt-3 space-y-2">
                            <p><strong>„ÉÜ„Éº„Éû:</strong> ‰∫∫Áîü„ÅÆÊóÖË∑Ø„ÄÅÊàêÈï∑„Å®Â§âÂåñ</p>
                            <p><strong>Êñá‰Ωì:</strong> ÂèôÊÉÖÁöÑ„ÄÅÊØîÂñ©Ë±äÂØå</p>
                            <p><strong>ÊÑüÊÉÖÂü∫Ë™ø:</strong> Â∏åÊúõÁöÑ„ÄÅÂÜÖÁúÅÁöÑ</p>
                            <p><strong>Êé®Â•®„Ç∏„É£„É≥„É´:</strong> „Éï„Ç©„Éº„ÇØ„ÄÅ„Éê„É©„Éº„Éâ</p>
                        </div>
                    </div>
                `;
            }
            alert('URL „Åã„ÇâÈ´òÂ∫¶„Å™ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†„ÅåÂàÜÊûê„Åï„Çå„Åæ„Åó„ÅüÔºÅ\nÂàÜÊûêÁµêÊûú„ÇíÊ≠åË©ûÁîüÊàê„Éë„É©„É°„Éº„Çø„Å´ÂèçÊò†„Åß„Åç„Åæ„Åô„ÄÇ');
        }
        
        // Pro „Éï„Ç°„Ç§„É´ÂàÜÊûê
        function analyzeFile() {
            const fileInput = document.getElementById('pro-literary-file');
            const file = fileInput ? fileInput.files[0] : null;
            
            if (!file) {
                alert('„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (analysis) {
                analysis.classList.remove('hidden');
                analysis.innerHTML = `
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-800 mb-2">ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†ÂàÜÊûêÁµêÊûú</h4>
                        <p class="text-sm text-gray-600">ÂàÜÊûêÂØæË±°: ${file.name}</p>
                        <div class="mt-3 space-y-2">
                            <p><strong>„ÉÜ„Éº„Éû:</strong> ÊÑõ„Å®Âà•„Çå„ÄÅÊôÇ„ÅÆÊµÅ„Çå</p>
                            <p><strong>Êñá‰Ωì:</strong> Âè§ÂÖ∏ÁöÑ„ÄÅÊ†ºË™øÈ´ò„ÅÑ</p>
                            <p><strong>ÊÑüÊÉÖÂü∫Ë™ø:</strong> ÈÉ∑ÊÑÅÁöÑ„ÄÅÁæéÁöÑ</p>
                            <p><strong>Êé®Â•®„Ç∏„É£„É≥„É´:</strong> „ÇØ„É©„Ç∑„ÉÉ„ÇØ„ÄÅ„Ç∏„É£„Ç∫</p>
                        </div>
                    </div>
                `;
            }
            alert('„Éï„Ç°„Ç§„É´„Åã„ÇâÈ´òÂ∫¶„Å™ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†„ÅåÂàÜÊûê„Åï„Çå„Åæ„Åó„ÅüÔºÅ\nÂàÜÊûêÁµêÊûú„ÇíÊ≠åË©ûÁîüÊàê„Éë„É©„É°„Éº„Çø„Å´ÂèçÊò†„Åß„Åç„Åæ„Åô„ÄÇ');
        }
        
        // Pro ‰ΩúÂìÅÊ§úÁ¥¢
        function searchWork() {
            const searchInput = document.getElementById('pro-literary-search');
            const searchTerm = searchInput ? searchInput.value : '';
            
            if (!searchTerm) {
                alert('‰ΩúÂìÅÂêç„Åæ„Åü„ÅØ„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (analysis) {
                analysis.classList.remove('hidden');
                analysis.innerHTML = `
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-purple-800 mb-2">ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†ÂàÜÊûêÁµêÊûú</h4>
                        <p class="text-sm text-gray-600">Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ: "${searchTerm}"</p>
                        <div class="mt-3 space-y-2">
                            <p><strong>Èñ¢ÈÄ£‰ΩúÂìÅ:</strong> È°û‰ºº„ÉÜ„Éº„Éû„ÅÆÊñáÂ≠¶‰ΩúÂìÅ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü</p>
                            <p><strong>„ÉÜ„Éº„Éû:</strong> Ëá™ÁÑ∂„Å®‰∫∫Èñì„ÄÅÂ≠£ÁØÄ„ÅÆÁßª„Çç„ÅÑ</p>
                            <p><strong>Êñá‰Ωì:</strong> Ë©©ÁöÑ„ÄÅË±°Âæ¥ÁöÑ</p>
                            <p><strong>ÊÑüÊÉÖÂü∫Ë™ø:</strong> ÈùôË¨ê„ÄÅÁûëÊÉ≥ÁöÑ</p>
                            <p><strong>Êé®Â•®„Ç∏„É£„É≥„É´:</strong> „Ç¢„É≥„Éì„Ç®„É≥„Éà„ÄÅ„Éã„É•„Éº„Ç®„Ç§„Ç∏</p>
                        </div>
                    </div>
                `;
            }
            alert(`"${searchTerm}" „Å´Èñ¢ÈÄ£„Åô„Çã‰ΩúÂìÅ„ÅåÊ§úÁ¥¢„Åï„Çå„ÄÅÈ´òÂ∫¶„Å™ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†„ÅåÂàÜÊûê„Åï„Çå„Åæ„Åó„ÅüÔºÅ\nÂàÜÊûêÁµêÊûú„ÇíÊ≠åË©ûÁîüÊàê„Éë„É©„É°„Éº„Çø„Å´ÂèçÊò†„Åß„Åç„Åæ„Åô„ÄÇ`);
        }
        
        // Pro ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†ÈÅ©Áî®
        function applyLiteraryElements() {
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (!analysis || analysis.classList.contains('hidden')) {
                alert('„Åæ„ÅöÊñáÂ≠¶‰ΩúÂìÅ„ÅÆÂàÜÊûê„ÇíÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            // ÂàÜÊûêÁµêÊûú„Å´Âü∫„Å•„ÅÑ„Å¶„Éë„É©„É°„Éº„Çø„ÇíËá™ÂãïË®≠ÂÆö
            const themeSelect = document.getElementById('pro-theme');
            const genreSelect = document.getElementById('pro-genre');
            const emotionSelect = document.getElementById('pro-emotion');
            const languageLevelSelect = document.getElementById('pro-language-level');
            const metaphorSlider = document.getElementById('pro-metaphor');
            
            if (themeSelect) themeSelect.value = 'ÊàêÈï∑';
            if (genreSelect) genreSelect.value = '„Éï„Ç©„Éº„ÇØ';
            if (emotionSelect) emotionSelect.value = 'Â∏åÊúõ';
            if (languageLevelSelect) languageLevelSelect.value = 'Ë©©ÁöÑË°®Áèæ';
            if (metaphorSlider) metaphorSlider.value = 8;
            
            alert('È´òÂ∫¶„Å™ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†„ÅåProÊ≠åË©ûÁîüÊàê„Éë„É©„É°„Éº„Çø„Å´ÈÅ©Áî®„Åï„Çå„Åæ„Åó„ÅüÔºÅ\n\nÈÅ©Áî®„Åï„Çå„ÅüË®≠ÂÆö:\n‚Ä¢ „ÉÜ„Éº„Éû: ÊàêÈï∑\n‚Ä¢ „Ç∏„É£„É≥„É´: „Éï„Ç©„Éº„ÇØ\n‚Ä¢ ÊÑüÊÉÖ: Â∏åÊúõ\n‚Ä¢ Ë®ÄË™û„É¨„Éô„É´: Ë©©ÁöÑË°®Áèæ\n‚Ä¢ ÊØîÂñ©‰ΩøÁî®Â∫¶: 8/10\n\n„ÄåProÊ≠åË©û„ÇíÁîüÊàê„Äç„Éú„Çø„É≥„ÅßÊñ∞„Åó„ÅÑÊ≠åË©û„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
        }
        
        // „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„ÅàÊ©üËÉΩ
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            const isLightMode = body.classList.contains('light-mode');
            
            if (isLightMode) {
                // „ÉÄ„Éº„ÇØ„É¢„Éº„Éâ„Å´Âàá„ÇäÊõø„Åà
                body.classList.remove('light-mode');
                themeIcon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            } else {
                // „É©„Ç§„Éà„É¢„Éº„Éâ„Å´Âàá„ÇäÊõø„Åà
                body.classList.add('light-mode');
                themeIcon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            }
        }
        
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´„ÉÜ„Éº„Éû„ÇíÂæ©ÂÖÉ
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            
            if (savedTheme === 'light') {
                body.classList.add('light-mode');
                themeIcon.className = 'fas fa-moon';
            } else {
                // „Éá„Éï„Ç©„É´„Éà„ÅØ„ÉÄ„Éº„ÇØ„É¢„Éº„Éâ
                body.classList.remove('light-mode');
                themeIcon.className = 'fas fa-sun';
            }
        }
        
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÊôÇ„Å´„ÉÜ„Éº„Éû„ÇíÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', initTheme);
        
        // „Éò„É´„ÉóÊ©üËÉΩ
        function showHelp() {
            document.getElementById('help-modal').style.display = 'flex';
        }
        
        function closeHelp() {
            document.getElementById('help-modal').style.display = 'none';
        }
        
        // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        document.addEventListener('click', function(e) {
            if (e.target.id === 'help-modal') {
                closeHelp();
            }
        });
        
        // „Éò„É´„Éë„ÉºÈñ¢Êï∞
        function getVocalTags() {
            return ['Male Vocal', 'Female Vocal', 'Duet', 'Choir', 'Whisper', 'Spoken Word', 'Harmonies', 'Vulnerable Vocals'];
        }
        
        function getMoodStyles() {
            return ['Upbeat', 'Melancholic', 'Energetic', 'Peaceful', 'Dramatic', 'Romantic', 'Mysterious', 'Nostalgic'];
        }
        
        function getAllGenres() {
            // „Åì„ÅÆÈñ¢Êï∞„ÅØÂÆüÈöõ„ÅÆ„Ç∏„É£„É≥„É´„É™„Çπ„Éà„ÇíËøî„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô
            return []; // ÂÆüË£Ö„ÅåÂøÖË¶Å
        }
        
        function getArtistStyles() {
            return []; // suno.csv„Åã„ÇâË™≠„ÅøËæº„Åæ„Çå„Åü„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„Çπ„Çø„Ç§„É´
        }
        
        function getCurrentSongStructure() {
            // ÁèæÂú®„ÅÆÊ•ΩÊõ≤ÊßãÊàê„ÇíÂèñÂæó
            return {
                intro: 8,
                verse1: 16,
                chorus: 16,
                verse2: 16,
                chorus2: 16,
                bridge: 8,
                finalChorus: 16,
                outro: 8
            };
        }
        
        // ‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØÈñ¢Êï∞
        async function checkPromptGenerationLimit() {
            console.log('‰ΩøÁî®Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ„Çí„Çπ„Ç≠„ÉÉ„Éó - Âà∂Èôê„Å™„Åó„ÅßÂãï‰Ωú');
            return true; // Â∏∏„Å´Âà∂Èôê„Å™„Åó„ÅßÂãï‰Ωú
        }
        
        async function checkLyricGenerationLimit() {
            console.log('Ê≠åË©ûÁîüÊàêÂà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ„Çí„Çπ„Ç≠„ÉÉ„Éó - Âà∂Èôê„Å™„Åó„ÅßÂãï‰Ωú');
            return true; // Â∏∏„Å´Âà∂Èôê„Å™„Åó„ÅßÂãï‰Ωú
        }
        
        // ‰ΩøÁî®ÂõûÊï∞„ÇíÂ¢ó„ÇÑ„ÅôÈñ¢Êï∞
        async function incrementUsageCount(type) {
            console.log(`‰ΩøÁî®ÂõûÊï∞Â¢óÂä†„Çí„Çπ„Ç≠„ÉÉ„Éó - ${type} Âà∂Èôê„Å™„Åó„ÅßÂãï‰Ωú`);
            return true; // Â∏∏„Å´ÊàêÂäü„ÇíËøî„Åô
        }
        
        // ‰ΩøÁî®Âà∂Èôê„É¢„Éº„ÉÄ„É´Ë°®Á§∫
        function showUsageLimitModal(type) {
            const typeName = type === 'prompt' ? '„Éó„É≠„É≥„Éó„ÉàÁîüÊàê' : 'ProÊ≠åË©ûÁîüÊàê';
            const modal = document.createElement('div');
            modal.className = 'usage-limit-modal';
            modal.innerHTML = `
                <div class="modal-backdrop" onclick="closeUsageLimitModal()"></div>
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>‚ö° ‰ΩøÁî®Âà∂Èôê„Å´ÈÅî„Åó„Åæ„Åó„Åü</h3>
                        <button class="modal-close" onclick="closeUsageLimitModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="limit-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <p class="limit-message">
                            ${typeName}„ÅÆÁÑ°ÊñôÊû†„Çí‰Ωø„ÅÑÂàá„Çä„Åæ„Åó„Åü„ÄÇ<br>
                            Êù•Êúà1Êó•„Å´„É™„Çª„ÉÉ„Éà„Åï„Çå„Åæ„Åô„ÄÇ
                        </p>
                        <div class="limit-info">
                            <div class="limit-item">
                                <span class="limit-label">„Éó„É≠„É≥„Éó„ÉàÁîüÊàê:</span>
                                <span class="limit-value">100Âõû/Êúà</span>
                            </div>
                            <div class="limit-item">
                                <span class="limit-label">ProÊ≠åË©ûÁîüÊàê:</span>
                                <span class="limit-value">3Âõû/Êúà</span>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button onclick="closeUsageLimitModal()" class="btn-understand">
                                ÁêÜËß£„Åó„Åæ„Åó„Åü
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // ‰ΩøÁî®Âà∂Èôê„É¢„Éº„ÉÄ„É´Èñâ„Åò„Çã
        function closeUsageLimitModal() {
            const modal = document.querySelector('.usage-limit-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        // ‰ΩøÁî®Áä∂Ê≥ÅË°®Á§∫Êõ¥Êñ∞
        async function updateUsageDisplay() {
            try {
                const { data: { session } } = await supabaseClient.auth.getSession();
                if (!session) return;
                
                const { data, error } = await supabaseClient
                    .from('usage_limits')
                    .select('*')
                    .eq('user_id', session.user.id)
                    .single();
                
                if (error) return;
                
                // ‰ΩøÁî®Áä∂Ê≥ÅË°®Á§∫Ë¶ÅÁ¥†„Çí‰ΩúÊàê„Åæ„Åü„ÅØÊõ¥Êñ∞
                let usageDisplay = document.getElementById('usage-display');
                if (!usageDisplay) {
                    usageDisplay = document.createElement('div');
                    usageDisplay.id = 'usage-display';
                    usageDisplay.className = 'usage-display';
                    document.body.appendChild(usageDisplay);
                }
                
                usageDisplay.innerHTML = `
                    <div class="usage-container">
                        <div class="usage-item">
                            <span class="usage-label">„Éó„É≠„É≥„Éó„Éà:</span>
                            <span class="usage-count">${data.prompt_generations_used}/${data.prompt_generations_limit}</span>
                        </div>
                        <div class="usage-item">
                            <span class="usage-label">Ê≠åË©û:</span>
                            <span class="usage-count">${data.lyric_generations_used}/${data.lyric_generations_limit}</span>
                        </div>
                        <button onclick="signOut()" class="sign-out-btn">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                    </div>
                `;
                
            } catch (error) {
                console.error('Update usage display error:', error);
            }
        }
        
        // „É≠„Ç∞„Ç¢„Ç¶„ÉàÊ©üËÉΩ
        async function signOut() {
            try {
                const { error } = await supabaseClient.auth.signOut();
                if (error) throw error;
                
                window.location.href = '/login.html';
            } catch (error) {
                console.error('Sign out error:', error);
                alert('„É≠„Ç∞„Ç¢„Ç¶„Éà„Ç®„É©„Éº: ' + error.message);
            }
        }
    </script>
    
    <!-- Ë™çË®º„Å®Stripe„Çπ„ÇØ„É™„Éó„Éà -->
    <script>
// Authentication and Supabase integration for SUNO AI Complete Builder

// Initialize Supabase client (use existing global variable)
// let supabaseClient = null; // Already declared above
let currentUser = null;

// Initialize Supabase
function initSupabase() {
    if (typeof window.supabase === 'undefined') {
        console.error('Supabase library not loaded');
        return false;
    }
    
    supabaseClient = window.supabase.createClient(
        window.SUNO_CONFIG.supabase.url,
        window.SUNO_CONFIG.supabase.anonKey
    );
    
    // Check for existing session
    checkAuthState();
    
    // Listen for auth changes
    supabaseClient.auth.onAuthStateChange((event, session) => {
        if (event === 'SIGNED_IN') {
            handleSignIn(session.user);
        } else if (event === 'SIGNED_OUT') {
            handleSignOut();
        }
    });
    
    return true;
}

// Check current auth state
async function checkAuthState() {
    try {
        const { data: { session }, error } = await supabaseClient.auth.getSession();
        if (error) throw error;
        
        if (session) {
            await handleSignIn(session.user);
        } else {
            handleSignOut();
        }
    } catch (error) {
        console.error('Auth state check error:', error);
    }
}

// Handle sign in
async function handleSignIn(user) {
    currentUser = user;
    
    // Create or update user in database
    try {
        const { error } = await supabaseClient
            .from('users')
            .upsert({
                id: user.id,
                email: user.email,
                name: user.user_metadata?.full_name || user.email.split('@')[0],
                avatar_url: user.user_metadata?.avatar_url,
                google_id: user.user_metadata?.sub,
                updated_at: new Date().toISOString()
            });
        
        if (error) throw error;
        
        // Initialize usage limits if not exists
        await initializeUsageLimits(user.id);
        
        // Update UI
        updateAuthUI(true);
        await updateUsageDisplay();
        
    } catch (error) {
        console.error('User creation error:', error);
    }
}

// Handle sign out
function handleSignOut() {
    currentUser = null;
    updateAuthUI(false);
    clearUsageDisplay();
}

// Initialize usage limits for new user
async function initializeUsageLimits(userId) {
    try {
        const { data, error } = await supabaseClient
            .from('usage_limits')
            .select('*')
            .eq('user_id', userId)
            .single();
        
        if (error && error.code === 'PGRST116') {
            // No usage record exists, create one
            const { error: insertError } = await supabaseClient
                .from('usage_limits')
                .insert({
                    user_id: userId,
                    prompt_generations_used: 0,
                    prompt_generations_limit: window.SUNO_CONFIG.limits.free.promptGenerations,
                    lyric_generations_used: 0,
                    lyric_generations_limit: window.SUNO_CONFIG.limits.free.lyricGenerations,
                    reset_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString()
                });
            
            if (insertError) throw insertError;
        }
    } catch (error) {
        console.error('Usage limits initialization error:', error);
    }
}

// Sign in with Google
async function signInWithGoogle() {
    try {
        const { error } = await supabaseClient.auth.signInWithOAuth({
            provider: 'google',
            options: {
                redirectTo: window.location.origin
            }
        });
        
        if (error) throw error;
    } catch (error) {
        console.error('Google sign in error:', error);
        alert('„É≠„Ç∞„Ç§„É≥„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ' + error.message);
    }
}

// Sign out
async function signOut() {
    try {
        const { error } = await supabaseClient.auth.signOut();
        if (error) throw error;
    } catch (error) {
        console.error('Sign out error:', error);
    }
}

// Check if user can generate prompt
async function canGeneratePrompt() {
    if (!currentUser) return false;
    
    try {
        const { data, error } = await supabaseClient
            .rpc('can_generate_prompt', { user_uuid: currentUser.id });
        
        if (error) throw error;
        return data;
    } catch (error) {
        console.error('Can generate prompt check error:', error);
        return false;
    }
}

// Check if user can generate lyrics
async function canGenerateLyrics() {
    if (!currentUser) return false;
    
    try {
        const { data, error } = await supabaseClient
            .rpc('can_generate_lyrics', { user_uuid: currentUser.id });
        
        if (error) throw error;
        return data;
    } catch (error) {
        console.error('Can generate lyrics check error:', error);
        return false;
    }
}

// Increment usage count
async function incrementUsage(type) {
    if (!currentUser) return false;
    
    try {
        const { error } = await supabaseClient
            .rpc('increment_usage', { 
                user_uuid: currentUser.id, 
                generation_type: type 
            });
        
        if (error) throw error;
        
        // Update usage display
        await updateUsageDisplay();
        return true;
    } catch (error) {
        console.error('Increment usage error:', error);
        return false;
    }
}

// Save prompt generation
async function savePromptGeneration(promptData) {
    if (!currentUser) return false;
    
    try {
        const { error } = await supabaseClient
            .from('prompt_generations')
            .insert({
                user_id: currentUser.id,
                vocal_tags: promptData.vocalTags,
                mood_styles: promptData.moodStyles,
                genres: promptData.genres,
                artist_styles: promptData.artistStyles,
                language: promptData.language,
                generated_prompt: promptData.generatedPrompt
            });
        
        if (error) throw error;
        return true;
    } catch (error) {
        console.error('Save prompt generation error:', error);
        return false;
    }
}

// Save lyric generation
async function saveLyricGeneration(lyricData) {
    if (!currentUser) return false;
    
    try {
        const { error } = await supabaseClient
            .from('lyric_generations')
            .insert({
                user_id: currentUser.id,
                genre: lyricData.genre,
                theme: lyricData.theme,
                target_age: lyricData.targetAge,
                primary_emotion: lyricData.primaryEmotion,
                emotion_intensity: lyricData.emotionIntensity,
                emotion_change: lyricData.emotionChange,
                language_level: lyricData.languageLevel,
                metaphor_usage: lyricData.metaphorUsage,
                rhythm_pattern: lyricData.rhythmPattern,
                keywords: lyricData.keywords,
                avoid_expressions: lyricData.avoidExpressions,
                language: lyricData.language,
                song_structure: lyricData.songStructure,
                literary_reference: lyricData.literaryReference,
                generated_lyrics: lyricData.generatedLyrics,
                quality_scores: lyricData.qualityScores
            });
        
        if (error) throw error;
        return true;
    } catch (error) {
        console.error('Save lyric generation error:', error);
        return false;
    }
}

// Get usage statistics
async function getUsageStats() {
    if (!currentUser) return null;
    
    try {
        const { data, error } = await supabaseClient
            .from('usage_limits')
            .select('*')
            .eq('user_id', currentUser.id)
            .single();
        
        if (error) throw error;
        return data;
    } catch (error) {
        console.error('Get usage stats error:', error);
        return null;
    }
}

// Update usage display in UI
async function updateUsageDisplay() {
    const usageStats = await getUsageStats();
    if (!usageStats) return;
    
    // Update prompt usage display
    const promptUsageEl = document.getElementById('prompt-usage');
    if (promptUsageEl) {
        const promptUsed = usageStats.prompt_generations_used;
        const promptLimit = usageStats.prompt_generations_limit;
        promptUsageEl.textContent = `„Éó„É≠„É≥„Éó„ÉàÁîüÊàê: ${promptUsed}/${promptLimit === -1 ? 'ÁÑ°Âà∂Èôê' : promptLimit}`;
    }
    
    // Update lyric usage display
    const lyricUsageEl = document.getElementById('lyric-usage');
    if (lyricUsageEl) {
        const lyricUsed = usageStats.lyric_generations_used;
        const lyricLimit = usageStats.lyric_generations_limit;
        lyricUsageEl.textContent = `Ê≠åË©ûÁîüÊàê: ${lyricUsed}/${lyricLimit === -1 ? 'ÁÑ°Âà∂Èôê' : lyricLimit}`;
    }
}

// Clear usage display
function clearUsageDisplay() {
    const promptUsageEl = document.getElementById('prompt-usage');
    if (promptUsageEl) promptUsageEl.textContent = '';
    
    const lyricUsageEl = document.getElementById('lyric-usage');
    if (lyricUsageEl) lyricUsageEl.textContent = '';
}

// Update auth UI
function updateAuthUI(isSignedIn) {
    const authContainer = document.getElementById('auth-container');
    const userContainer = document.getElementById('user-container');
    
    if (isSignedIn && currentUser) {
        if (authContainer) authContainer.style.display = 'none';
        if (userContainer) {
            userContainer.style.display = 'flex';
            userContainer.innerHTML = `
                <div class="user-info">
                    <img src="${currentUser.user_metadata?.avatar_url || '/default-avatar.png'}" 
                         alt="Avatar" class="user-avatar">
                    <span class="user-name">${currentUser.user_metadata?.full_name || currentUser.email}</span>
                </div>
                <div class="usage-info">
                    <div id="prompt-usage"></div>
                    <div id="lyric-usage"></div>
                </div>
                <button onclick="signOut()" class="sign-out-btn">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            `;
        }
    } else {
        if (authContainer) {
            authContainer.style.display = 'flex';
            authContainer.innerHTML = `
                <button onclick="signInWithGoogle()" class="google-signin-btn">
                    <i class="fab fa-google"></i>
                    Google„Åß„É≠„Ç∞„Ç§„É≥
                </button>
            `;
        }
        if (userContainer) userContainer.style.display = 'none';
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Wait for Supabase library to load
    if (typeof window.supabase !== 'undefined') {
        initSupabase();
    } else {
        // Retry after a short delay
        setTimeout(() => {
            if (typeof window.supabase !== 'undefined') {
                initSupabase();
            }
        }, 1000);
    }
});
    </script>
    
    <script>
// Stripe integration for SUNO AI Complete Builder

let stripe = null;

// Initialize Stripe
function initStripe() {
    if (typeof window.Stripe === 'undefined') {
        console.error('Stripe library not loaded');
        return false;
    }
    
    stripe = window.Stripe(window.SUNO_CONFIG.stripe.publishableKey);
    return true;
}

// Create subscription checkout session
async function createSubscriptionCheckout() {
    if (!currentUser) {
        alert('„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åô„Çã„Å´„ÅØ„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô');
        return;
    }
    
    try {
        // Call your backend to create checkout session
        const response = await fetch('/api/create-checkout-session', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                userId: currentUser.id,
                email: currentUser.email,
                priceId: 'price_premium_monthly', // Replace with your actual price ID
                successUrl: window.location.origin + '/success',
                cancelUrl: window.location.origin + '/cancel'
            })
        });
        
        const session = await response.json();
        
        if (session.error) {
            throw new Error(session.error);
        }
        
        // Redirect to Stripe checkout
        const result = await stripe.redirectToCheckout({
            sessionId: session.sessionId
        });
        
        if (result.error) {
            throw new Error(result.error.message);
        }
        
    } catch (error) {
        console.error('Checkout error:', error);
        alert('Ê±∫Ê∏àÂá¶ÁêÜ„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ' + error.message);
    }
}

// Handle successful payment
async function handlePaymentSuccess(sessionId) {
    try {
        // Verify payment with backend
        const response = await fetch('/api/verify-payment', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                sessionId: sessionId,
                userId: currentUser?.id
            })
        });
        
        const result = await response.json();
        
        if (result.success) {
            // Update user subscription status
            await updateSubscriptionStatus();
            alert('„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„Å∏„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ');
            
            // Refresh the page to update UI
            window.location.reload();
        } else {
            throw new Error(result.error || 'Payment verification failed');
        }
        
    } catch (error) {
        console.error('Payment verification error:', error);
        alert('Ê±∫Ê∏à„ÅÆÁ¢∫Ë™ç„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ' + error.message);
    }
}

// Update subscription status
async function updateSubscriptionStatus() {
    if (!currentUser) return;
    
    try {
        // This would typically be done by webhook, but we can also check here
        const { data, error } = await supabaseClient
            .from('user_subscriptions')
            .select('*')
            .eq('user_id', currentUser.id)
            .eq('status', 'active')
            .single();
        
        if (data) {
            // Update usage limits for premium user
            await supabaseClient
                .from('usage_limits')
                .update({
                    prompt_generations_limit: -1, // unlimited
                    lyric_generations_limit: -1,  // unlimited
                    updated_at: new Date().toISOString()
                })
                .eq('user_id', currentUser.id);
            
            // Update UI
            await updateUsageDisplay();
        }
        
    } catch (error) {
        console.error('Subscription status update error:', error);
    }
}

// Check subscription status
async function checkSubscriptionStatus() {
    if (!currentUser) return null;
    
    try {
        const { data, error } = await supabaseClient
            .from('user_subscriptions')
            .select('*')
            .eq('user_id', currentUser.id)
            .eq('status', 'active')
            .gte('current_period_end', new Date().toISOString())
            .single();
        
        return data;
    } catch (error) {
        // No active subscription found
        return null;
    }
}

// Show upgrade modal
function showUpgradeModal() {
    const modal = document.createElement('div');
    modal.className = 'upgrade-modal';
    modal.innerHTML = `
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>üöÄ „Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ</h3>
                <button class="modal-close" onclick="closeUpgradeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="plan-details">
                    <div class="plan-price">
                        <span class="price">$${window.SUNO_CONFIG.plans.premium.price}</span>
                        <span class="period">/${window.SUNO_CONFIG.plans.premium.interval}</span>
                    </div>
                    <ul class="plan-features">
                        ${window.SUNO_CONFIG.plans.premium.features.map(feature => 
                            `<li><i class="fas fa-check"></i> ${feature}</li>`
                        ).join('')}
                    </ul>
                </div>
                <div class="modal-actions">
                    <button onclick="createSubscriptionCheckout()" class="upgrade-btn">
                        ‰ªä„Åô„Åê„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ
                    </button>
                    <button onclick="closeUpgradeModal()" class="cancel-btn">
                        „Ç≠„É£„É≥„Çª„É´
                    </button>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // Close modal when clicking backdrop
    modal.querySelector('.modal-backdrop').onclick = closeUpgradeModal;
}

// Close upgrade modal
function closeUpgradeModal() {
    const modal = document.querySelector('.upgrade-modal');
    if (modal) {
        modal.remove();
    }
}

// Check if action requires premium
async function requiresPremium(action) {
    if (!currentUser) return true;
    
    const subscription = await checkSubscriptionStatus();
    if (subscription) return false; // Has premium
    
    if (action === 'prompt') {
        return !(await canGeneratePrompt());
    } else if (action === 'lyrics') {
        return !(await canGenerateLyrics());
    }
    
    return false;
}

// Handle premium requirement
async function handlePremiumRequired(action) {
    const modal = document.createElement('div');
    modal.className = 'limit-modal';
    modal.innerHTML = `
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ö° ‰ΩøÁî®Âà∂Èôê„Å´ÈÅî„Åó„Åæ„Åó„Åü</h3>
                <button class="modal-close" onclick="closeLimitModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>
                    ${action === 'prompt' ? '„Éó„É≠„É≥„Éó„ÉàÁîüÊàê' : 'Ê≠åË©ûÁîüÊàê'}„ÅÆÁÑ°ÊñôÊû†„Çí‰Ωø„ÅÑÂàá„Çä„Åæ„Åó„Åü„ÄÇ<br>
                    „Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„ÅßÁÑ°Âà∂Èôê„Å´„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ
                </p>
                <div class="modal-actions">
                    <button onclick="showUpgradeModal(); closeLimitModal();" class="upgrade-btn">
                        „Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„ÇíË¶ã„Çã
                    </button>
                    <button onclick="closeLimitModal()" class="cancel-btn">
                        Èñâ„Åò„Çã
                    </button>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    modal.querySelector('.modal-backdrop').onclick = closeLimitModal;
}

// Close limit modal
function closeLimitModal() {
    const modal = document.querySelector('.limit-modal');
    if (modal) {
        modal.remove();
    }
}

// Add upgrade button to UI
function addUpgradeButton() {
    const upgradeContainer = document.getElementById('upgrade-container');
    if (upgradeContainer && currentUser) {
        checkSubscriptionStatus().then(subscription => {
            if (!subscription) {
                upgradeContainer.innerHTML = `
                    <button onclick="showUpgradeModal()" class="premium-btn">
                        <i class="fas fa-crown"></i>
                        „Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ
                    </button>
                `;
            } else {
                upgradeContainer.innerHTML = `
                    <div class="premium-badge">
                        <i class="fas fa-crown"></i>
                        „Éó„É¨„Éü„Ç¢„É†„É¶„Éº„Ç∂„Éº
                    </div>
                `;
            }
        });
    }
}

// Initialize Stripe when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Wait for Stripe library to load
    if (typeof window.Stripe !== 'undefined') {
        initStripe();
    } else {
        // Retry after a short delay
        setTimeout(() => {
            if (typeof window.Stripe !== 'undefined') {
                initStripe();
            }
        }, 1000);
    }
    
    // Check for payment success in URL
    const urlParams = new URLSearchParams(window.location.search);
    const sessionId = urlParams.get('session_id');
    if (sessionId) {
        handlePaymentSuccess(sessionId);
    }
});
    </script>

    <!-- „Éò„É´„Éó„É¢„Éº„ÉÄ„É´ -->
    <div id="help-modal" class="help-modal">
        <div class="help-content">
            <button class="close-help" onclick="closeHelp()">
                <i class="fas fa-times"></i>
            </button>
            
            <h2 class="text-3xl font-bold text-white mb-6 text-center">
                <i class="fas fa-info-circle text-blue-400 mr-3"></i>Suno AI Complete Builder ‰Ωø„ÅÑÊñπ„Ç¨„Ç§„Éâ
            </h2>
            
            <!-- Êõ≤„ÅÆ„Éó„É≠„É≥„Éó„Éà‰ΩúÊàê„É¢„Éº„Éâ -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-purple-400 mb-4 flex items-center">
                    <i class="fas fa-sliders-h mr-3"></i>üéµ Êõ≤„ÅÆ„Éó„É≠„É≥„Éó„Éà‰ΩúÊàê„É¢„Éº„Éâ
                </h3>
                <p class="text-gray-300 mb-4">Suno AI„Åß‰ΩøÁî®„Åô„ÇãÈü≥Ê•Ω„Éó„É≠„É≥„Éó„Éà„ÇíÁ∞°Âçò„Å´‰ΩúÊàê„Åß„Åç„Åæ„Åô„ÄÇ‰ª•‰∏ã„ÅÆÈ†ÜÁï™„ÅßÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö</p>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">1</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üé§ „Éú„Éº„Ç´„É´„Çø„Ç∞</h4>
                            <p class="text-gray-300">Ê≠åÂ£∞„ÅÆÁ®ÆÈ°û„ÇíÈÅ∏Êäû„Åó„Åæ„ÅôÔºàÁî∑ÊÄß„ÉªÂ•≥ÊÄß„ÉªÂ≠ê‰æõ„Éª„Ç≥„Éº„É©„Çπ„Å™„Å©Ôºâ</p>
                            <div class="bg-gray-700 p-3 rounded mt-2">
                                <code class="text-green-400">‰æã: Male Vocal, Female Vocal, Children's Choir</code>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">2</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">‚ú® „É†„Éº„Éâ„Éª„Çπ„Çø„Ç§„É´</h4>
                            <p class="text-gray-300">Ê•ΩÊõ≤„ÅÆÈõ∞Âõ≤Ê∞ó„ÇÑÊÑüÊÉÖ„ÇíÈÅ∏Êäû„Åó„Åæ„Åô</p>
                            <div class="bg-gray-700 p-3 rounded mt-2">
                                <code class="text-green-400">‰æã: Upbeat, Melancholic, Energetic, Peaceful</code>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">3</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üéµ „Ç∏„É£„É≥„É´</h4>
                            <p class="text-gray-300">Èü≥Ê•Ω„Ç∏„É£„É≥„É´„ÇíÈÅ∏Êäû„Åó„Åæ„ÅôÔºà1,180ÂÄã„ÅÆË±äÂØå„Å™„Ç∏„É£„É≥„É´„Åã„ÇâÈÅ∏ÊäûÂèØËÉΩÔºâ</p>
                            <div class="bg-gray-700 p-3 rounded mt-2">
                                <code class="text-green-400">‰æã: Pop, Rock, Jazz, Electronic, Classical</code>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">4</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">‚≠ê Ê≠åÊâã„Çπ„Çø„Ç§„É´</h4>
                            <p class="text-gray-300">ÁâπÂÆö„ÅÆ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„Çπ„Çø„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Åæ„ÅôÔºà139‰∫∫„ÅÆ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„Åã„ÇâÈÅ∏ÊäûÂèØËÉΩÔºâ</p>
                            <div class="bg-gray-700 p-3 rounded mt-2">
                                <code class="text-green-400">‰æã: Taylor Swift style, Ed Sheeran style, Adele style</code>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">5</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üìã „Éó„É≠„É≥„Éó„Éà„ÇíSuno„Å´„Ç≥„Éî„Éº</h4>
                            <p class="text-gray-300">ÁîüÊàê„Åï„Çå„Åü„Éó„É≠„É≥„Éó„Éà„Çí„Ç≥„Éî„Éº„Åó„Å¶„ÄÅSuno AI„Å´Ë≤º„Çä‰ªò„Åë„Åæ„Åô</p>
                            <div class="bg-gray-700 p-3 rounded mt-2">
                                <code class="text-green-400">ÂÆåÊàê‰æã: Male Vocal, Upbeat, Pop, Taylor Swift style, Japanese lyrics</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É† -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-indigo-400 mb-4 flex items-center">
                    <i class="fas fa-crown mr-3"></i>üé≠ ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É†
                </h3>
                <p class="text-gray-300 mb-4">È´òÂ∫¶„Å™AIÊ≠åË©ûÁîüÊàê„Ç∑„Çπ„ÉÜ„É†„Åß„ÄÅ„Éó„É≠„É¨„Éô„É´„ÅÆÊ≠åË©û„Çí‰ΩúÊàê„Åß„Åç„Åæ„ÅôÔºö</p>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">1</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üéõÔ∏è Ë©≥Á¥∞„Éë„É©„É°„Éº„ÇøË®≠ÂÆö</h4>
                            <p class="text-gray-300">Èü≥Ê•Ω„Ç∏„É£„É≥„É´„ÄÅ„ÉÜ„Éº„Éû„ÄÅÊÑüÊÉÖ„ÄÅË®ÄË™û„É¨„Éô„É´„Å™„Å©„ÇíÁ¥∞„Åã„ÅèË®≠ÂÆö</p>
                            <ul class="text-gray-400 mt-2 space-y-1">
                                <li>‚Ä¢ Âü∫Êú¨Ë®≠ÂÆö: „Ç∏„É£„É≥„É´„ÄÅ„ÉÜ„Éº„Éû„ÄÅÂØæË±°Âπ¥ÈΩ¢Â±§</li>
                                <li>‚Ä¢ ÊÑüÊÉÖË®≠ÂÆö: ‰∏ªË¶ÅÊÑüÊÉÖ„ÄÅÂº∑Â∫¶„ÄÅÂ§âÂåñ„Éë„Çø„Éº„É≥</li>
                                <li>‚Ä¢ Ë®ÄË™ûË®≠ÂÆö: „É¨„Éô„É´„ÄÅÊØîÂñ©‰ΩøÁî®Â∫¶„ÄÅÈüªÂæã„Éë„Çø„Éº„É≥</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">2</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üåê Â§öË®ÄË™ûÂØæÂøú</h4>
                            <p class="text-gray-300">4„Å§„ÅÆË®ÄË™û„ÅßÈ´òÂìÅË≥™„Å™Ê≠åË©û„ÇíÁîüÊàê</p>
                            <ul class="text-gray-400 mt-2 space-y-1">
                                <li>‚Ä¢ üá≠üá∞ Â∫ÉÊù±Ë™ûÔºàÁπÅ‰ΩìÂ≠óÔºâ</li>
                                <li>‚Ä¢ üá®üá≥ ‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÂ≠óÔºâ</li>
                                <li>‚Ä¢ üáØüáµ Êó•Êú¨Ë™û</li>
                                <li>‚Ä¢ üá∫üá∏ Ëã±Ë™û</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">3</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üìö ÊñáÂ≠¶‰ΩúÂìÅÂèÇÁÖßÊ©üËÉΩ</h4>
                            <p class="text-gray-300">Êó¢Â≠ò„ÅÆÊñáÂ≠¶‰ΩúÂìÅ„ÇíÂèÇËÄÉ„Å´„Åó„Å¶„ÄÅ„Çà„ÇäË±ä„Åã„Å™Ë°®Áèæ„ÇíÂÆüÁèæ</p>
                            <ul class="text-gray-400 mt-2 space-y-1">
                                <li>‚Ä¢ URLÂÖ•Âäõ: ÈùíÁ©∫ÊñáÂ∫´„ÄÅË©©„ÅÆ„Çµ„Ç§„Éà„Åã„ÇâÁõ¥Êé•ÂèÇÁÖß</li>
                                <li>‚Ä¢ „Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ: PDF„ÄÅWord„ÄÅ„ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´ÂØæÂøú</li>
                                <li>‚Ä¢ ‰ΩúÂìÅÊ§úÁ¥¢: ‰ΩúÂìÅÂêç„Éª‰ΩúËÄÖÂêç„ÅßÊ§úÁ¥¢</li>
                                <li>‚Ä¢ ÊñáÂ≠¶ÁöÑË¶ÅÁ¥†ÂàÜÊûê: Êñá‰Ωì„ÄÅË°®ÁèæÊäÄÊ≥ï„ÄÅË™ûÂΩôÁâπÊÄß„ÇíËá™ÂãïÂàÜÊûê</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">4</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üéº ProÊõ≤ÊßãÊàêË®≠ÂÆö</h4>
                            <p class="text-gray-300">Ê•ΩÊõ≤ÊßãÈÄ†„ÇíË©≥Á¥∞„Å´„Ç´„Çπ„Çø„Éû„Ç§„Ç∫</p>
                            <ul class="text-gray-400 mt-2 space-y-1">
                                <li>‚Ä¢ Intro„ÄÅVerse„ÄÅChorus„ÄÅBridge„ÄÅOutro</li>
                                <li>‚Ä¢ ÊßãÊàê„ÉÜ„É≥„Éó„É¨„Éº„ÉàÈÅ∏Êäû</li>
                                <li>‚Ä¢ ËøΩÂä†Ë¶ÅÁ¥†ÔºàPre-Chorus„ÄÅPost-ChorusÁ≠âÔºâ</li>
                                <li>‚Ä¢ ÁµÇ‰∫ÜÊñπÊ≥ï„ÅÆ„Ç´„Çπ„Çø„Éû„Ç§„Ç∫</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="help-step">
                    <div class="flex items-start">
                        <span class="step-number">5</span>
                        <div>
                            <h4 class="text-lg font-semibold text-white mb-2">üìä ÂìÅË≥™Ë©ï‰æ°„Ç∑„Çπ„ÉÜ„É†</h4>
                            <p class="text-gray-300">ÁîüÊàê„Åï„Çå„ÅüÊ≠åË©û„ÅÆÂìÅË≥™„Çí4„Å§„ÅÆÊåáÊ®ô„ÅßË©ï‰æ°</p>
                            <ul class="text-gray-400 mt-2 space-y-1">
                                <li>‚Ä¢ ÊÑüÊÉÖÁöÑ„Ç§„É≥„Éë„ÇØ„Éà: ËÅû„ÅçÊâã„Å∏„ÅÆÊÑüÊÉÖÁöÑ„Å™Ë®¥Ê±ÇÂäõ</li>
                                <li>‚Ä¢ Ë®ÄË™ûÁöÑÁæé„Åó„Åï: Ë°®Áèæ„ÅÆÁæé„Åó„Åï„Å®Ë©©ÁöÑ‰æ°ÂÄ§</li>
                                <li>‚Ä¢ Áã¨ÂâµÊÄß: „Ç™„É™„Ç∏„Éä„É™„ÉÜ„Ç£„Å®ÂâµÈÄ†ÊÄß</li>
                                <li>‚Ä¢ Èü≥Ê•ΩÁöÑÈÅ©ÂêàÊÄß: Ê•ΩÊõ≤„Å®„ÅÆË™øÂíåÊÄß</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ‰ΩøÁî®„ÅÆ„Ç≥„ÉÑ -->
            <div class="bg-gradient-to-r from-purple-900 to-indigo-900 p-6 rounded-lg">
                <h3 class="text-xl font-bold text-white mb-3">
                    <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>‰ΩøÁî®„ÅÆ„Ç≥„ÉÑ
                </h3>
                <ul class="text-gray-300 space-y-2">
                    <li>‚Ä¢ <strong>„Éó„É≠„É≥„Éó„Éà‰ΩúÊàê</strong>: Ë§áÊï∞„ÅÆË¶ÅÁ¥†„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Çã„Åì„Å®„Åß„ÄÅ„Çà„ÇäÂÖ∑‰ΩìÁöÑ„ÅßÈ≠ÖÂäõÁöÑ„Å™Ê•ΩÊõ≤„ÇíÁîüÊàê„Åß„Åç„Åæ„Åô</li>
                    <li>‚Ä¢ <strong>ProÊ≠åË©û„Ç∑„Çπ„ÉÜ„É†</strong>: „Éë„É©„É°„Éº„Çø„ÇíË™øÊï¥„Åó„Å¶‰ΩïÂ∫¶„ÇÇÁîüÊàê„Åó„ÄÅÊúÄÈÅ©„Å™Ê≠åË©û„ÇíË¶ã„Å§„Åë„Åæ„Åó„Çá„ÅÜ</li>
                    <li>‚Ä¢ <strong>ÊñáÂ≠¶‰ΩúÂìÅÂèÇÁÖß</strong>: Â•Ω„Åç„Å™Ë©©„ÇÑÂ∞èË™¨„ÇíÂèÇËÄÉ„Å´„Åô„Çã„Åì„Å®„Åß„ÄÅÁã¨Ëá™„ÅÆ„Çπ„Çø„Ç§„É´„Çí‰Ωú„Çå„Åæ„Åô</li>
                    <li>‚Ä¢ <strong>Â§öË®ÄË™ûÊ¥ªÁî®</strong>: Âêå„Åò„ÉÜ„Éº„Éû„Åß„ÇÇË®ÄË™û„Å´„Çà„Å£„Å¶Áï∞„Å™„ÇãË°®Áèæ„ÅåÊ•Ω„Åó„ÇÅ„Åæ„Åô</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
