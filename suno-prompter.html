<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suno AI Complete Builder 2025 - åŒ…æ‹¬çš„AIéŸ³æ¥½åˆ¶ä½œã‚·ã‚¹ãƒ†ãƒ </title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åŸºæœ¬è¨­å®š */
        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #e2e8f0;
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        /* ã‚³ãƒ³ãƒ†ãƒŠã®èƒŒæ™¯ */
        .container {
            background: rgba(15, 15, 35, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .genre-btn {
            background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 100%);
            transition: all 0.3s ease;
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #e2e8f0;
            padding: 8px 16px;
            margin: 4px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .genre-btn:hover {
            background: linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
            border-color: rgba(139, 92, 246, 0.6);
        }
        .genre-btn.selected {
            background: linear-gradient(135deg, #ec4899 0%, #f59e0b 100%);
            border-color: rgba(236, 72, 153, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
            color: #ffffff;
        }
        .artist-btn {
            background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
            transition: all 0.3s ease;
            border: 1px solid rgba(6, 182, 212, 0.3);
            color: #e2e8f0;
            padding: 8px 16px;
            margin: 4px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .artist-btn:hover {
            background: linear-gradient(135deg, #0284c7 0%, #0891b2 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(6, 182, 212, 0.4);
            border-color: rgba(6, 182, 212, 0.6);
        }
        .artist-btn.selected {
            background: linear-gradient(135deg, #f59e0b 0%, #eab308 100%);
            border-color: rgba(245, 158, 11, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
            color: #1f2937;
        }

        .tab-btn {
            background: rgba(30, 41, 59, 0.8);
            color: #cbd5e1;
            border: 1px solid rgba(71, 85, 105, 0.5);
            padding: 12px 24px;
            margin: 4px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        .tab-btn:hover {
            background: rgba(51, 65, 85, 0.9);
            color: #e2e8f0;
            border-color: rgba(139, 92, 246, 0.5);
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 100%);
            color: #ffffff;
            border-color: rgba(139, 92, 246, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }
        .lyrics-candidate {
            background: rgba(30, 41, 59, 0.6);
            border: 2px solid rgba(71, 85, 105, 0.5);
            border-radius: 8px;
            padding: 16px;
            margin: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            color: #e2e8f0;
        }
        .lyrics-candidate:hover {
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.2);
            background: rgba(51, 65, 85, 0.7);
        }
        .lyrics-candidate.selected {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
        }
        .search-box {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(71, 85, 105, 0.5);
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 16px;
            background: rgba(30, 41, 59, 0.6);
            color: #e2e8f0;
            backdrop-filter: blur(10px);
        }
        .search-box:focus {
            outline: none;
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
            background: rgba(51, 65, 85, 0.7);
        }
        .search-box::placeholder {
            color: #94a3b8;
        }
        .tab-content {
            scroll-margin-top: 20px;
        }
        #prompt-section {
            animation: slideIn 0.3s ease-out;
            cursor: default;
        }
        
        #prompt-section .drag-handle {
            cursor: move;
            touch-action: none;
            user-select: none;
        }
        
        #prompt-section.dragging {
            z-index: 1000;
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .mode-btn {
            position: relative;
            overflow: hidden;
        }
        .mode-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        .mode-btn.active::after {
            content: 'âœ“';
            position: absolute;
            top: 5px;
            right: 10px;
            background: white;
            color: #10b981;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* lyrics.htmlã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ« */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .typing-animation {
            border-right: 2px solid #4f46e5;
            animation: typing 2s steps(40, end), blink 0.75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink {
            from, to { border-color: transparent }
            50% { border-color: #4f46e5; }
        }
        .emotion-meter {
            height: 8px;
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #3b82f6 75%, #8b5cf6 100%);
            border-radius: 4px;
        }
        .generated-lyrics {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-left: 4px solid #4f46e5;
        }
        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .chart-container {
            height: 300px;
        }
        .emotion-visual {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }
        .wave-animation {
            position: absolute;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: wave 3s linear infinite;
        }
        @keyframes wave {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Proæ­Œè©ã‚·ã‚¹ãƒ†ãƒ ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .hover-scale:hover {
            transform: scale(1.02);
        }
        .section-separator {
            border-top: 2px solid rgba(139, 92, 246, 0.5);
            margin: 2rem 0;
        }
        .lyrics-output {
            background: linear-gradient(to right, rgba(30, 41, 59, 0.8), rgba(51, 65, 85, 0.6));
            border-left: 4px solid #8b5cf6;
            color: #e2e8f0;
        }
        .structure-part {
            border-left: 3px solid #10b981;
            background: rgba(16, 185, 129, 0.1);
            color: #e2e8f0;
        }
        .animate-pulse-soft {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ãƒ•ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
        select, input[type="text"], input[type="number"], input[type="range"], textarea {
            background: rgba(55, 65, 81, 0.8) !important;
            color: #e2e8f0 !important;
            border: 1px solid rgba(107, 114, 128, 0.5) !important;
        }
        select:focus, input:focus, textarea:focus {
            background: rgba(75, 85, 99, 0.9) !important;
            border-color: rgba(139, 92, 246, 0.6) !important;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2) !important;
        }
        
        /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ */
        input[type="checkbox"], input[type="radio"] {
            accent-color: #8b5cf6;
        }
        
        /* ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        button {
            transition: all 0.3s ease;
        }
        
        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ãƒ†ã‚­ã‚¹ãƒˆè‰² */
        .text-gray-600 {
            color: #d1d5db !important;
        }
        .text-gray-700 {
            color: #e5e7eb !important;
        }
        .text-gray-800 {
            color: #f3f4f6 !important;
        }
        
        /* ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚‚èª¿æ•´ */
        .border-blue-200 {
            border-color: rgba(139, 92, 246, 0.4) !important;
        }
        .border-green-200 {
            border-color: rgba(16, 185, 129, 0.4) !important;
        }
        .border-purple-200 {
            border-color: rgba(168, 85, 247, 0.4) !important;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold text-center mb-8 text-white">
            <i class="fas fa-music mr-3 text-purple-400"></i>Suno AI Complete Builder 2025
        </h1>
        <p class="text-center text-lg opacity-75 mb-8 text-gray-300">åŒ…æ‹¬çš„AIéŸ³æ¥½åˆ¶ä½œã‚·ã‚¹ãƒ†ãƒ  - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆã‹ã‚‰é«˜åº¦ãªæ­Œè©ç”Ÿæˆã¾ã§</p>
        
        <!-- ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½é¸æŠ -->
        <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-4 mb-6">
            <h2 class="text-xl font-bold mb-3 text-center text-white">ğŸ¯ ä½œæˆãƒ¢ãƒ¼ãƒ‰é¸æŠ</h2>
            <div class="flex flex-wrap justify-center gap-4">
                <button id="prompt-mode-btn" onclick="setMode('prompt')" class="mode-btn bg-purple-500 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-all active">
                    <i class="fas fa-sliders-h mr-2"></i>æ›²ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ
                </button>
                <button id="pro-lyrics-mode-btn" onclick="setMode('pro-lyrics')" class="mode-btn bg-indigo-600 hover:bg-indigo-800 text-white font-bold py-3 px-6 rounded-lg text-lg transition-all">
                    <i class="fas fa-crown mr-2"></i>Proæ­Œè©ã‚·ã‚¹ãƒ†ãƒ 
                </button>
            </div>
        </div>
        
        <!-- è¨€èªé¸æŠï¼ˆãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼‰ -->
        <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4 text-white">ğŸŒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨€èªé¸æŠ</h2>
            <div class="flex flex-wrap justify-center">
                <button class="genre-btn selected" onclick="selectPromptLanguage(this, 'cantonese')" id="prompt-lang-cantonese">ğŸ‡­ğŸ‡° åºƒæ±èª(ç¹ä½“å­—)</button>
                <button class="genre-btn" onclick="selectPromptLanguage(this, 'chinese')" id="prompt-lang-chinese">ğŸ‡¨ğŸ‡³ ä¸­å›½èª(ç°¡ä½“å­—)</button>
                <button class="genre-btn" onclick="selectPromptLanguage(this, 'japanese')" id="prompt-lang-japanese">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
                <button class="genre-btn" onclick="selectPromptLanguage(this, 'english')" id="prompt-lang-english">ğŸ‡ºğŸ‡¸ è‹±èª</button>
            </div>
        </div>
        
        <!-- æ›²ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="prompt-creation-section">
            <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="flex flex-wrap justify-center mb-6">
                <button class="tab-btn active" onclick="showTab('vocal')">ğŸ¤ ãƒœãƒ¼ã‚«ãƒ«ã‚¿ã‚°</button>
                <button class="tab-btn" onclick="showTab('moods')">âœ¨ ãƒ ãƒ¼ãƒ‰ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«</button>
                <button class="tab-btn" onclick="showTab('genres')">ğŸµ ã‚¸ãƒ£ãƒ³ãƒ«</button>
                <button class="tab-btn" onclick="showTab('artists')">â­ æ­Œæ‰‹ã‚¹ã‚¿ã‚¤ãƒ«</button>
            </div>

            <!-- ãƒœãƒ¼ã‚«ãƒ«ã‚¿ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="vocal-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12">
                <h2 class="text-2xl font-bold mb-4 text-white">ğŸ¤ ãƒœãƒ¼ã‚«ãƒ«ã‚¿ã‚°</h2>
                <div class="flex flex-wrap">
                    <button class="genre-btn" onclick="toggleSelection(this, 'Male Vocal')" data-translation="ç”·æ€§ãƒœãƒ¼ã‚«ãƒ«">Male Vocal<br><small>ç”·æ€§ãƒœãƒ¼ã‚«ãƒ«</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Female Vocal')" data-translation="å¥³æ€§ãƒœãƒ¼ã‚«ãƒ«">Female Vocal<br><small>å¥³æ€§ãƒœãƒ¼ã‚«ãƒ«</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Duet')" data-translation="ãƒ‡ãƒ¥ã‚¨ãƒƒãƒˆ">Duet<br><small>ãƒ‡ãƒ¥ã‚¨ãƒƒãƒˆ</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Choir')" data-translation="åˆå”±">Choir<br><small>åˆå”±</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Whisper')" data-translation="ã•ã•ã‚„ã">Whisper<br><small>ã•ã•ã‚„ã</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Spoken Word')" data-translation="èªã‚Š">Spoken Word<br><small>èªã‚Š</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Harmonies')" data-translation="ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼">Harmonies<br><small>ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼</small></button>
                    <button class="genre-btn" onclick="toggleSelection(this, 'Vulnerable Vocals')" data-translation="æ„Ÿæƒ…çš„ãªæ­Œå£°">Vulnerable Vocals<br><small>æ„Ÿæƒ…çš„ãªæ­Œå£°</small></button>
                </div>
            </div>

            <!-- ãƒ ãƒ¼ãƒ‰ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="moods-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12" style="display: none;">
                <h2 class="text-2xl font-bold mb-4 text-white">âœ¨ ãƒ ãƒ¼ãƒ‰ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«</h2>
                <div id="moods-container"></div>
            </div>

            <!-- ã‚¸ãƒ£ãƒ³ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="genres-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12" style="display: none;">
                <h2 class="text-2xl font-bold mb-4 text-white">ğŸµ éŸ³æ¥½ã‚¸ãƒ£ãƒ³ãƒ« <span id="genres-count" class="text-lg text-gray-400"></span></h2>
                <input type="text" class="search-box" placeholder="ã‚¸ãƒ£ãƒ³ãƒ«ã‚’æ¤œç´¢..." onkeyup="searchGenres(this.value)">
                <div id="genres-container"></div>
            </div>

            <!-- æ­Œæ‰‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="artists-section" class="tab-content bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl border border-gray-700 p-6 mb-12" style="display: none;">
                <h2 class="text-2xl font-bold mb-4 text-white">â­ æ­Œæ‰‹ã‚¹ã‚¿ã‚¤ãƒ« <span id="artists-count" class="text-lg text-gray-400"></span></h2>
                <input type="text" class="search-box" placeholder="æ­Œæ‰‹ã‚’æ¤œç´¢..." onkeyup="searchArtists(this.value)">
                <div id="artists-container" class="flex flex-wrap"></div>
            </div>


        </div>

        <!-- ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºï¼ˆãƒ•ãƒ­ãƒ¼ãƒˆï¼‰ -->
        <div id="prompt-section" class="fixed bottom-4 right-4 left-4 md:left-auto bg-gray-900 bg-opacity-95 backdrop-filter backdrop-blur-lg rounded-lg shadow-2xl p-6 max-w-lg z-50 border-2 border-purple-500" style="display: none;">
            <div class="flex justify-between items-center mb-4 drag-handle">
                <h2 class="text-xl font-bold text-white">ğŸ›ï¸ ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h2>
                <button onclick="document.getElementById('prompt-section').style.display='none'" class="text-gray-400 hover:text-gray-200">
                    <i class="fas fa-times-circle text-xl"></i>
                </button>
            </div>
            <div class="bg-gray-800 bg-opacity-80 p-4 rounded-lg mb-4 max-h-40 overflow-y-auto border border-gray-600">
                <pre id="generated-prompt" class="whitespace-pre-wrap text-sm font-medium text-gray-200">é¸æŠã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</pre>
            </div>
            <div class="flex gap-2">
                <button onclick="copyPrompt()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex-1 transition-all">
                    <i class="fas fa-copy mr-2"></i>ã‚³ãƒ”ãƒ¼
                </button>
                <button onclick="clearPrompt()" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded flex-1 transition-all">
                    <i class="fas fa-times mr-2"></i>ã‚¯ãƒªã‚¢
                </button>
            </div>
        </div>





        <!-- Proæ­Œè©ã‚·ã‚¹ãƒ†ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="pro-lyrics-creation-section" style="display: none;">
            <!-- æ­Œè©ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆæœ€å„ªå…ˆãƒ»ãƒˆãƒƒãƒ—é…ç½®ï¼‰ -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 hover-scale transition-transform duration-300 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-sliders-h text-purple-400 mr-3"></i>Proæ­Œè©ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- åŸºæœ¬è¨­å®š -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-200 border-b-2 border-purple-400 pb-2">åŸºæœ¬è¨­å®š</h3>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">éŸ³æ¥½ã‚¸ãƒ£ãƒ³ãƒ«</label>
                                <select id="pro-genre" class="w-full p-3 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-gray-700 text-white">
                                    <option>ãƒãƒƒãƒ—ã‚¹</option>
                                    <option>ãƒãƒ©ãƒ¼ãƒ‰</option>
                                    <option>ãƒ­ãƒƒã‚¯</option>
                                    <option>ãƒ•ã‚©ãƒ¼ã‚¯</option>
                                    <option>R&B</option>
                                    <option>ã‚«ãƒ³ãƒˆãƒªãƒ¼</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ä¸»è¦ãƒ†ãƒ¼ãƒ</label>
                                <input type="text" id="pro-theme" placeholder="ä¾‹ï¼šæ‹æ„›ã€å‹æƒ…ã€æˆé•·..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">å¯¾è±¡å¹´é½¢å±¤</label>
                                <select id="pro-age" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option>å…¨å¹´é½¢</option>
                                    <option>10ä»£</option>
                                    <option>20ä»£</option>
                                    <option>30ä»£ä»¥ä¸Š</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- æ„Ÿæƒ…è¨­å®š -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-700 border-b-2 border-green-200 pb-2">æ„Ÿæƒ…è¨­å®š</h3>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">ä¸»è¦æ„Ÿæƒ…</label>
                                <select id="pro-emotion" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option>å–œã³</option>
                                    <option>æ‚²ã—ã¿</option>
                                    <option>å¸Œæœ›</option>
                                    <option>éƒ·æ„</option>
                                    <option>æ„›æƒ…</option>
                                    <option>æ†§ã‚Œ</option>
                                    <option>ä¸å®‰</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">æ„Ÿæƒ…ã®å¼·åº¦</label>
                                <input type="range" id="pro-emotion-intensity" min="1" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>ç©ã‚„ã‹</span>
                                    <span>å¼·çƒˆ</span>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">æ„Ÿæƒ…ã®å¤‰åŒ–</label>
                                <select id="pro-emotion-change" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option>ä¸€å®š</option>
                                    <option>å¾ã€…ã«ä¸Šæ˜‡</option>
                                    <option>å¾ã€…ã«ä¸‹é™</option>
                                    <option>èµ·ä¼ã‚ã‚Š</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- è¨€èªãƒ»è¡¨ç¾è¨­å®š -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-700 border-b-2 border-purple-200 pb-2">è¨€èªãƒ»è¡¨ç¾è¨­å®š</h3>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">è¨€èªãƒ¬ãƒ™ãƒ«</label>
                                <select id="pro-language-level" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>æ—¥å¸¸èª</option>
                                    <option>è©©çš„è¡¨ç¾</option>
                                    <option>æ ¼èª¿é«˜ã„</option>
                                    <option>ç¾ä»£çš„</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">æ¯”å–©ã®ä½¿ç”¨åº¦</label>
                                <input type="range" id="pro-metaphor" min="1" max="10" value="6" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>ç›´æ¥çš„</span>
                                    <span>æ¯”å–©çš„</span>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">éŸ»å¾‹ãƒ‘ã‚¿ãƒ¼ãƒ³</label>
                                <select id="pro-rhythm" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option>è‡ªç„¶ãªæµã‚Œ</option>
                                    <option>å®šå‹éŸ»å¾‹</option>
                                    <option>è‡ªç”±è©©</option>
                                    <option>ä¼çµ±çš„</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è¿½åŠ è¨­å®š -->
                    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-2">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ»ãƒ•ãƒ¬ãƒ¼ã‚º</label>
                            <textarea id="pro-keywords" placeholder="å«ã‚ãŸã„ç‰¹å®šã®è¨€è‘‰ã‚„ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å…¥åŠ›..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent h-24"></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-2">é¿ã‘ãŸã„è¡¨ç¾</label>
                            <textarea id="pro-avoid" placeholder="ä½¿ç”¨ã‚’é¿ã‘ãŸã„è¡¨ç¾ã‚’å…¥åŠ›..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent h-24"></textarea>
                        </div>
                    </div>
                    
                    <!-- ç”Ÿæˆãƒœã‚¿ãƒ³ -->
                    <div class="mt-8 text-center">
                        <button onclick="generateProLyrics()" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-12 py-4 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                            <i class="fas fa-magic mr-2"></i>Proæ­Œè©ã‚’ç”Ÿæˆã™ã‚‹
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- ç”Ÿæˆã•ã‚ŒãŸæ­Œè©è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-file-alt text-green-400 mr-3"></i>ç”Ÿæˆã•ã‚ŒãŸProæ­Œè©
                    </h2>
                    
                    <div id="proLyricsOutput" class="lyrics-output p-6 rounded-lg min-h-96">
                        <div class="text-center text-gray-500 animate-pulse-soft">
                            <i class="fas fa-music text-4xl mb-4"></i>
                            <p class="text-lg">ä¸Šè¨˜ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã—ã¦ã€ŒProæ­Œè©ã‚’ç”Ÿæˆã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„</p>
                        </div>
                    </div>
                    
                    <!-- æ­Œè©è©•ä¾¡è¡¨ç¤º -->
                    <div id="proLyricsEvaluation" class="mt-6 hidden">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Proæ­Œè©å“è³ªè©•ä¾¡</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-600" id="proEmotionScore">85</div>
                                <div class="text-sm text-gray-600">æ„Ÿæƒ…çš„ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-600" id="proLanguageScore">92</div>
                                <div class="text-sm text-gray-600">è¨€èªçš„ç¾ã—ã•</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600" id="proOriginalityScore">78</div>
                                <div class="text-sm text-gray-600">ç‹¬å‰µæ€§</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-red-600" id="proMusicalScore">89</div>
                                <div class="text-sm text-gray-600">éŸ³æ¥½çš„é©åˆæ€§</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <div class="section-separator"></div>
            
            <!-- æ›²æ§‹æˆè¨­å®š -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-list-ol text-orange-400 mr-3"></i>Proæ›²æ§‹æˆè¨­å®š
                    </h2>
                    
                    <div class="mb-6">
                        <p class="text-gray-600 mb-4">ç¾åœ¨ã®æ§‹æˆï¼ˆä¸€èˆ¬çš„ãªãƒãƒƒãƒ—ã‚¹æ§‹æˆãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã•ã‚Œã¦ã„ã¾ã™ï¼‰</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="space-y-3">
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Introï¼ˆã‚¤ãƒ³ãƒˆãƒ­ï¼‰</span>
                                        <span class="text-sm text-gray-500">8å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">æ¥½æ›²ã®å°å…¥éƒ¨åˆ†</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Verse 1ï¼ˆãƒ´ã‚¡ãƒ¼ã‚¹1ï¼‰</span>
                                        <span class="text-sm text-gray-500">16å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">ç‰©èªã®è¨­å®šãƒ»å°å…¥</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Chorusï¼ˆã‚³ãƒ¼ãƒ©ã‚¹ãƒ»ã‚µãƒ“ï¼‰</span>
                                        <span class="text-sm text-gray-500">16å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">æ¥½æ›²ã®ä¸­å¿ƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Verse 2ï¼ˆãƒ´ã‚¡ãƒ¼ã‚¹2ï¼‰</span>
                                        <span class="text-sm text-gray-500">16å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">ç‰©èªã®å±•é–‹ãƒ»ç™ºå±•</p>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Chorusï¼ˆã‚³ãƒ¼ãƒ©ã‚¹ãƒ»ã‚µãƒ“ï¼‰</span>
                                        <span class="text-sm text-gray-500">16å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¼·èª¿</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Bridgeï¼ˆãƒ–ãƒªãƒƒã‚¸ï¼‰</span>
                                        <span class="text-sm text-gray-500">8å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">è»¢æ›ãƒ»å¤‰åŒ–éƒ¨åˆ†</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Chorusï¼ˆæœ€çµ‚ã‚µãƒ“ï¼‰</span>
                                        <span class="text-sm text-gray-500">16å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">ã‚¯ãƒ©ã‚¤ãƒãƒƒã‚¯ã‚¹</p>
                                </div>
                                
                                <div class="structure-part p-4 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Outroï¼ˆã‚¢ã‚¦ãƒˆãƒ­ï¼‰</span>
                                        <span class="text-sm text-gray-500">8å°ç¯€</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-1">æ¥½æ›²ã®çµ‚çµ</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ§‹æˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º -->
                    <div class="mt-8">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">æ§‹æˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">æ§‹æˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</label>
                                <select id="pro-structure-template" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option>æ¨™æº–ãƒãƒƒãƒ—ã‚¹</option>
                                    <option>ãƒãƒ©ãƒ¼ãƒ‰æ§‹æˆ</option>
                                    <option>ãƒ­ãƒƒã‚¯æ§‹æˆ</option>
                                    <option>ãƒ•ã‚©ãƒ¼ã‚¯æ§‹æˆ</option>
                                    <option>ã‚«ã‚¹ã‚¿ãƒ </option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">è¿½åŠ è¦ç´ </label>
                                <select id="pro-additional-elements" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option>ãªã—</option>
                                    <option>Guitar Solo</option>
                                    <option>Piano Solo</option>
                                    <option>Instrumental</option>
                                    <option>Break</option>
                                    <option>Crescendo</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">çµ‚äº†æ–¹æ³•</label>
                                <select id="pro-ending" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                                    <option>é€šå¸¸çµ‚äº†</option>
                                    <option>Fade Out</option>
                                    <option>çªç„¶çµ‚äº†</option>
                                    <option>ãƒªãƒ”ãƒ¼ãƒˆ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <button onclick="applyProStructureChanges()" class="bg-orange-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors duration-300">
                                <i class="fas fa-sync-alt mr-2"></i>æ§‹æˆã‚’é©ç”¨ã—ã¦Proæ­Œè©ã‚’å†ç”Ÿæˆ
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            
            <div class="section-separator"></div>
            
            <!-- æ–‡å­¦ä½œå“å‚ç…§æ©Ÿèƒ½ -->
            <section class="mb-12">
                <div class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg card-shadow p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-book text-indigo-400 mr-3"></i>æ–‡å­¦ä½œå“å‚ç…§æ©Ÿèƒ½
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- URLå…¥åŠ› -->
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-indigo-400 transition-colors">
                            <i class="fas fa-link text-3xl text-indigo-600 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">URLå…¥åŠ›</h3>
                            <p class="text-sm text-gray-600 mb-4">é’ç©ºæ–‡åº«ã€è©©ã®ã‚µã‚¤ãƒˆãªã©ã‹ã‚‰ç›´æ¥å‚ç…§</p>
                            <input type="url" id="literary-url" placeholder="https://www.aozora.gr.jp/..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent mb-3">
                            <button onclick="analyzeURL()" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                                <i class="fas fa-search mr-2"></i>åˆ†æé–‹å§‹
                            </button>
                        </div>
                        
                        <!-- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors">
                            <i class="fas fa-upload text-3xl text-green-600 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
                            <p class="text-sm text-gray-600 mb-4">PDFã€Wordã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</p>
                            <input type="file" id="literary-file" accept=".txt,.pdf,.docx" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent mb-3">
                            <button onclick="analyzeFile()" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-file-alt mr-2"></i>ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æ
                            </button>
                        </div>
                        
                        <!-- ä½œå“æ¤œç´¢ -->
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-400 transition-colors">
                            <i class="fas fa-search text-3xl text-purple-600 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">ä½œå“æ¤œç´¢</h3>
                            <p class="text-sm text-gray-600 mb-4">ä½œå“åãƒ»ä½œè€…åã§æ¤œç´¢</p>
                            <input type="text" id="literary-search" placeholder="ä½œå“åãƒ»ä½œè€…å..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent mb-3">
                            <button onclick="searchWork()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                <i class="fas fa-search mr-2"></i>æ¤œç´¢
                            </button>
                        </div>
                    </div>
                    
                    <!-- åˆ†æçµæœè¡¨ç¤º -->
                    <div id="proLiteraryAnalysis" class="mt-8 hidden">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">æ–‡å­¦çš„è¦ç´ åˆ†æçµæœ</h3>
                        <div class="bg-gray-50 rounded-lg p-6">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <h4 class="font-medium text-gray-700 mb-2">æ–‡ä½“ç‰¹å¾´</h4>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li>â€¢ å¤å…¸çš„ã§æ ¼èª¿é«˜ã„</li>
                                        <li>â€¢ å™æƒ…çš„ãªè¡¨ç¾</li>
                                        <li>â€¢ ç°¡æ½”ã§å°è±¡çš„</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-700 mb-2">è¡¨ç¾æŠ€æ³•</h4>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li>â€¢ å­£ç¯€ã®æ¯”å–©</li>
                                        <li>â€¢ æ„Ÿè¦šçš„æå†™</li>
                                        <li>â€¢ è±¡å¾´çš„è¡¨ç¾</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-700 mb-2">èªå½™ç‰¹æ€§</h4>
                                    <ul class="text-sm text-gray-600 space-y-1">
                                        <li>â€¢ è©©çš„èªå½™å¤šç”¨</li>
                                        <li>â€¢ æƒ…ç·’çš„è¡¨ç¾è±Šå¯Œ</li>
                                        <li>â€¢ éŸ»å¾‹çš„é…æ…®</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="mt-6 text-center">
                                <button onclick="applyLiteraryElements()" class="bg-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors">
                                    <i class="fas fa-magic mr-2"></i>ã“ã®è¦ç´ ã‚’Proæ­Œè©ã«é©ç”¨
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ä½¿ç”¨ã‚¬ã‚¤ãƒ‰ -->
            <section class="mb-12">
                <div class="bg-gradient-to-r from-gray-800 to-gray-900 bg-opacity-80 backdrop-filter backdrop-blur-lg rounded-lg p-8 border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-info-circle text-blue-400 mr-3"></i>Proæ­Œè©ã‚·ã‚¹ãƒ†ãƒ ä½¿ç”¨ã‚¬ã‚¤ãƒ‰
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-3">åŸºæœ¬çš„ãªä½¿ç”¨æ‰‹é †</h3>
                            <ol class="space-y-2 text-gray-600">
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">1</span>
                                    Proæ­Œè©ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è©³ç´°è¨­å®š
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">2</span>
                                    ã€ŒProæ­Œè©ã‚’ç”Ÿæˆã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">3</span>
                                    ç”Ÿæˆã•ã‚ŒãŸProæ­Œè©ã‚’ç¢ºèªãƒ»è©•ä¾¡
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">4</span>
                                    Proæ›²æ§‹æˆã‚’è©³ç´°èª¿æ•´
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">5</span>
                                    æ–‡å­¦ä½œå“å‚ç…§ã§è¡¨ç¾ã‚’è±Šã‹ã«
                                </li>
                            </ol>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-3">Proæ­Œè©ã®ã‚³ãƒ„</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    å…·ä½“çš„ãªãƒ†ãƒ¼ãƒã‚„ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®š
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    æ„Ÿæƒ…ã®å¼·åº¦ã¨å¤‰åŒ–ã‚’ç´°ã‹ãèª¿æ•´
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    ã‚¸ãƒ£ãƒ³ãƒ«ã«å¿œã˜ãŸè¨€èªãƒ¬ãƒ™ãƒ«ã‚’é¸æŠ
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    æ–‡å­¦ä½œå“å‚ç…§ã§ç‹¬å‰µçš„ãªè¡¨ç¾ã‚’è¿½åŠ 
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2 mt-1"></i>
                                    æ›²æ§‹æˆã‚’éŸ³æ¥½ã‚¸ãƒ£ãƒ³ãƒ«ã«åˆã‚ã›ã¦èª¿æ•´
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // lyrics.htmlã‹ã‚‰çµ±åˆã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«æ­Œè©ãƒ‡ãƒ¼ã‚¿
        const sampleLyrics = {
            'joy': `é’ç©ºã«éŸ¿ã ç¬‘ã„å£°
å¸Œæœ›ã®å…‰ãŒ å¿ƒã‚’ç…§ã‚‰ã™
æ–°ã—ã„ä¸€æ­© è¸ã¿å‡ºãã†
æ˜æ—¥ã¸ã®æ‰‰ é–‹ã‹ã‚Œã¦ã‚‹

ã‚­ãƒ©ã‚­ãƒ©ã¨è¼ã ç¬é–“ã‚’
å¤§åˆ‡ã«èƒ¸ã« æŠ±ãã—ã‚ã¦
ã¿ã‚“ãªã§æ­ŒãŠã† ã“ã®æ­Œã‚’
å¹¸ã›ãªæ™‚é–“ æ°¸é ã«`,
            
            'sadness': `é›¨ç²’ãŒé ¬ã‚’ ä¼ã„è½ã¡ã¦
æ€ã„å‡ºã®ä¸­ã« å›ãŒã„ã‚‹
ã‚‚ã†æˆ»ã‚Œãªã„ ã‚ã®æ—¥ã€…ã«
å¿ƒã¯ä»Šã‚‚ æºã‚Œã¦ã„ã‚‹

æ¡œã®èŠ±ã³ã‚‰ èˆã„æ•£ã£ã¦
æ™‚ã®æµã‚Œã« èº«ã‚’ä»»ã›
æ¶™ã®å‘ã“ã†ã« è¦‹ãˆã‚‹ã®ã¯
æ–°ã—ã„å¸Œæœ›ã® å…‰ã‹ãª`,
            
            'love': `å›ã®ç¬‘é¡”ã« å¿ƒå¥ªã‚ã‚Œã¦
ã“ã®æƒ³ã„ã‚’ ã©ã†ä¼ãˆã‚ˆã†
æ˜Ÿç©ºã®ä¸‹ã§ äºŒäººãã‚Š
æ°¸é ã‚’èª“ã† ã“ã®ç¬é–“

æ‰‹ã‚’å–ã‚Šåˆã£ã¦ æ­©ã‚‚ã†
ã©ã‚“ãªå›°é›£ã‚‚ ä¹—ã‚Šè¶Šãˆã¦
æ„›ã®åŠ›ã§ çµã°ã‚ŒãŸ
å¥‡è·¡ã®ç‰©èª å§‹ã¾ã‚‹ã‚ˆ`,
            
            'nostalgia': `å¤•ç„¼ã‘ç©ºã« éŸ¿ãé˜ã®éŸ³
ã‚ã®é ƒã®åƒ•ã‚‰ æ€ã„å‡ºã™
æ ¡èˆã®å½±ãŒ é•·ãä¼¸ã³ã¦
é’æ˜¥ã®æ—¥ã€… ã‚ˆã¿ãŒãˆã‚‹

å‹é”ã®å£°ãŒ èã“ãˆã¦ãã‚‹
æ‡ã‹ã—ã„é¢¨ãŒ é ¬ã‚’æ’«ã§
æ™‚ã¯éãã¦ã‚‚ å¤‰ã‚ã‚‰ãªã„
å¿ƒã®å¥¥ã® å®ç‰©`
        };

        // ãƒãƒ£ãƒ¼ãƒˆåˆæœŸåŒ–å¤‰æ•°
        let emotionChart, linguisticChart, qualityChart;

        // ãƒ‡ãƒ¼ã‚¿å®šç¾©
        const artistStyles = {
            "Drake": "Hip-hop, trap, laid-back male vocals, ambient beats",
            "Taylor Swift": "Pop, Alternative Folk, Emotional, female vocals",
            "BTS": "K-Pop, Anthemic, Dance, Dynamic",
            "Billie Eilish": "Pop, Dark, Minimal, female vocals",
            "The Weeknd": "RnB, Dark, Cinematic, male vocals",
            "Ariana Grande": "Pop, Dance Pop, Ethereal, female vocals",
            "BeyoncÃ©": "RnB, Anthemic, Danceable, female vocals",
            "Kendrick Lamar": "HipHop, Lyrical, Storytelling, male vocals",
            "Lady Gaga": "Pop, Theatrical, Dance, female vocals",
            "Jay-Z": "HipHop, Aggressive, Storytelling, male vocals",
            "Rihanna": "RnB, Dance Pop, Festive, female vocals",
            "Kanye West": "HipHop, Progressive, Eclectic, male vocals",
            "Justin Bieber": "Pop, Danceable, Chillwave, male vocals",
            "Katy Perry": "Pop, Glitter, Festive, female vocals",
            "Metallica": "Thrash metal, aggressive riffs, pounding drums, male vocals",
            "AC/DC": "Hard rock, crunchy guitar riffs, raspy male vocals, driving rhythm",
            "Madonna": "Dance Pop, High-NRG, female vocals",
            "David Bowie": "70s British Rock, Art, Eclectic, male vocals",
            "Bob Dylan": "Folk, Storytelling, Acoustic Guitar, male vocals",
            "Post Malone": "Rap, Ethereal, Ambient, male vocals",
            "Bruno Mars": "Funk-pop blend, groovy rhythms, male vocals, danceable",
            "Ed Sheeran": "Folk-pop, acoustic guitar loops, male vocals, mellow tone",
            "Adele": "Soul, Emotional, Torch-Lounge, female vocals",
            "Queen": "Rock, Operatic, Theatrical, Male Vocals",
            "The Beatles": "60s British Pop, Classic, Rock",
            "Led Zeppelin": "Hard Rock, Blues Rock, Epic",
            "Pink Floyd": "80s Rock, Progressive, Atmospheric",
            "Michael Jackson": "80s Pop, Dance, Iconic, male vocals",
            "Prince": "Funk, Eclectic, Glam, male vocals",
            "Elvis Presley": "50s Rock, Hero Theme, male vocals",
            "Frank Sinatra": "1940s big band, Lounge Singer, male vocals",
            "Aretha Franklin": "Soul, Gospel, Powerful, female vocals",
            "Whitney Houston": "Pop, RnB, Emotional, female vocals",
            "Stevie Wonder": "Soul, Funk, Joyful, male vocals",
            "Bob Marley": "Reggae, Peaceful, Soulful, male vocals",
            "Nirvana": "Grunge, Dark, Raw, Male Vocals",
            "Radiohead": "Alternative Rock, Experimental, Atmospheric",
            "Coldplay": "Atmospheric alt-rock, ambient, male vocals, emotional piano",
            "Green Day": "Punk Rock, Aggressive, Youthful",
            "Red Hot Chili Peppers": "Funk rock, slap bass, male vocals, energetic",
            "Foo Fighters": "Rock, Alternative, Energetic",
            "Linkin Park": "Rock, Nu Metal, Emotional",
            "Imagine Dragons": "Rock, Anthemic, Emotion",
            "The Rolling Stones": "Rock, Blues Rock, Classic",
            "U2": "Rock, Anthemic, Atmospheric, male vocals",
            "Bon Jovi": "Rock, Anthem, Stadium, male vocals",
            "Aerosmith": "Rock, Hard Rock, Classic",
            "Guns N' Roses": "Hard Rock, Raw, Aggressive, male vocals",
            "Daft Punk": "Electronic, Dance, Futuristic",
            "Calvin Harris": "EDM, Dance, Festive, male vocals",
            "Skrillex": "Dubstep, Electronic, Intense, male vocals",
            "Deadmau5": "Electronic, House, Progressive",
            "The Chainsmokers": "EDM, Dance, Party",
            "Marshmello": "EDM, Dance, Happy",
            "Avicii": "EDM, Progressive House, Uplifting",
            "TiÃ«sto": "Trance, Progressive, Electronic",
            "Martin Garrix": "Big Room House, Festival, Electronic",
            "Swedish House Mafia": "Progressive House, Festival, Electronic",
            "Fleetwood Mac": "Classic rock, mellow harmonies, emotional, 70s vibe",
            "The Eagles": "Rock, Country Rock, Harmonious",
            "The Doors": "Rock, Psychedelic, Mysterious",
            "Jimi Hendrix": "Rock, Psychedelic, Guitar Virtuoso, male vocals",
            "Janis Joplin": "Rock, Blues Rock, Raw Emotion, female vocals",
            "The Who": "Rock, Hard Rock, Theatrical",
            "Black Sabbath": "Heavy Metal, Dark, Pioneering",
            "Iron Maiden": "Heavy Metal, Epic, Theatrical",
            "Judas Priest": "Heavy Metal, Power, Leather",
            "Ozzy Osbourne": "Heavy Metal, Dark, Theatrical, male vocals",
            "Deep Purple": "Hard Rock, Progressive, Classic",
            "Rainbow": "Hard Rock, Fantasy, Epic",
            "Dio": "Heavy Metal, Fantasy, Powerful",
            "Slayer": "Thrash Metal, Aggressive, Dark",
            "Megadeth": "Thrash Metal, Technical, Aggressive",
            "Anthrax": "Thrash Metal, Crossover, Energetic",
            "Testament": "Thrash Metal, Bay Area, Aggressive",
            "Pantera": "Groove Metal, Heavy, Aggressive",
            "System of a Down": "Metal, Political, Eccentric",
            "Tool": "Progressive Metal, Complex, Dark",
            "A Perfect Circle": "Alternative Metal, Atmospheric, Dark",
            "Nine Inch Nails": "Industrial, Dark, Electronic",
            "Ministry": "Industrial Metal, Aggressive, Political",
            "Rammstein": "Industrial Metal, German, Theatrical",
            "Marilyn Manson": "Industrial Metal, Shock Rock, Dark",
            "Rob Zombie": "Industrial Metal, Horror, Theatrical",
            "Alice Cooper": "Shock Rock, Theatrical, Classic Rock",
            "KISS": "Hard Rock, Glam, Theatrical",
            "Def Leppard": "Hard Rock, Melodic, 80s",
            "Whitesnake": "Hard Rock, Blues Rock, 80s",
            "Europe": "Hard Rock, Melodic, 80s",
            "Scorpions": "Hard Rock, German, Melodic",
            "Motley Crue": "Glam Metal, Party, 80s",
            // è¿½åŠ ã®ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
            "Tim McGraw": "Country, Traditional, Male Vocals",
            "Elton John": "Pop Rock, Piano, Theatrical, Male Vocals",
            "Dolly Parton": "Country, Traditional, Female Vocals",
            "Maroon 5": "Pop Rock, Funk, Male Vocals",
            "Shakira": "Latin Pop, Dance, Female Vocals",
            "Dua Lipa": "Pop, Dance, Modern, Female Vocals",
            "Miley Cyrus": "Pop Rock, Alternative, Female Vocals",
            "Cardi B": "Hip Hop, Trap, Female Vocals",
            "Camila Cabello": "Pop, Latin, Female Vocals",
            "Harry Styles": "Pop Rock, British, Male Vocals",
            "Sam Smith": "Soul, Pop, Male Vocals",
            "Lizzo": "Pop, Funk, R&B, Female Vocals",
            "Gorillaz": "Alternative Rock, Electronic, Experimental",
            "Amy Winehouse": "Soul, Jazz, Female Vocals",
            "Phil Collins": "Pop Rock, 80s, Male Vocals",
            "Genesis": "Progressive Rock, Art Rock",
            "Billy Joel": "Pop Rock, Piano, Male Vocals",
            "Nicki Minaj": "Hip Hop, Pop, Female Vocals",
            "Arctic Monkeys": "Indie Rock, British, Male Vocals",
            "Tame Impala": "Psychedelic Rock, Electronic, Male Vocals",
            "The Strokes": "Indie Rock, Garage Rock",
            "Vampire Weekend": "Indie Rock, World Music",
            "Kings of Leon": "Alternative Rock, Southern Rock",
            "The Killers": "Alternative Rock, New Wave",
            "Muse": "Alternative Rock, Progressive",
            "Rage Against the Machine": "Rap Metal, Political",
            "Pearl Jam": "Grunge, Alternative Rock",
            "Soundgarden": "Grunge, Alternative Metal",
            "Alice in Chains": "Grunge, Alternative Metal",
            "Sigur RÃ³s": "Post-Rock, Ambient, Ethereal",
            "BjÃ¶rk": "Art Pop, Electronic, Experimental, Female Vocals",
            "Enya": "New Age, Celtic, Female Vocals",
            "Lana Del Rey": "Dream Pop, Indie Pop, Female Vocals",
            "Kacey Musgraves": "Country, Alternative, Female Vocals",
            "St. Vincent": "Art Rock, Indie, Female Vocals",
            "Childish Gambino": "Hip Hop, Funk, R&B, Male Vocals",
            "SZA": "R&B, Neo Soul, Female Vocals",
            "Frank Ocean": "R&B, Alternative, Male Vocals",
            "Tyler, The Creator": "Hip Hop, Alternative, Male Vocals",
            "Solange": "R&B, Art Pop, Female Vocals",
            "Brockhampton": "Hip Hop, Alternative, Boy Band",
            "Mac DeMarco": "Indie Rock, Lo-Fi, Male Vocals",
            "Rufus Du Sol": "Electronic, House, Dance",
            "Bon Iver": "Indie Folk, Experimental, Male Vocals",
            "Florence + The Machine": "Indie Rock, Baroque Pop, Female Vocals",
            "Jack White": "Alternative Rock, Blues Rock, Male Vocals",
            "Gary Clark Jr.": "Blues Rock, Soul, Male Vocals",
            "Leon Bridges": "Soul, R&B, Male Vocals",
            "Brittany Howard": "Soul, Rock, Female Vocals",
            "Alabama Shakes": "Blues Rock, Soul",
            "Glass Animals": "Indie Rock, Electronic",
            "Portugal, The Man": "Psychedelic Rock, Indie",
            "FKA Twigs": "Art Pop, Electronic, Female Vocals",
            "The National": "Indie Rock, Alternative",
            "MGMT": "Psychedelic Pop, Electronic",
            "Empire of the Sun": "Electronic, Pop, Synth",
            "Grimes": "Art Pop, Electronic, Female Vocals",
            "James Blake": "Electronic, Soul, Male Vocals",
            "The War on Drugs": "Indie Rock, Americana",
            "Sufjan Stevens": "Indie Folk, Orchestral, Male Vocals",
            "Bonobo": "Electronic, Downtempo, Ambient",
            "Caribou": "Electronic, Psychedelic",
            "Nicolas Jaar": "Electronic, Experimental",
            "Flying Lotus": "Electronic, Experimental Hip Hop",
            "Thundercat": "Funk, Jazz, Bass, Male Vocals",
            "Kamasi Washington": "Jazz, Spiritual Jazz",
            "Massive Attack": "Trip Hop, Electronic",
            "Portishead": "Trip Hop, Alternative, Female Vocals",
            "Aphex Twin": "Electronic, IDM, Experimental",
            "Boards of Canada": "Electronic, Ambient, IDM",
            "Burial": "Dubstep, Ambient, UK Garage",
            "J Dilla": "Hip Hop, Neo Soul, Producer",
            "MF DOOM": "Hip Hop, Underground, Male Vocals",
            "Blink-182": "Pop Punk, Alternative Rock",
            "Phoebe Bridgers": "Indie Folk, Alternative, Female Vocals",
            "Motorhead": "Heavy Metal, Rock and Roll"
        };

        // CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆåã‚’èª­ã¿è¾¼ã‚€
        const csvArtists = [
            "Drake", "Bruno Mars", "Fleetwood Mac", "Ed Sheeran", "Tim McGraw",
            "Elton John", "Dolly Parton", "Red Hot Chili Peppers", "Taylor Swift", "Elvis Presley",
            "Adele", "Ariana Grande", "Billie Eilish", "The Weeknd", "BeyoncÃ©",
            "Kendrick Lamar", "Lady Gaga", "Jay-Z", "Rihanna", "Kanye West",
            "Justin Bieber", "Katy Perry", "Metallica", "AC/DC", "Madonna",
            "David Bowie", "Bob Dylan", "Post Malone", "Maroon 5", "Shakira",
            "Dua Lipa", "Michael Jackson", "Prince", "Miley Cyrus", "Cardi B",
            "Imagine Dragons", "Camila Cabello", "Harry Styles", "Sam Smith", "Lizzo",
            "Daft Punk", "Gorillaz", "The Beatles", "Queen", "Led Zeppelin",
            "Pink Floyd", "The Rolling Stones", "Bob Marley", "Frank Sinatra", "Aretha Franklin",
            "Whitney Houston", "Stevie Wonder", "The Chainsmokers", "Nicki Minaj", "Green Day",
            "Nirvana", "Amy Winehouse", "Linkin Park", "Aerosmith", "Bon Jovi",
            "Billy Joel", "Phil Collins", "Genesis", "The Eagles", "The Doors",
            "Janis Joplin", "Jimi Hendrix", "The Who", "Iron Maiden", "Judas Priest",
            "Motorhead", "Slayer", "Ozzy Osbourne", "Skrillex", "Calvin Harris",
            "Arctic Monkeys", "Tame Impala", "The Strokes", "Vampire Weekend", "Kings of Leon",
            "The Killers", "System of a Down", "Radiohead", "Foo Fighters", "Muse",
            "Rage Against the Machine", "Pearl Jam", "Soundgarden", "Alice in Chains", "Sigur RÃ³s",
            "BjÃ¶rk", "Enya", "Deadmau5", "Marshmello", "Lana Del Rey",
            "Kacey Musgraves", "St. Vincent", "Childish Gambino", "SZA", "Frank Ocean",
            "Tyler, The Creator", "Solange", "Brockhampton", "Mac DeMarco", "Rufus Du Sol",
            "Bon Iver", "Florence + The Machine", "Jack White", "Gary Clark Jr.", "Leon Bridges",
            "Brittany Howard", "Alabama Shakes", "Glass Animals", "Portugal, The Man", "FKA Twigs",
            "The National", "MGMT", "Empire of the Sun", "Grimes", "James Blake",
            "The War on Drugs", "Sufjan Stevens", "Bonobo", "Caribou", "Nicolas Jaar",
            "Flying Lotus", "Thundercat", "Kamasi Washington", "Massive Attack", "Portishead",
            "Aphex Twin", "Boards of Canada", "Burial", "J Dilla", "MF DOOM",
            "Kendrick Lamar", "Blink-182", "Green Day", "Phoebe Bridgers"
        ];

        // ã™ã¹ã¦ã®ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’çµ±åˆï¼ˆã‚¹ã‚¿ã‚¤ãƒ«ä»˜ãï¼‰
        const artists = csvArtists.map(name => ({
            name: name,
            style: artistStyles[name] || getDefaultStyle(name)
        }));

        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        function getDefaultStyle(artistName) {
            // ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆåã«åŸºã¥ã„ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç”Ÿæˆ
            const defaultStyles = {
                // åå‰ã«ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã‚‹å ´åˆã®ã‚¹ã‚¿ã‚¤ãƒ«
                "DJ": "Electronic, Dance, Mixing",
                "MC": "Hip Hop, Rap, Urban",
                "The": "Band, Group Performance",
            };
            
            for (const [keyword, style] of Object.entries(defaultStyles)) {
                if (artistName.includes(keyword)) {
                    return style;
                }
            }
            
            // ãã®ä»–ã®ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¿ã‚¤ãƒ«
            return "Contemporary, Versatile, Modern";
        }

        // æ—¢å­˜ã®artistsé…åˆ—ã‚’å‰Šé™¤ã—ã¦ã€æ–°ã—ã„çµ±åˆé…åˆ—ã‚’ä½¿ç”¨
        // const artists = [ ... ]; // ã“ã®éƒ¨åˆ†ã‚’å‰Šé™¤

        const genres = {
            "ãƒ­ãƒƒã‚¯ãƒ»ãƒ¡ã‚¿ãƒ«": [
                "Acid Rock", "Alternative Rock", "Art Rock", "Atmospheric Black Metal", "Avant-garde Metal",
                "Black Metal", "Blues Rock", "Classic Rock", "Comedy Rock", "Country Rock", "Death Metal",
                "Deathcore", "Desert Rock", "Doom Metal", "Electronic Rock", "Experimental Metal",
                "Experimental Rock", "Folk Metal", "Folk Rock", "Funk Metal", "Funk Rock", "Garage Rock",
                "Glam Rock", "Gothic Metal", "Gothic Rock", "Groove Metal", "Grunge", "Hard Rock",
                "Heavy Metal", "Heavy Metal Trap", "Industrial Metal", "Industrial Rock", "Instrumental Rock",
                "Kawaii Metal", "Math Rock", "Melodic Death Metal", "Melodic Metalcore", "Metal", "Metalcore",
                "New York Hardcore", "Noise Rock", "Nu Metal", "Oriental Metal", "Pagan Metal", "Piano Rock",
                "Post-Metal", "Post-Rock", "Power Metal", "Progressive Metal", "Progressive Rock",
                "Psychedelic Rock", "Punk Rock", "Rap Metal", "Rap Rock", "Rock", "Rock and Roll",
                "Rock Opera", "Rockabilly", "Scandinavian Metal", "Skate Rock", "Sludge Metal",
                "Southern Rock", "Space Rock", "Speed Metal", "Stadium Rock", "Stoner Rock", "Surf Rock",
                "Symphonic Black Metal", "Symphonic Metal", "Symphonic Rock", "Thrash Metal", "Viking Metal", "War Metal"
            ],
            "ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ãƒƒã‚¯ãƒ»ãƒ€ãƒ³ã‚¹": [
                "Acid Jazz", "Ambient", "Bass House", "Brostep", "Chillwave", "Club", "Cyberpunk", "Dance",
                "Dance Pop", "Dark Ambient", "Dark Electro", "Deep House", "Deep Techno", "Downtempo",
                "Drone", "Dub", "Dub Techno", "Dubstep", "EDM", "Electro", "Electro Swing", "Electroacoustic",
                "Electronic", "Electropop", "Eurodance", "French House", "Future Bass", "Future Garage",
                "Future House", "Gabber", "Glitch", "Glitch Hop", "Glitch Pop", "Goa Trance", "Happy Hardcore",
                "Hardstyle", "House", "Hyperpop", "IDM", "Industrial", "Jungle", "Minimal Techno", "Moombahton",
                "Neurofunk", "Nu Disco", "Post-Disco", "Post-Dubstep", "Progressive House", "Psybient",
                "Psychedelic Trance", "Rave", "Space Disco", "Synthwave", "Tech House", "Techno", "Trance",
                "Trip Hop", "Tropical House", "UK Funky", "UK Garage", "Vaporwave", "Vocal House", "Vocal Trance", "Witch House"
            ],
            "ã‚¸ãƒ£ã‚ºãƒ»ãƒ–ãƒ«ãƒ¼ã‚¹": [
                "Bebop", "Big Band", "Blues", "Cool Jazz", "Dark Jazz", "Delta Blues", "Gypsy Jazz", "Hard Bop",
                "Jazz", "Jazz Fusion", "Jazz Rap", "Latin Jazz", "Modal Jazz", "New Orleans Jazz", "Nu Jazz",
                "Piano Blues", "Piedmont Blues", "Post-Bop", "Punk Blues", "Smooth Jazz", "Soul Jazz", "Swing"
            ],
            "ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—ãƒ»ãƒ©ãƒƒãƒ—": [
                "Crunk", "Hip Hop", "Mumble Rap", "Pop Rap", "Rap", "Trap", "UK Drill", "West Coast Rap"
            ],
            "ãƒ•ã‚©ãƒ¼ã‚¯ãƒ»ãƒ¯ãƒ¼ãƒ«ãƒ‰": [
                "Afro-Cuban", "Afrobeat", "Arabian", "Arabian Ornamental", "Bangra", "Bluegrass", "Bolero",
                "Calypso", "Carnatic", "Celtic", "Chalga", "Chanson", "Country", "Country Blues", "Fado",
                "Flamenco", "Folk", "Folk Punk", "Forr", "Freak Folk", "Guajira", "Hawaiian", "Hindustani",
                "Honky Tonk", "Indian Classical", "Indie Folk", "Irish Folk", "Klezmer", "Latin", "Mambo",
                "Mariachi", "Neofolk", "Nordic Folk", "Outlaw Country", "Polka", "Psychedelic Folk", "Qawwali",
                "Quebecois Traditional", "Rai", "Ranchera", "Reggae", "Reggaeton", "Roots Reggae", "Rumba",
                "Russian Folk", "Salsa", "Samba", "Sea Shanties", "Sephardic", "Spanish Folk", "Sufi Music",
                "Taarab", "Tango", "Traditional", "Traditional Folk", "Tribal", "Truck Driving Country",
                "Urban Folk", "World", "World Beat", "World Fusion", "Zydeco"
            ],
            "ãƒãƒƒãƒ—ãƒ»ã‚³ãƒ³ãƒ†ãƒ³ãƒãƒ©ãƒªãƒ¼": [
                "Adult Contemporary", "Avant-garde", "Bedroom", "Broadway", "Disco", "Disco Funk", "Dream Pop",
                "Emo", "Europop", "Funk", "Indie", "Indie Pop", "Indie Rock", "J-pop", "K-pop", "Latin Pop",
                "Lounge", "Motown", "Neon Pop", "Noise Pop", "Pop", "Pop Punk", "Pop Rock", "Power Pop",
                "Psychedelic Pop", "R&B", "Contemporary R&B", "Singer-Songwriter", "Soft Rock", "Soul",
                "Synth-pop", "Thai Pop", "Urban Contemporary"
            ]
        };

        const csvGenres = [
            "acoustic chicago blues cape verdean", "afro-jazz", "ambient house 16-bit", "arabic reggae",
            "saxophone afro house", "portuguese breakbeat", "korean pacific reggae", "hypnagogic pacific reggae",
            "koto gnawa", "new orleans grunge", "instrumental bluegrass", "cajun griot", "choral celtic",
            "dakar afro-cuban jazz", "dark goa trance", "prog avant-garde jazz", "reggaetonwave",
            "sertanejo southern rock", "soulful bubblegum dance", "symphonic disco", "dreamy swing",
            "garage tango", "grunge cumbia", "classical cumbia", "hindi jungle", "acoustic chicago blues algorave",
            "afro-funk", "ambient dub techno", "arabic pop", "saxophone drum and bass", "portuguese barbershop",
            "russian dembow", "hypnagogic goa trance", "koto g-funk", "new orleans dembow", "bluegrass",
            "cajun algorave", "choral big band", "cumbia metal", "dark electropop", "prog ambient noise wall",
            "reggae dirty south", "sertanejo emo", "soulful boogie", "symphonic cloud rap", "dreamy soul",
            "garage", "grunge bedroom pop", "choral afro-jazz", "hindi dream pop", "acoustic chicago blues",
            "afro-cuban jazz griot", "ambient dub boogie", "arabic mariachi", "saxophone tuareg",
            "portuguese acoustic rock", "urdu rumba", "hypnagogic garage", "koto drill and bass",
            "new orleans cloud rap", "big band new jack swing", "cajun afrikaner folk", "choral bedroom pop",
            "cumbia acoustic blues", "dark drum and bass", "prog afrobeat", "reggae", "sertanejo chillstep",
            "soulful acoustic texas blues", "symphonic city pop", "dreamy shoegaze", "electro-chanson",
            "grunge americana", "bubblegum bass symphonic metal", "hindi doo-wop", "acoustic carnatic",
            "afro-cuban jazz doo-wop", "ambient dub bedroom pop", "arabic egyptian", "slushwave roots reggae",
            "portuguese 16-bit", "urdu jazzwave", "hypnagogic electropop", "koto dembow", "new orleans chillwave",
            "swing", "big band grunge", "cajun acid rock", "choral ambient techno", "cumbia", "dark dance",
            "prog afro-jazz", "reggae cumbia", "saxophone shoegaze", "soulful acid trance", "symphonic boom bap",
            "dreamy pacific reggae", "electro-bossa nova", "grunge american primitivism", "ambient dub bachata",
            "hindi chanson", "acoustic blues slushwave", "afro-cuban jazz crunk", "alternative rock",
            "arabic classical", "mandarin trance", "urdu house", "hypnagogic ambient trance", "koto coptic",
            "new orleans carnatic", "tuareg synthwave", "big band cumbia", "cajun", "choral ambient noise wall",
            "crunk swamp blues", "dark coptic", "prog afro-funk", "rap dirty south", "saxophone opera",
            "soulful acid house", "symphonic bluegrass", "dreamy house", "electro-alternative r&b",
            "grunge afro-cuban jazz", "drumstep soul", "hindi carnatic", "tuareg motown", "acoustic blues mariachi",
            "afro-cuban jazz", "alternative r&b griot", "arabic ambient techno", "mandarin math rock",
            "urdu electropop", "hypnagogic algorave", "koto boom bap", "new orleans cajun", "big band boogie",
            "cabaretwave", "choral alt-country", "crunk punk", "dark chillstep", "prog acoustic texas blues",
            "rap bedroom pop", "saxophone gnawa", "soul dembow", "symphonic algorave", "dreamy grime",
            "electro-acid house", "grunge african folk", "delta blues house", "hindi bubblegum dance",
            "trap k-pop", "acoustic blues glitch hop", "afro trap r&b", "alternative r&b dembow",
            "arabic afrobeat", "mandarin house", "urdu drill", "hyphy egyptian", "koto alt-pop",
            "new orleans alternative r&b", "big band ambient house", "cabaret rock", "choral 16-bit",
            "crunk goa trance", "dark blues", "popcore", "rap", "saxophone g-funk", "soul",
            "symphonic afro-cuban jazz", "dreamy fife and drum blues", "egyptian swing", "grunge",
            "liquid drum and bass house", "hindi ambient house", "trap g-funk", "acoustic ambient trance",
            "afro trap algorave", "alternative r&b", "arabic acid house", "mandarin hawaiian", "urdu coptic",
            "hyphy bluegrass", "klezmer pop", "new jack swing big band", "big band alt-country",
            "cabaret americana", "chillwavewave", "crunk calypso", "dark alternative rock", "pop synthpop",
            "raga jazz", "saxophone edm", "slushwave new jack swing", "swing synthpop", "dreamy drum and bass",
            "egyptian flamenco", "griot shoegaze", "arabic african folk", "hindi alt-country", "trap",
            "acoustic afropiano", "afro trap", "alt-pop afropiano", "arabic 16-bit", "mandarin drum and bass",
            "urdu acid jazz", "hyphy alternative r&b", "klezmer", "new jack swing", "bengali swamp blues",
            "cabaret", "chillwave swing", "country jazz", "dark alt-pop", "pop g-funk", "raga egyptian",
            "saxophone bossa nova", "slushwave dancehall", "swing sertanejo", "dreamy dembow", "egyptian",
            "griot reggae", "liverpool big band", "hindi afrobeat", "trance", "acoustic acid rock",
            "afro house rock", "alt-country surf rock", "appalachian folk flamenco", "mandarin disco",
            "spanish samba", "hyphy", "kawaii future bass polka", "motown", "bengali surf rock",
            "bubblegum dance chanson", "chillwave samba", "country afro-cuban jazz", "dark acid jazz",
            "pop bossa nova", "raga edm", "saxophone barbershop", "slushwave chillstep", "swing samba",
            "dreamy chillwave", "edm swamp blues", "griot indie", "dance drill", "hindi african folk",
            "tokyo southern rock", "acid trance", "afro house drill and bass", "alt-country dubstep",
            "appalachian folk cloud rap", "mandarin delta blues", "spanish pop", "hyper-southern rock",
            "kawaii future bass afropiano", "metal grunge", "bengali surf", "bubblegum dance",
            "chillwave caribbean", "country dancehall", "dark acid house", "pop", "raga algorave",
            "saxophone alt-country", "slushwave acid house", "swing roots reggae", "dreamy bubblegum dance",
            "edm jungle", "griot", "illbient egyptian", "hindi acoustic rock", "tokyo samba",
            "acid techno psybient", "afro house dembow", "alt-country disco", "appalachian folk anti-folk",
            "mandarin cumbia", "spanish merengue", "hyper-motown", "kawaii future bass afro-cuban jazz",
            "merengue", "bengali psybient", "bubblegum bass grime", "chillwave egyptian", "coptic grunge",
            "dancepop breakbeat", "polka emo", "raga acid breaks", "saxophone 2-step",
            "ska liquid drum and bass", "swing grime", "dreamy boom bap", "edm grime", "grime tango",
            "dubstep rock", "hindi acid rock", "tokyo norteo", "acid techno avant-garde jazz",
            "afro house acoustic blues", "alt-country 2-step", "anti-folkwave", "mandarin american primitivism",
            "spanish mariachi", "hyper-jungle", "kawaii future bass", "math rock ambient noise wall",
            "bengali math rock", "breakstep synthwave", "chillwave bubblegum bass", "coptic flamenco",
            "dancepop", "polka", "raga", "samba soul", "ska coptic", "swing bedroom pop", "dreamy afro-jazz",
            "edm g-funk", "grime synthpop", "tuareg", "harpischord symphonic metal", "tokyo liquid drum and bass",
            "acid techno", "afro house", "algorave psybient", "anti-folk drumstep", "tokyo grunge",
            "mandarin afrobeat", "spanish funk", "hyper-indie", "k-pop acoustic texas blues", "math rock",
            "bengali grunge", "bubblegum bass", "chillsynth mento", "coptic afro-rock", "dancehall synthwave",
            "piano klezmer", "r&b gospel", "samba dirty south", "ska", "swamp blues r&b", "dreamy acoustic rock",
            "edm disco", "grime surf rock", "electro-classical", "harpischord gospel", "acid rock p-funk",
            "afrikaner folk tango", "algorave hawaiian", "anti-folk big band", "tokyo drumstep",
            "mandarin acid trance", "spanish ambient trance", "hyper-grime", "k-pop", "mariachi",
            "bengali electropop", "breakstep samba", "chillsynth", "coptic", "dancehall new wave",
            "piano country", "punk polka", "samba country", "sitar southern rock", "swamp blues boogie",
            "dreamy acid house", "edm breakbeat", "grime reggaeton", "urdu shoegaze", "future egyptian",
            "acid rock city pop", "afrikaner folk pacific reggae", "algorave garage", "anti-folk",
            "tokyo city pop", "korean fife and drum blues", "spanish acoustic rock", "hyper-egyptian",
            "jungle ambient noise wall", "lo-fi trap", "bengali egyptian", "breakbeatwave",
            "chillstep chillwave", "cloud rap symphonic metal", "dancehall flamenco", "piano chillstep",
            "punk electropop", "samba boom bap", "sitar sertanejo", "swamp blues", "dream pop g-funk",
            "edm anti-folk", "grime reggae", "havana glitch hop", "future chillwave", "acid jazz crunk",
            "afrikaner folk drill", "algorave acid jazz", "americana soul", "tokyo afro-jazz", "korean opera",
            "russian techno", "hyper-dance", "jungle afrobeat", "lo-fi synthpop", "bengali drill",
            "breakbeat trance", "chillstep", "cloud rap slushwave", "dancehall country", "piano cape verdean",
            "punk acid trance", "samba bachata", "sitar rumba", "surfwave", "dream pop appalachian folk",
            "edm", "grime norteo", "havana funk", "french ska", "acid house boom bap", "afrikaner folk",
            "algorave", "americana jungle", "tokyo afro-funk", "korean drumstep", "russian samba",
            "hyper-crunk", "jungle", "lo-fi roots reggae", "bengali cape verdean", "breakbeat coptic",
            "chanson soul", "cloud rap", "dancehall city pop", "piano caribbean", "psychedelic swing",
            "samba afropiano", "sitar goa trance", "surf slushwave", "dream pop", "dubstepcore",
            "grime calypso", "havana electropop", "french shoegaze", "acid house", "african folk math rock",
            "afroswing new wave", "american primitivism illbient", "tokyo acid trance", "korean cabaret",
            "russian salsa", "hyper-blues rock", "jazz soul", "lo-fi pacific reggae", "bengali barbershop",
            "breakbeat balkan brass band", "chanson funk", "classicalwave", "dancehall acoustic texas blues",
            "piano afroswing", "psychedelic psybient", "samba", "sitar glitch hop", "surf rock boogie",
            "doo-wop pop", "dubstep samba", "grime avant-garde jazz", "havana chillstep", "french samba",
            "acid breaks alt-country", "african folk drill", "afroswing k-pop", "american primitivism bedroom pop",
            "tokyo acid breaks", "korean americana", "russian roots reggae", "hyper-afrobeat", "jazz sertanejo",
            "lo-fi cloud rap", "bengali american primitivism", "bossa nova merengue", "chanson alt-pop",
            "classical surf", "dancehall", "piano afro-rock", "psychedelic motown", "salsa polka",
            "sitar fife and drum blues", "surf rock", "doo-wop drumstep", "dubstep kawaii future bass",
            "grime 2-step", "havana cajun", "french psybient", "accordion tango", "african folk",
            "afroswing", "american primitivism 2-step", "techno norteo", "korean algorave", "russian k-pop",
            "hyper-acid house", "jazz future bass", "lo-fi bubblegum bass", "bengali afroswing", "bossa nova",
            "chanson", "classical grime", "dancecore", "piano african folk", "psychedelic house", "salsa",
            "sitar drum and bass", "surf raga", "doo-wop classical", "dubstep", "grime", "havana bubblegum bass",
            "french grunge", "accordion rap", "acoustic texas blues chillstep", "afropiano blues rock",
            "ambient trance mento", "techno bossa nova", "korean afrobeat", "russian grunge", "hyper-2-step",
            "jazz", "lo-fi ambient dub", "bengali acoustic chicago blues", "boom bap p-funk", "celtic tango",
            "classical folk", "dance southern rock", "pacific reggae ska", "psychedelic hawaiian", "rumbawave",
            "sitar delta blues", "surf grunge", "disco cloud rap", "drumstep chillsynth", "gospelwave",
            "havana bedroom pop", "french glitch hop", "accordion jungle", "acoustic texas blues afrobeat",
            "afropiano", "ambient trance jungle", "techno big band", "korean afro-funk", "russian grime",
            "house symphonic metal", "j-pop chillsynth", "lo-fi afro-cuban jazz", "bedroom pop ska",
            "boom bap celtic", "celtic cloud rap", "classical dirty south", "dance illbient",
            "pacific reggae samba", "psychedelic dream pop", "rumba cape verdean", "sitar cumbia",
            "surf flamenco", "disco classical", "drum and bass swing", "gospel shoegaze", "havana 2-step",
            "french dubstep", "accordion hawaiian", "acoustic texas blues", "afrobeat swing",
            "ambient trance folk", "techno balkan brass band", "korean acid trance", "russian glitch hop",
            "house reggae", "j-pop blues", "lo-fi afro house", "bedroom pop samba", "boogie celtic", "celtic",
            "classical caribbean", "dance", "pacific reggae afrobeat", "psychedelic cabaret", "rumba",
            "sitar cape verdean", "surf classical", "disco chillsynth", "drum and bass goa trance",
            "gospel dream pop", "havana american primitivism", "french dembow", "accordion drill",
            "acoustic slushwave", "afrobeat rockabilly", "ambient trance chanson", "techno afrobeat",
            "japanese swing", "russian flamenco", "hip hop dubstep", "j-pop acid jazz",
            "liquid drum and bass slushwave", "bedroom pop new jack swing", "boogie caribbean",
            "carnatic glitch hop", "classical boom bap", "dakar raga", "p-funk samba", "psychedelic acid trance",
            "roots reggae house", "sitar bubblegum dance", "surf acoustic blues", "disco chillstep",
            "drum and bass acoustic rock", "gospel disco", "harpischord klezmer", "french big band",
            "synthwave trance", "accordion delta blues", "acoustic rockabilly", "afrobeat new jack swing",
            "ambient trance alternative rock", "tango trance", "japanese surf rock", "russian dubstep",
            "hip hop techno", "j-pop acid breaks", "liquid drum and bass rockabilly", "bedroom pop", "boogie",
            "carnatic acid trance", "classical", "dakar new wave", "synthwave chillsynth", "synthwave cumbia",
            "p-funk mariachi", "psybient new wave", "roots reggae flamenco", "sitar bubblegum bass", "surf",
            "synthwave", "tango reggae", "disco alternative r&b", "drill sertanejo", "gospel acid breaks",
            "harpischord hip hop", "french afro-rock", "tabla bedroom pop", "accordion ambient techno",
            "acoustic rock chillsynth", "afrobeat griot", "ambient techno mento", "synthwave country",
            "japanese surf", "russian celtic", "hip hop", "indie grunge", "liquid drum and bass new jack swing",
            "p-funk jazz", "tango boogie", "barbershop breakbeat", "blues rock american primitivism", "carnatic",
            "city pop symphonic metal", "dakar math rock", "tango", "psybient griot",
            "roots reggae avant-garde jazz", "sitar bossa nova", "southern rock ska", "synthpop trance",
            "dirty south boom bap", "drill raga", "goa trance afro-cuban jazz", "harpischord g-funk",
            "fife and drum blues p-funk", "accordion afro trap", "acoustic rock afro-jazz", "afrobeat garage",
            "ambient techno hyphy", "tabla dream pop", "japanese shoegaze", "russian cumbia", "hawaiian r&b",
            "indie g-funk", "liquid drum and bass blues", "p-funk cloud rap", "synthwave dancehall",
            "barbershop balkan brass band", "blues rock afropiano", "caribbean", "city pop psybient",
            "dakar j-pop", "tabla jazz", "tango slushwave", "prog swamp blues", "rockabilly tango",
            "sitar blues", "southern rock calypso", "synthpop hawaiian", "tabla breakbeat",
            "dirty south balkan brass band", "drill chillwave", "goa trance", "harpischord drill",
            "flamenco hip hop", "japanese merengue", "accordion african folk", "acoustic rock",
            "afrobeat disco", "ambient techno chanson", "balkan brass band raga", "russian appalachian folk",
            "hawaiian merengue", "indie", "liquid drum and bass bluegrass", "p-funk", "lo-fi swing",
            "blues rock", "cape verdean acoustic rock", "city pop classical", "dakar house", "dirty south",
            "tabla hawaiian", "mariachi indie", "prog shoegaze", "rockabilly raga", "sitar alternative r&b",
            "southern rock", "synthpop coptic", "new orleans afrobeat", "drill cajun", "gnawawave",
            "harpischord drill and bass", "fife and drum blues acid breaks", "japanese jungle", "hyper-house",
            "accordion 16-bit", "acoustic raga", "afrobeat", "ambient techno afroswing",
            "balkan brass band classical", "portuguese southern rock", "havana synthwave",
            "illbient afrikaner folk", "koto swing", "new wave", "russian ambient techno", "hawaiian electropop",
            "illbientwave", "liquid drum and bass", "norteowave", "tabla kawaii future bass",
            "tabla new jack swing", "house surf", "blues folk", "cape verdean", "city pop breakbeat",
            "dakar gospel", "dembow punk", "pacific reggae", "hyper-roots reggae", "prog rockabilly",
            "rockabilly country", "sitar afro-jazz", "soulful soul", "synthpop", "new wave delta blues",
            "house", "drill bubblegum dance", "gnawa funk", "harpischord doo-wop", "electropop grunge",
            "japanese dancehall", "2-step surf", "acoustic grime", "afro-rock bachata", "ambient techno",
            "bachata", "hyphy balkan brass band", "russian afrikaner folk", "havana trap", "illbient cumbia",
            "koto tuareg", "norteo pop", "hyper-afrikaner folk", "blues cumbia", "calypso surf",
            "choral reggae", "dakar future bass", "dembow balkan brass band", "piano acid techno",
            "prog dubstep", "rockabilly", "sitar afro-funk", "soulful ska", "symphonic opera",
            "house roots reggae", "hip hop roots reggae", "drill breakbeat", "gnawa bubblegum bass",
            "harpischord boogie", "electronic math rock", "japanese chanson", "2-step country",
            "acoustic funk", "afro-rock ambient dub", "ambient noise wall chanson", "avant-garde jazz rap",
            "portuguese surf rock", "havana techno", "illbient alternative rock", "koto trap",
            "new wave acid trance", "blues afro house", "calypso opera", "choral folk", "dakar flamenco",
            "dembow", "piano coptic", "prog drum and bass", "rock liquid drum and bass", "shoegaze psybient",
            "soulful reggaeton", "symphonic metal", "drill and bass gnawa", "gnawa afrobeat",
            "harpischord anti-folk", "electronic grunge", "japanese boogie", "2-step", "acoustic electropop",
            "afro-rock", "ambient house p-funk", "avant-garde jazz illbient", "portuguese dancehall",
            "havana grime", "illbient", "koto surf", "new orleans trance", "bluegrass punk",
            "calypso afroswing", "choral country", "dakar boom bap", "dark reggaeton", "prog southern rock",
            "prog disco", "rock balkan brass band", "shoegaze boom bap", "soulful city pop",
            "symphonic merengue", "drill", "glitch hop swing", "harpischord acid jazz", "electro-techno",
            "japanese ambient house", "16-bit celtic", "acoustic chicago blues reggaeton", "afro-jazz carnatic",
            "ambient house cajun", "avant-garde jazz", "portuguese chillsynth", "french acoustic chicago blues",
            "hypnagogic swamp blues", "koto polka", "new orleans samba", "bluegrass k-pop", "cajun synthpop",
            "choral chillsynth", "dakar ambient dub", "dark merengue", "psychedelic tango", "prog breakbeat",
            "rock americana", "shoegaze afro-funk", "soulful chillsynth", "symphonic mariachi", "dreamy trance",
            "glitch hop acoustic texas blues", "grunge new jack swing", "electro-new wave", "japanese algorave",
            "16-bit", "acoustic chicago blues motown", "afro-jazz blues rock", "ambient house breakstep",
            "avant-garde jazz disco", "portuguese chillstep", "funk bedroom pop", "hypnagogic shoegaze",
            "koto house", "new orleans house", "bluegrass bubblegum bass", "cajun new wave", "choral chanson",
            "dakar afrobeat", "dark jazz", "reggae k-pop", "prog big band", "rock", "shoegaze afro-cuban jazz",
            "soulful cabaret", "symphonic doo-wop", "dreamy tango", "glitch hop 2-step", "grunge funk",
            "electro-jungle", "hindi southern rock"
        ];

        const moods = {
            "ãƒ ãƒ¼ãƒ‰ãƒ»é›°å›²æ°—": ["Atmospheric", "Ambient", "Ethereal", "Euphoric", "Mystical", "Dreamy", "Surreal", "Tranquil", "Serene", "Haunting", "Intoxicating", "Eerie", "Celestial", "Chilling", "Melancholic", "Apocalyptic"],
            "ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒ¼ãƒ»ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹": ["Airy", "Dense", "Fluid", "Smooth", "Rough", "Textured", "Layered", "Blurred", "Crisp", "Fuzzy", "Sparkling", "Glossy", "Transparent", "Luminous", "Vibrant", "Shimmering"],
            "ãƒªã‚ºãƒ ãƒ»éŸ³æ¥½çš„": ["Rhythmic", "Percussive", "Melodic", "Harmonic", "Polyphonic", "Syncopated", "Dynamic", "Staccato", "Crescendoing", "Descending", "Ascending", "Cadenced", "Dotted", "Arhythmic", "Cross-rhythmic"],
            "æ„Ÿæƒ…ãƒ»è¡¨ç¾": ["Emotional", "Joyous", "Sad", "Angry", "Aggressive", "Gentle", "Warm", "Cold", "Festive", "Nostalgic", "Romantic", "Passionate", "Soothing", "Inspiring", "Soulful"],
            "ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»åˆæˆ": ["Digital", "Analog", "Electronic", "Robotic", "Cybernetic", "Futuristic", "Synthetic", "Automated", "Virtual", "Algorithmic", "Biotechnological"],
            "å‹•ããƒ»ã‚¨ãƒãƒ«ã‚®ãƒ¼": ["Explosive", "Fast-paced", "Slow", "High-energy", "Lethargic", "Static", "Chaotic", "Controlled", "Spontaneous", "Cinematic", "Dramatic", "Climactic", "Bouncing", "Flowing", "Pulsating"],
            "è‡ªç„¶ãƒ»ç’°å¢ƒ": ["Oceanic", "Forest-like", "Urban", "Desert", "Mountainous", "Space", "Underwater", "Atmospheric", "Geographical", "Seasonal", "Weather-related"]
        };

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let selectedItems = [];
        let selectedLanguage = 'cantonese';
        let selectedPromptLanguage = 'cantonese'; // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨€èª
        let selectedStructures = [];
        let currentLyricsCandidate = -1;
        let generatedLyrics = {};

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨€èªé¸æŠ
        function selectPromptLanguage(button, lang) {
            document.querySelectorAll('[id^="prompt-lang-"]').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedPromptLanguage = lang;
            updatePromptSectionTitle();
            updatePrompt();
        }

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ›´æ–°
        function updatePromptSectionTitle() {
            const titleElement = document.querySelector('#prompt-section h2');
            if (titleElement) {
                const titles = {
                    'cantonese': 'ğŸ›ï¸ ç”Ÿæˆå˜…é¢¨æ ¼æç¤º',
                    'chinese': 'ğŸ›ï¸ ç”Ÿæˆçš„é£æ ¼æç¤º',
                    'japanese': 'ğŸ›ï¸ ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ',
                    'english': 'ğŸ›ï¸ Generated Style Prompt'
                };
                titleElement.textContent = titles[selectedPromptLanguage] || titles['japanese'];
            }
            
            // ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚‚æ›´æ–°
            updatePromptButtons();
        }

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
        function updatePromptButtons() {
            const copyBtn = document.querySelector('#prompt-section button[onclick="copyPrompt()"]');
            const clearBtn = document.querySelector('#prompt-section button[onclick="clearPrompt()"]');
            
            const buttonTexts = {
                'cantonese': {
                    copy: 'ğŸ“‹ è¤‡è£½',
                    clear: 'âŒ æ¸…é™¤'
                },
                'chinese': {
                    copy: 'ğŸ“‹ å¤åˆ¶',
                    clear: 'âŒ æ¸…é™¤'
                },
                'japanese': {
                    copy: 'ğŸ“‹ ã‚³ãƒ”ãƒ¼',
                    clear: 'âŒ ã‚¯ãƒªã‚¢'
                },
                'english': {
                    copy: 'ğŸ“‹ Copy',
                    clear: 'âŒ Clear'
                }
            };
            
            const texts = buttonTexts[selectedPromptLanguage] || buttonTexts['japanese'];
            
            if (copyBtn) {
                copyBtn.innerHTML = `<i class="fas fa-copy mr-2"></i>${texts.copy}`;
            }
            if (clearBtn) {
                clearBtn.innerHTML = `<i class="fas fa-times mr-2"></i>${texts.clear}`;
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeArtists();
            initializeGenres();
            initializeMoods();
            updateCounts(); // å€‹æ•°ã‚’è¡¨ç¤º
            updatePromptSectionTitle(); // åˆæœŸè¨€èªã§ã‚¿ã‚¤ãƒˆãƒ«è¨­å®š
            
            // åˆæœŸè¡¨ç¤ºï¼šã™ã¹ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºï¼ˆæ­Œè©ç”Ÿæˆä»¥å¤–ï¼‰
            document.getElementById('genres-section').style.display = 'block';
            document.getElementById('moods-section').style.display = 'block';
            document.getElementById('vocal-section').style.display = 'block';
            document.getElementById('artists-section').style.display = 'block';
        });

        // å€‹æ•°ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateCounts() {
            // ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆæ•°ã‚’è¡¨ç¤º
            const artistsCount = document.getElementById('artists-count');
            if (artistsCount) {
                artistsCount.textContent = `(å…¨${artists.length}å€‹)`;
            }
            
            // ã‚¸ãƒ£ãƒ³ãƒ«æ•°ã‚’è¨ˆç®—ã—ã¦è¡¨ç¤º
            let genreCount = 0;
            Object.values(genres).forEach(category => {
                genreCount += category.length;
            });
            
            // å…¨ã‚¸ãƒ£ãƒ³ãƒ«æ•°ã‚’è¨ˆç®—
            const totalGenreCount = genreCount + csvGenres.length;
            
            const genresCount = document.getElementById('genres-count');
            if (genresCount) {
                genresCount.textContent = `(å…¨${totalGenreCount}å€‹ã®ã‚¸ãƒ£ãƒ³ãƒ«)`;
            }
        }

        // ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆåˆæœŸåŒ–
        function initializeArtists() {
            const container = document.getElementById('artists-container');
            artists.forEach(artist => {
                const btn = document.createElement('button');
                btn.className = 'artist-btn';
                btn.innerHTML = `${artist.name}<br><small>${artist.style.substring(0, 30)}...</small>`;
                btn.onclick = () => toggleSelection(btn, artist.style);
                btn.dataset.artist = artist.name.toLowerCase();
                btn.dataset.style = artist.style.toLowerCase();
                container.appendChild(btn);
            });
        }

        // ã‚¸ãƒ£ãƒ³ãƒ«åˆæœŸåŒ–
        function initializeGenres() {
            const container = document.getElementById('genres-container');
            
            // åŸºæœ¬ã‚¸ãƒ£ãƒ³ãƒ«ã‚’è¡¨ç¤º
            Object.keys(genres).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-6';
                categoryDiv.innerHTML = `<h3 class="text-lg font-semibold mb-3">${category}</h3>`;
                
                const genreContainer = document.createElement('div');
                genreContainer.className = 'flex flex-wrap';
                
                genres[category].forEach(genre => {
                    const btn = document.createElement('button');
                    btn.className = 'genre-btn';
                    btn.textContent = genre;
                    btn.onclick = () => toggleSelection(btn, genre);
                    btn.dataset.genre = genre.toLowerCase();
                    genreContainer.appendChild(btn);
                });
                
                categoryDiv.appendChild(genreContainer);
                container.appendChild(categoryDiv);
            });
            
            // CSVã‚¸ãƒ£ãƒ³ãƒ«ã‚’é©åˆ‡ãªã‚«ãƒ†ã‚´ãƒªã«åˆ†é¡ã—ã¦è¡¨ç¤º
            const csvGenreCategories = categorizeCSVGenres();
            
            Object.keys(csvGenreCategories).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-6';
                categoryDiv.innerHTML = `<h3 class="text-lg font-semibold mb-3">${category}</h3>`;
                
                const genreContainer = document.createElement('div');
                genreContainer.className = 'flex flex-wrap';
                
                csvGenreCategories[category].forEach(genre => {
                    const btn = document.createElement('button');
                    btn.className = 'genre-btn'; // çµ±ä¸€ã•ã‚ŒãŸç´«ã®ãƒœã‚¿ãƒ³
                    btn.textContent = genre;
                    btn.onclick = () => toggleSelection(btn, genre);
                    btn.dataset.genre = genre.toLowerCase();
                    genreContainer.appendChild(btn);
                });
                
                categoryDiv.appendChild(genreContainer);
                container.appendChild(categoryDiv);
            });
        }
        
        // CSVã‚¸ãƒ£ãƒ³ãƒ«ã‚’é©åˆ‡ãªã‚«ãƒ†ã‚´ãƒªã«åˆ†é¡ã™ã‚‹é–¢æ•°
        function categorizeCSVGenres() {
            const categories = {
                "ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ã‚¸ãƒ£ã‚º": [],
                "ã‚¢ãƒ•ãƒ­ãƒ»ãƒ¯ãƒ¼ãƒ«ãƒ‰": [],
                "ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ãƒƒã‚¯ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³": [],
                "ã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆãƒ»ãƒãƒ«ã‚¢ã‚¦ãƒˆ": [],
                "ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³": [],
                "ãƒ­ãƒƒã‚¯ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³": [],
                "ãƒãƒƒãƒ—ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³": [],
                "ãƒ•ã‚©ãƒ¼ã‚¯ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³": [],
                "ãƒ¬ã‚²ã‚¨ãƒ»ã‚«ãƒªãƒ“ã‚¢ãƒ³": [],
                "å®Ÿé¨“çš„ãƒ»ã‚¢ãƒ´ã‚¡ãƒ³ã‚®ãƒ£ãƒ«ãƒ‰": []
            };
            
            csvGenres.forEach(genre => {
                const lowerGenre = genre.toLowerCase();
                
                // ã‚¸ãƒ£ã‚ºç³»
                if (lowerGenre.includes('jazz') || lowerGenre.includes('swing') || lowerGenre.includes('bebop') || 
                    lowerGenre.includes('bossa nova') || lowerGenre.includes('acid jazz')) {
                    categories["ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ã‚¸ãƒ£ã‚º"].push(genre);
                }
                // ã‚¢ãƒ•ãƒ­ãƒ»ãƒ¯ãƒ¼ãƒ«ãƒ‰ç³»
                else if (lowerGenre.includes('afro') || lowerGenre.includes('african') || lowerGenre.includes('arabic') || 
                         lowerGenre.includes('hindi') || lowerGenre.includes('mandarin') || lowerGenre.includes('spanish') ||
                         lowerGenre.includes('tuareg') || lowerGenre.includes('gnawa') || lowerGenre.includes('coptic') ||
                         lowerGenre.includes('bengali') || lowerGenre.includes('urdu')) {
                    categories["ã‚¢ãƒ•ãƒ­ãƒ»ãƒ¯ãƒ¼ãƒ«ãƒ‰"].push(genre);
                }
                // ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ãƒƒã‚¯ç³»
                else if (lowerGenre.includes('techno') || lowerGenre.includes('house') || lowerGenre.includes('electro') ||
                         lowerGenre.includes('drum and bass') || lowerGenre.includes('dubstep') || lowerGenre.includes('edm') ||
                         lowerGenre.includes('trance') || lowerGenre.includes('acid') || lowerGenre.includes('synthwave') ||
                         lowerGenre.includes('algorave') || lowerGenre.includes('breakbeat')) {
                    categories["ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ãƒƒã‚¯ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³"].push(genre);
                }
                // ã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆãƒ»ãƒãƒ«ã‚¢ã‚¦ãƒˆç³»
                else if (lowerGenre.includes('ambient') || lowerGenre.includes('chillwave') || lowerGenre.includes('dreamy') ||
                         lowerGenre.includes('downtempo') || lowerGenre.includes('shoegaze') || lowerGenre.includes('bedroom')) {
                    categories["ã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆãƒ»ãƒãƒ«ã‚¢ã‚¦ãƒˆ"].push(genre);
                }
                // ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—ç³»
                else if (lowerGenre.includes('rap') || lowerGenre.includes('hip hop') || lowerGenre.includes('trap') ||
                         lowerGenre.includes('boom bap') || lowerGenre.includes('drill') || lowerGenre.includes('grime')) {
                    categories["ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³"].push(genre);
                }
                // ãƒ­ãƒƒã‚¯ç³»
                else if (lowerGenre.includes('rock') || lowerGenre.includes('grunge') || lowerGenre.includes('metal') ||
                         lowerGenre.includes('punk') || lowerGenre.includes('garage')) {
                    categories["ãƒ­ãƒƒã‚¯ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³"].push(genre);
                }
                // ãƒãƒƒãƒ—ç³»
                else if (lowerGenre.includes('pop') || lowerGenre.includes('bubblegum') || lowerGenre.includes('k-pop') ||
                         lowerGenre.includes('j-pop') || lowerGenre.includes('disco') || lowerGenre.includes('dance')) {
                    categories["ãƒãƒƒãƒ—ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³"].push(genre);
                }
                // ãƒ•ã‚©ãƒ¼ã‚¯ãƒ»ã‚«ãƒ³ãƒˆãƒªãƒ¼ç³»
                else if (lowerGenre.includes('folk') || lowerGenre.includes('country') || lowerGenre.includes('bluegrass') ||
                         lowerGenre.includes('americana') || lowerGenre.includes('alt-country') || lowerGenre.includes('cajun')) {
                    categories["ãƒ•ã‚©ãƒ¼ã‚¯ãƒ»ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³"].push(genre);
                }
                // ãƒ¬ã‚²ã‚¨ãƒ»ã‚«ãƒªãƒ“ã‚¢ãƒ³ç³»
                else if (lowerGenre.includes('reggae') || lowerGenre.includes('dancehall') || lowerGenre.includes('samba') ||
                         lowerGenre.includes('cumbia') || lowerGenre.includes('merengue') || lowerGenre.includes('calypso') ||
                         lowerGenre.includes('caribbean')) {
                    categories["ãƒ¬ã‚²ã‚¨ãƒ»ã‚«ãƒªãƒ“ã‚¢ãƒ³"].push(genre);
                }
                // ãã®ä»–å®Ÿé¨“çš„
                else {
                    categories["å®Ÿé¨“çš„ãƒ»ã‚¢ãƒ´ã‚¡ãƒ³ã‚®ãƒ£ãƒ«ãƒ‰"].push(genre);
                }
            });
            
            // ç©ºã®ã‚«ãƒ†ã‚´ãƒªã‚’å‰Šé™¤
            Object.keys(categories).forEach(key => {
                if (categories[key].length === 0) {
                    delete categories[key];
                }
            });
            
            return categories;
        }



        // ãƒ ãƒ¼ãƒ‰åˆæœŸåŒ–
        function initializeMoods() {
            const container = document.getElementById('moods-container');
            Object.keys(moods).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-6';
                categoryDiv.innerHTML = `<h3 class="text-lg font-semibold mb-3">${category}</h3>`;
                
                const moodContainer = document.createElement('div');
                moodContainer.className = 'flex flex-wrap';
                
                moods[category].forEach(mood => {
                    const btn = document.createElement('button');
                    btn.className = 'genre-btn';
                    btn.textContent = mood;
                    btn.onclick = () => toggleSelection(btn, mood);
                    btn.dataset.mood = mood.toLowerCase();
                    moodContainer.appendChild(btn);
                });
                
                categoryDiv.appendChild(moodContainer);
                container.appendChild(categoryDiv);
            });
        }



        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function showTab(tabName) {
            // å…¨ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º
            document.getElementById('moods-section').style.display = 'none';
            document.getElementById('vocal-section').style.display = 'none';
            document.getElementById('genres-section').style.display = 'none';
            document.getElementById('artists-section').style.display = 'none';
            
            // é¸æŠã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
            document.getElementById(tabName + '-section').style.display = 'block';
            
            // é¸æŠã—ãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            setTimeout(() => {
                document.getElementById(tabName + '-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
            
            // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.includes('ã‚¸ãƒ£ãƒ³ãƒ«') && tabName === 'genres') btn.classList.add('active');
                else if (btn.textContent.includes('ãƒ ãƒ¼ãƒ‰') && tabName === 'moods') btn.classList.add('active');
                else if (btn.textContent.includes('ãƒœãƒ¼ã‚«ãƒ«') && tabName === 'vocal') btn.classList.add('active');
                else if (btn.textContent.includes('æ­Œæ‰‹') && tabName === 'artists') btn.classList.add('active');
            });
        }

        // é¸æŠåˆ‡ã‚Šæ›¿ãˆ
        function toggleSelection(button, value) {
            const index = selectedItems.indexOf(value);
            if (index > -1) {
                selectedItems.splice(index, 1);
                button.classList.remove('selected');
            } else {
                selectedItems.push(value);
                button.classList.add('selected');
            }
            updatePrompt();
        }



        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ›´æ–°
        function updatePrompt() {
            // é¸æŠã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã¯å¸¸ã«è‹±èªã®ã¾ã¾ä¿æŒ
            let prompt = selectedItems.join(', ');
            
            // æ­Œè©è¨€èªã®ã¿ã‚’é¸æŠã—ãŸè¨€èªã«å¿œã˜ã¦è¿½åŠ 
            if (selectedPromptLanguage === 'cantonese') {
                prompt += ', Cantonese lyrics';
            } else if (selectedPromptLanguage === 'chinese') {
                prompt += ', Chinese lyrics';
            } else if (selectedPromptLanguage === 'japanese') {
                prompt += ', Japanese lyrics';
            } else if (selectedPromptLanguage === 'english') {
                prompt += ', English lyrics';
            }
            
            document.getElementById('generated-prompt').textContent = prompt || getPlaceholderText();
            
            // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¡¨ç¤º/éè¡¨ç¤º
            const promptSection = document.getElementById('prompt-section');
            if (prompt && promptSection) {
                promptSection.style.display = 'block';
            } else if (promptSection) {
                promptSection.style.display = 'none';
            }
        }

        // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨€èªã«å¿œã˜ã¦å–å¾—
        function getPlaceholderText() {
            const placeholders = {
                'cantonese': 'é¸æ“‡å˜…é¢¨æ ¼æœƒå–ºå‘¢åº¦é¡¯ç¤º',
                'chinese': 'é€‰æ‹©çš„é£æ ¼å°†åœ¨è¿™é‡Œæ˜¾ç¤º',
                'japanese': 'é¸æŠã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™',
                'english': 'Selected styles will be displayed here'
            };
            return placeholders[selectedPromptLanguage] || placeholders['japanese'];
        }



        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚¯ãƒªã‚¢
        function clearPrompt() {
            selectedItems = [];
            document.querySelectorAll('.selected').forEach(btn => {
                if (!btn.id || !btn.id.startsWith('lang-')) {
                    btn.classList.remove('selected');
                }
            });
            updatePrompt();
        }

        // æ­Œè©ç”Ÿæˆ
        function generateLyrics() {
            const title = document.getElementById('song-title').value;
            const theme = document.getElementById('song-theme').value;
            
            // å‰ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢
            clearPreviousLyrics();
            
            if (!title && !theme) {
                document.getElementById('lyrics-candidates').style.display = 'none';
                return;
            }
            
            // 3ã¤ã®å€™è£œã‚’ç”Ÿæˆ
            generateLyricsCandidate(0, title, theme, 'ãƒãƒƒãƒ—ã‚¹é¢¨');
            generateLyricsCandidate(1, title, theme, 'ãƒãƒ©ãƒ¼ãƒ‰é¢¨');
            generateLyricsCandidate(2, title, theme, 'ã‚¢ãƒƒãƒ—ãƒ†ãƒ³ãƒé¢¨');
            
            document.getElementById('lyrics-candidates').style.display = 'block';
        }

        // å‰ã®æ­Œè©ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹é–¢æ•°
        function clearPreviousLyrics() {
            // ç”Ÿæˆã•ã‚ŒãŸæ­Œè©ã‚’ã‚¯ãƒªã‚¢
            generatedLyrics = {};
            
            // å€™è£œè¡¨ç¤ºã‚’ã‚¯ãƒªã‚¢
            ['lyrics-a', 'lyrics-b', 'lyrics-c'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = '';
                    if (element.parentElement && element.parentElement.classList) {
                        element.parentElement.classList.remove('selected');
                    }
                }
            });
            
            // æœ€çµ‚æ­Œè©è¡¨ç¤ºã‚’ã‚¯ãƒªã‚¢
            const finalLyrics = document.getElementById('final-lyrics');
            if (finalLyrics) {
                finalLyrics.textContent = '';
            }
            
            // æœ€çµ‚æ­Œè©ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º
            const finalLyricsSection = document.getElementById('final-lyrics-section');
            if (finalLyricsSection) {
                finalLyricsSection.style.display = 'none';
            }
        }

        // æ­Œè©å€™è£œç”Ÿæˆ
        function generateLyricsCandidate(index, title, theme, style) {
            let lyrics = '';
            
            if (selectedLanguage === 'cantonese') {
                lyrics = generateCantroneseLyrics(title, theme, style);
            } else if (selectedLanguage === 'japanese') {
                lyrics = generateJapaneseLyrics(title, theme, style);
            } else {
                lyrics = generateInstrumentalStructure(title, theme, style);
            }
            
            const candidateIds = ['lyrics-a', 'lyrics-b', 'lyrics-c'];
            const candidateId = candidateIds[index];
            generatedLyrics[candidateId] = lyrics;
            document.getElementById(candidateId).textContent = lyrics;
        }

        // åºƒæ±èªæ­Œè©ç”Ÿæˆ
        function generateCantroneseLyrics(title, theme, style) {
            const structures = selectedStructures.length > 0 ? selectedStructures : ['Intro', 'Verse', 'Chorus', 'Bridge', 'Outro'];
            let lyrics = '';
            
            structures.forEach(structure => {
                lyrics += `[${structure}]\n`;
                
                switch(structure) {
                    case 'Intro':
                        if (style === 'ãƒãƒƒãƒ—ã‚¹é¢¨') {
                            lyrics += `éŸ³æ¨‚éŸ¿èµ·å˜…æ™‚å€™\nå¤œæ™šé–‹å§‹è®Šå¾—ç‰¹åˆ¥\n`;
                        } else if (style === 'ãƒãƒ©ãƒ¼ãƒ‰é¢¨') {
                            lyrics += `éœéœå˜…å¤œæ™šè£¡é¢\næœˆå…‰ç…§ä½æˆ‘å˜…å¿ƒ\n`;
                        } else {
                            lyrics += `ç¯€æ‹é–‹å§‹è·³å‹•\næº–å‚™å¥½ä¸€é½Šç‹‚æ­¡\n`;
                        }
                        break;
                        
                    case 'Verse':
                        if (title && theme) {
                            lyrics += `é—œæ–¼ã€Š${title}ã€‹å˜…æ•…äº‹\n${theme}å˜…å›æ†¶\nä¸€ç›´éƒ½è—å–ºæˆ‘å¿ƒåº•\næ°¸é éƒ½å””æœƒå¿˜è¨˜\nå‘¢ä»½æ„Ÿæƒ…å¥½çè²´\né™ªä¼´æˆ‘åˆ°è€Œå®¶\n`;
                        } else if (title) {
                            lyrics += `ã€Š${title}ã€‹å°±ä¿‚æˆ‘å˜…å¤¢æƒ³\nä¸€è·¯èµ°ä¾†å””å®¹æ˜“\nä½†ä¿‚æˆ‘å¾ä¾†å†‡æ”¾æ£„\nå› ç‚ºç›¸ä¿¡æœƒæœ‰å¥‡è·¡\næ¯ä¸€æ­¥éƒ½å……æ»¿æ„ç¾©\nå‘ä½ç›®æ¨™ç¹¼çºŒå‰é€²\n`;
                        } else {
                            lyrics += `è¡Œéç†Ÿæ‚‰å˜…è¡—é“\nå›æ†¶æ¹§æ™’ä¸Šå¿ƒé ­\nä½ å˜…ç¬‘å®¹ä¾ç„¶å’æº«æŸ”\nä»¤æˆ‘å¿å””ä½å›æœ›\næ­²æœˆå¦‚æµæ°´å’é\nä½†æ„›æƒ…æ°¸é ä¸è®Š\n`;
                        }
                        break;
                        
                    case 'Chorus':
                        if (title) {
                            lyrics += `ã€Š${title}ã€‹ä¿‚æˆ‘å¿ƒä¸­æ°¸é å˜…æ­Œ\nç„¡è«–å»åˆ°é‚Šåº¦éƒ½æœƒè¨˜å¾—\nå‘¢ä»½æ„›æ°¸é å””æœƒè®Š\nå°±ç®—ä¸–ç•Œé»æ¨£æ”¹è®Š\næˆ‘éƒ½æœƒå …æŒåˆ°æœ€å¾Œ\nå› ç‚ºä½ ä¿‚æˆ‘å˜…ä¸€åˆ‡\næ„›ä½ ç›´åˆ°ä¸–ç•Œç›¡é ­\nå‘¢ä»½æƒ…æ°¸é å””æœƒå®Œ\n`;
                        } else {
                            lyrics += `é¦™æ¸¯å˜…å¤œæ™šå¥½éšå¥½éš\nä½†ä¿‚å†‡å’—ä½ å°±å””åŒæ™’\nç‡ˆç«é—ŒçŠè™•\næˆ‘å“‹å˜…æ„›æƒ…æ•…äº‹\næ°¸é éƒ½å””æœƒå®Œçµ\nå¿ƒä¸­æ°¸é æœ‰ä½ å˜…ä½ç½®\næ„›ä½ ç›´åˆ°ä¸–ç•Œç›¡é ­\nå‘¢ä»½æƒ…æ°¸é å””æœƒè®Š\n`;
                        }
                        break;
                        
                    case 'Bridge':
                        lyrics += `å°±ç®—æ™‚é–“é»æ¨£é\nå°±ç®—ä¸–ç•Œé»æ¨£è®Š\næˆ‘å°ä½ å˜…å¿ƒ\næ°¸é éƒ½å””æœƒæ”¹è®Š\n`;
                        break;
                        
                    case 'Outro':
                        if (style === 'ãƒãƒ©ãƒ¼ãƒ‰é¢¨') {
                            lyrics += `éŸ³æ¨‚æ…¢æ…¢fade out\nä½†æ„›æƒ…æ•…äº‹ç¹¼çºŒ\nå–ºæˆ‘å“‹å¿ƒä¸­æ°¸é å­˜åœ¨\n`;
                        } else {
                            lyrics += `å¤œæ·±äººéœå˜…æ™‚å€™\nä¾ç„¶æœƒè«—èµ·ä½ \næ„›æƒ…å˜…æ—‹å¾‹ç¹¼çºŒ\n`;
                        }
                        break;
                        
                    default:
                        lyrics += `[${structure}æ¨‚å™¨æ¼”å¥éƒ¨åˆ†]\n`;
                }
                lyrics += '\n';
            });
            
            return lyrics.trim();
        }

        // æ—¥æœ¬èªæ­Œè©ç”Ÿæˆ
        function generateJapaneseLyrics(title, theme, style) {
            const structures = selectedStructures.length > 0 ? selectedStructures : ['Intro', 'Verse', 'Chorus', 'Bridge', 'Outro'];
            let lyrics = '';
            
            structures.forEach(structure => {
                lyrics += `[${structure}]\n`;
                
                switch(structure) {
                    case 'Intro':
                        if (style === 'ãƒãƒƒãƒ—ã‚¹é¢¨') {
                            lyrics += `æ–°ã—ã„æœãŒå§‹ã¾ã‚‹\nå¸Œæœ›ã®å…‰ãŒå·®ã—è¾¼ã‚“ã§\n`;
                        } else if (style === 'ãƒãƒ©ãƒ¼ãƒ‰é¢¨') {
                            lyrics += `é™ã‹ãªå¤œã«éŸ¿ã\nã‚ãªãŸã®å£°ãŒèã“ãˆã‚‹\n`;
                        } else {
                            lyrics += `ãƒªã‚ºãƒ ãŒå¿ƒã‚’èºã‚‰ã›\nä»Šå¤œã¯ç‰¹åˆ¥ãªå¤œ\n`;
                        }
                        break;
                        
                    case 'Verse':
                        if (title && theme) {
                            lyrics += `ã€Œ${title}ã€ã«ã¤ã„ã¦æ­ŒãŠã†\n${theme}ã®æƒ³ã„ã‚’è¾¼ã‚ã¦\nå¿ƒã«éŸ¿ãè¨€è‘‰ã§\nä¼ãˆãŸã„æ°—æŒã¡ãŒã‚ã‚‹\næ™‚ãŒéãã¦ã‚‚å¤‰ã‚ã‚‰ãªã„\nã“ã®æ„›ã¯æ°¸é ã«\n`;
                        } else if (title) {
                            lyrics += `ã€Œ${title}ã€ã¨ã„ã†åã®ç‰©èª\nå§‹ã¾ã‚Šã¯ã„ã¤ã‚‚å°ã•ãã¦\nå¤¢ã‚’ä¿¡ã˜ã¦æ­©ãç¶šã‘\nè«¦ã‚ãªã„å¿ƒã§\næœªæ¥ã¸ã®æ‰‰ã‚’é–‹ã„ã¦\næ–°ã—ã„ä¸–ç•Œã¸\n`;
                        } else {
                            lyrics += `æ€ã„å‡ºã®ä¸­ã‚’æ­©ã„ã¦\nã‚ãªãŸã®ç¬‘é¡”ã‚’æ¢ã—ã¦ã‚‹\nå­£ç¯€ã¯å·¡ã£ã¦ã‚‚\nå¤‰ã‚ã‚‰ãªã„æƒ³ã„ãŒã‚ã‚‹\næ°¸é ã«ç¶šãæ„›ã®æ­Œ\nå¿ƒã«åˆ»ã¾ã‚Œã¦\n`;
                        }
                        break;
                        
                    case 'Chorus':
                        if (title) {
                            lyrics += `ã€Œ${title}ã€ã¯å¿ƒã®æ­Œ\nã„ã¤ã¾ã§ã‚‚éŸ¿ã„ã¦ã„ã‚‹\nã©ã‚“ãªæ™‚ã‚‚æ”¯ãˆã¦ãã‚Œã‚‹\nå¤§åˆ‡ãªå®ç‰©\næ„›ã¯æ°¸é ã«ç¶šã„ã¦\næ±ºã—ã¦è‰²è¤ªã›ãªã„\nä¸–ç•Œã®æœã¦ã¾ã§\nã“ã®æƒ³ã„ã‚’å±Šã‘ãŸã„\n`;
                        } else {
                            lyrics += `æ„›ã¯æ°¸é ã«ç¾ã—ã\nã‚ãªãŸãŒã„ã‚‹ã‹ã‚‰è¼ã„ã¦\næ˜Ÿç©ºã®ä¸‹ã§\nèª“ã£ãŸç´„æŸ\næ™‚ã‚’è¶…ãˆã¦ã‚‚å¤‰ã‚ã‚‰ãªã„\nå¿ƒã«åˆ»ã¾ã‚ŒãŸæ„›ã®æ­Œ\nä¸–ç•Œä¸­ã«éŸ¿ã‹ã›ã¦\nã“ã®æƒ³ã„ã‚’ä¼ãˆãŸã„\n`;
                        }
                        break;
                        
                    case 'Bridge':
                        lyrics += `ãŸã¨ãˆé“ã®ã‚ŠãŒé™ºã—ãã¦ã‚‚\nã‚ãªãŸãŒã„ã‚Œã°æ€–ããªã„\nä¸€ç·’ã«æ­©ã„ã¦ã„ã“ã†\næœªæ¥ã¸ã®æ‰‰ã‚’é–‹ã„ã¦\n`;
                        break;
                        
                    case 'Outro':
                        if (style === 'ãƒãƒ©ãƒ¼ãƒ‰é¢¨') {
                            lyrics += `é™å¯‚ã®ä¸­ã«éŸ¿ã\næ„›ã®æ—‹å¾‹ã¯æ°¸é ã«\nã‚ãªãŸã¨å…±ã«æ­©ã‚“ã§ã„ã\n`;
                        } else {
                            lyrics += `æ–°ã—ã„æœãŒæ¥ã¦ã‚‚\nã“ã®æ­Œã¯ç¶šã„ã¦ã„ã\nå¿ƒã®ä¸­ã§éŸ¿ãæ„›ã®æ­Œ\n`;
                        }
                        break;
                        
                    default:
                        lyrics += `[${structure}æ¥½å™¨æ¼”å¥éƒ¨åˆ†]\n`;
                }
                lyrics += '\n';
            });
            
            return lyrics.trim();
        }

        // ã‚¤ãƒ³ã‚¹ãƒˆã‚¥ãƒ«ãƒ¡ãƒ³ã‚¿ãƒ«æ§‹æˆç”Ÿæˆ
        function generateInstrumentalStructure(title, theme, style) {
            const structures = selectedStructures.length > 0 ? selectedStructures : ['Intro', 'Verse', 'Chorus', 'Bridge', 'Outro'];
            let lyrics = '';
            
            structures.forEach(structure => {
                lyrics += `[${structure}]\n`;
                
                switch(structure) {
                    case 'Intro':
                        lyrics += `ã‚½ãƒ•ãƒˆãªãƒ”ã‚¢ãƒã§å§‹ã¾ã‚‹\né™ã‹ãªãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ãŒæµã‚Œ\n`;
                        break;
                    case 'Verse':
                        lyrics += `ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ãŒå±•é–‹\nã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ãŒåŠ ã‚ã‚Š\nè±Šã‹ãªãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼ã‚’ä½œã‚‹\n`;
                        break;
                    case 'Chorus':
                        lyrics += `ãƒ•ãƒ«ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ã§ç››ã‚Šä¸ŠãŒã‚Š\nå°è±¡çš„ãªãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ãƒ©ã‚¤ãƒ³\næ„Ÿæƒ…è±Šã‹ãªè¡¨ç¾\n`;
                        break;
                    case 'Bridge':
                        lyrics += `è»¢èª¿ã¨ã¨ã‚‚ã«æ–°ã—ã„å±•é–‹\nã‚½ãƒ­æ¥½å™¨ãŒæ„Ÿæƒ…ã‚’è¡¨ç¾\n`;
                        break;
                    case 'Guitar Solo':
                        lyrics += `æƒ…ç†±çš„ãªã‚®ã‚¿ãƒ¼ã‚½ãƒ­\næŠ€è¡“çš„ã§è¡¨ç¾åŠ›è±Šã‹\n`;
                        break;
                    case 'Piano Solo':
                        lyrics += `ç¾ã—ã„ãƒ”ã‚¢ãƒã‚½ãƒ­\nç¹Šç´°ã§å¿ƒã«éŸ¿ãæ¼”å¥\n`;
                        break;
                    case 'Outro':
                        lyrics += `ä½™éŸ»ã‚’æ®‹ã—ã¦ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ\né™å¯‚ã®ä¸­ã«æ¶ˆãˆã¦ã„ã\n`;
                        break;
                    default:
                        lyrics += `[${structure}æ¥½å™¨æ¼”å¥éƒ¨åˆ†]\n`;
                }
                lyrics += '\n';
            });
            
            return lyrics.trim();
        }

        // æ­Œè©å€™è£œé¸æŠ
        function selectLyrics(candidateDiv, key) {
            // ã™ã¹ã¦ã®å€™è£œã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.lyrics-candidate').forEach(div => {
                div.classList.remove('selected');
            });
            
            // é¸æŠã—ãŸå€™è£œã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            candidateDiv.classList.add('selected');
            
            // æœ€çµ‚æ­Œè©ã¨ã—ã¦è¡¨ç¤º
            const selectedLyrics = generatedLyrics[key];
            document.getElementById('final-lyrics').textContent = selectedLyrics;
            document.getElementById('final-lyrics-section').style.display = 'block';
        }

        // ã‚¿ã‚¤ãƒˆãƒ«ã‚„ãƒ†ãƒ¼ãƒã®å…¥åŠ›ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹é–¢æ•°
        function resetLyricsInput() {
            document.getElementById('song-title').value = '';
            document.getElementById('song-theme').value = '';
            clearPreviousLyrics();
            
            // æ§‹é€ é¸æŠã‚‚ãƒªã‚»ãƒƒãƒˆ
            selectedStructures = [];
            document.querySelectorAll('[onclick^="toggleStructure"]').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        // æ¤œç´¢æ©Ÿèƒ½
        function searchArtists(query) {
            const buttons = document.querySelectorAll('#artists-container .artist-btn');
            buttons.forEach(btn => {
                const artist = btn.dataset.artist || '';
                const style = btn.dataset.style || '';
                if (artist.includes(query.toLowerCase()) || style.includes(query.toLowerCase())) {
                    btn.style.display = 'inline-block';
                } else {
                    btn.style.display = 'none';
                }
            });
        }

        function searchGenres(query) {
            // å…¨ã¦ã®ã‚¸ãƒ£ãƒ³ãƒ«ãƒœã‚¿ãƒ³ã‚’æ¤œç´¢ï¼ˆçµ±ä¸€ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ï¼‰
            const genreButtons = document.querySelectorAll('#genres-container .genre-btn');
            genreButtons.forEach(btn => {
                const genre = btn.dataset.genre || '';
                const buttonText = btn.textContent.toLowerCase();
                if (genre.includes(query.toLowerCase()) || buttonText.includes(query.toLowerCase())) {
                    btn.style.display = 'inline-block';
                } else {
                    btn.style.display = 'none';
                }
            });
        }

        // ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        function copyPrompt() {
            const prompt = document.getElementById('generated-prompt').textContent;
            navigator.clipboard.writeText(prompt).then(() => {
                const messages = {
                    'cantonese': 'æç¤ºå·²è¤‡è£½ï¼',
                    'chinese': 'æç¤ºå·²å¤åˆ¶ï¼',
                    'japanese': 'ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼',
                    'english': 'Prompt copied!'
                };
                alert(messages[selectedPromptLanguage] || messages['japanese']);
            });
        }

        function copyLyrics() {
            const lyrics = document.getElementById('final-lyrics').textContent;
            navigator.clipboard.writeText(lyrics).then(() => {
                const messages = {
                    'cantonese': 'æ­Œè©å·²è¤‡è£½ï¼',
                    'chinese': 'æ­Œè¯å·²å¤åˆ¶ï¼',
                    'japanese': 'æ­Œè©ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼',
                    'english': 'Lyrics copied!'
                };
                alert(messages[selectedPromptLanguage] || messages['japanese']);
            });
        }

        // CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        function uploadCSV() {
            const fileInput = document.getElementById('csv-upload');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                const lines = content.split('\n').filter(line => line.trim());
                
                // æ–°ã—ã„ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’è¿½åŠ 
                const newArtists = [];
                lines.forEach(line => {
                    const artistName = line.trim();
                    if (artistName && !artists.find(a => a.name === artistName)) {
                        newArtists.push({
                            name: artistName,
                            style: getDefaultStyle(artistName)
                        });
                    }
                });
                
                if (newArtists.length > 0) {
                    // æ—¢å­˜ã®ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆé…åˆ—ã«è¿½åŠ 
                    artists.push(...newArtists);
                    
                    // ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
                    const container = document.getElementById('artists-container');
                    container.innerHTML = '';
                    initializeArtists();
                    updateCounts();
                    
                    document.getElementById('upload-status').innerHTML = 
                        `<span class="text-green-600"><i class="fas fa-check-circle mr-2"></i>${newArtists.length}å€‹ã®æ–°ã—ã„ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸï¼</span>`;
                } else {
                    document.getElementById('upload-status').innerHTML = 
                        '<span class="text-yellow-600"><i class="fas fa-info-circle mr-2"></i>æ–°ã—ã„ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</span>';
                }
            };
            
            reader.onerror = function() {
                document.getElementById('upload-status').innerHTML = 
                    '<span class="text-red-600"><i class="fas fa-exclamation-circle mr-2"></i>ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</span>';
            };
            
            reader.readAsText(file);
        }

        // ãƒ­ãƒ¼ã‚«ãƒ«CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«èª­ã¿è¾¼ã‚€ï¼ˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ï¼‰
        async function loadLocalCSV() {
            try {
                // suno.csvã¨suno-2.csvã‚’èª­ã¿è¾¼ã‚€è©¦ã¿
                const csvFiles = ['suno.csv', 'suno-2.csv'];
                
                for (const fileName of csvFiles) {
                    try {
                        const response = await fetch(fileName);
                        if (response.ok) {
                            const content = await response.text();
                            const lines = content.split('\n').filter(line => line.trim());
                            
                            lines.forEach(line => {
                                const artistName = line.trim();
                                if (artistName && !artists.find(a => a.name === artistName)) {
                                    artists.push({
                                        name: artistName,
                                        style: artistStyles[artistName] || getDefaultStyle(artistName)
                                    });
                                }
                            });
                        }
                    } catch (err) {
                        console.log(`${fileName}ã®èª­ã¿è¾¼ã¿ã‚’ã‚¹ã‚­ãƒƒãƒ—:`, err);
                    }
                }
                
                // ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
                const container = document.getElementById('artists-container');
                if (container) {
                    container.innerHTML = '';
                    initializeArtists();
                    updateCounts();
                }
            } catch (error) {
                console.log('ãƒ­ãƒ¼ã‚«ãƒ«CSVãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
        window.addEventListener('DOMContentLoaded', function() {
            loadLocalCSV();
        });

        // ===== AIæ­Œè©ç”Ÿæˆæ©Ÿèƒ½ï¼ˆlyrics.htmlã‹ã‚‰çµ±åˆï¼‰ =====
        
        // DOMè¦ç´ ã®å–å¾—
        const generateAIBtn = document.getElementById('generateAIBtn');
        const processPanel = document.getElementById('processPanel');
        const resultPanel = document.getElementById('resultPanel');
        const improvementPanel = document.getElementById('improvementPanel');
        const lyricsOutput = document.getElementById('lyricsOutput');
        const emotionResult = document.getElementById('emotionResult');

        // AIæ­Œè©ç”Ÿæˆãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        if (generateAIBtn) {
            generateAIBtn.addEventListener('click', async function() {
                // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                generateAIBtn.disabled = true;
                generateAIBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>ç”Ÿæˆä¸­...';

                // å…¥åŠ›å€¤ã®å–å¾—
                const settings = {
                    emotion: document.getElementById('primaryEmotion').value,
                    intensity: document.getElementById('emotionIntensity').value,
                    theme: document.getElementById('ai-theme').value,
                    genre: document.getElementById('ai-genre').value,
                    tempo: document.getElementById('tempo').value,
                    rhymePattern: document.getElementById('rhymePattern').value,
                    structure: document.getElementById('ai-structure').value,
                    lineCount: document.getElementById('lineCount').value,
                    style: document.getElementById('ai-style').value,
                    inspiration: document.getElementById('inspiration').value,
                    avoidance: document.getElementById('avoidance').value
                };

                // ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ãƒãƒ«ã‚’è¡¨ç¤º
                processPanel.classList.remove('hidden');
                resultPanel.classList.add('hidden');
                improvementPanel.classList.add('hidden');

                // æ„Ÿæƒ…åˆ†æã®å®Ÿè¡Œ
                await simulateEmotionAnalysis(settings);

                // æ­Œè©ç”Ÿæˆã®å®Ÿè¡Œ
                await generateAILyrics(settings);

                // çµæœãƒ‘ãƒãƒ«ã‚’è¡¨ç¤º
                resultPanel.classList.remove('hidden');
                improvementPanel.classList.remove('hidden');

                // ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                generateAIBtn.disabled = false;
                generateAIBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>AIæ­Œè©ã‚’ç”Ÿæˆã™ã‚‹';
            });
        }

        // æ„Ÿæƒ…åˆ†æã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        async function simulateEmotionAnalysis(settings) {
            const emotionLabels = {
                'joy': 'å–œã³',
                'sadness': 'æ‚²ã—ã¿',
                'love': 'æ„›',
                'nostalgia': 'éƒ·æ„',
                'hope': 'å¸Œæœ›',
                'anger': 'æ€’ã‚Š',
                'fear': 'æã‚Œ'
            };

            if (emotionResult) {
                emotionResult.textContent = emotionLabels[settings.emotion];
            }

            // æ„Ÿæƒ…ãƒãƒ£ãƒ¼ãƒˆã®ä½œæˆ
            const ctx = document.getElementById('emotionChart');
            if (ctx) {
                emotionChart = new Chart(ctx.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['å–œã³', 'æ‚²ã—ã¿', 'æ„›', 'å¸Œæœ›', 'æ€’ã‚Š', 'æã‚Œ'],
                        datasets: [{
                            label: 'æ„Ÿæƒ…å¼·åº¦',
                            data: generateEmotionData(settings.emotion, settings.intensity),
                            borderColor: 'rgba(79, 70, 229, 1)',
                            backgroundColor: 'rgba(79, 70, 229, 0.1)',
                            pointBackgroundColor: 'rgba(79, 70, 229, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(79, 70, 229, 1)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10
                            }
                        }
                    }
                });
            }

            // è¨€èªåˆ†æãƒãƒ£ãƒ¼ãƒˆã®ä½œæˆ
            const ctx2 = document.getElementById('linguisticChart');
            if (ctx2) {
                linguisticChart = new Chart(ctx2.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['èªå½™è±Šå¯Œåº¦', 'éŸ»å¾‹é©åˆåº¦', 'éŸ³æ¥½çš„èª¿å’Œ', 'ç‹¬å‰µæ€§', 'æ„Ÿæƒ…è¡¨ç¾'],
                        datasets: [{
                            label: 'è©•ä¾¡ã‚¹ã‚³ã‚¢',
                            data: [85, 92, 88, 76, 94],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(139, 92, 246, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderColor: [
                                'rgba(34, 197, 94, 1)',
                                'rgba(59, 130, 246, 1)',
                                'rgba(139, 92, 246, 1)',
                                'rgba(245, 158, 11, 1)',
                                'rgba(239, 68, 68, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            // 2ç§’å¾…æ©Ÿï¼ˆåˆ†ææ™‚é–“ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
            await new Promise(resolve => setTimeout(resolve, 2000));
        }

        // AIæ­Œè©ç”Ÿæˆ
        async function generateAILyrics(settings) {
            // ã‚µãƒ³ãƒ—ãƒ«æ­Œè©ã‹ã‚‰é¸æŠ
            let lyrics = sampleLyrics[settings.emotion] || sampleLyrics['joy'];

            // è¨­å®šã«å¿œã˜ã¦æ­Œè©ã‚’èª¿æ•´
            if (settings.theme) {
                lyrics = `ã€ãƒ†ãƒ¼ãƒ: ${settings.theme}ã€‘\n\n` + lyrics;
            }

            // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°åŠ¹æœã§æ­Œè©ã‚’è¡¨ç¤º
            if (lyricsOutput) {
                await typeText(lyricsOutput, lyrics);
            }

            // å“è³ªãƒãƒ£ãƒ¼ãƒˆã®ä½œæˆ
            const ctx3 = document.getElementById('qualityChart');
            if (ctx3) {
                qualityChart = new Chart(ctx3.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['æ„Ÿæƒ…çš„ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ', 'è¨€èªçš„ç¾ã—ã•', 'éŸ³æ¥½çš„é©åˆæ€§', 'ç‹¬å‰µæ€§'],
                        datasets: [{
                            data: [84, 92, 88, 76],
                            backgroundColor: [
                                'rgba(239, 68, 68, 0.8)',
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(245, 158, 11, 0.8)'
                            ],
                            borderColor: [
                                'rgba(239, 68, 68, 1)',
                                'rgba(34, 197, 94, 1)',
                                'rgba(59, 130, 246, 1)',
                                'rgba(245, 158, 11, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        // æ„Ÿæƒ…ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        function generateEmotionData(primaryEmotion, intensity) {
            const base = [3, 3, 3, 3, 3, 3];
            const emotionMap = {
                'joy': 0,
                'sadness': 1,
                'love': 2,
                'hope': 3,
                'anger': 4,
                'fear': 5,
                'nostalgia': 1
            };

            const index = emotionMap[primaryEmotion] || 0;
            base[index] = parseInt(intensity);

            // é–¢é€£ã™ã‚‹æ„Ÿæƒ…ã‚‚å°‘ã—ä¸Šã’ã‚‹
            if (primaryEmotion === 'love') {
                base[0] = Math.max(base[0], 5); // å–œã³
                base[3] = Math.max(base[3], 4); // å¸Œæœ›
            } else if (primaryEmotion === 'nostalgia') {
                base[0] = Math.max(base[0], 4); // å–œã³
                base[1] = Math.max(base[1], 6); // æ‚²ã—ã¿
            }

            return base;
        }

        // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°åŠ¹æœ
        async function typeText(element, text) {
            element.textContent = '';
            element.classList.add('typing-animation');

            for (let i = 0; i < text.length; i++) {
                element.textContent += text[i];
                await new Promise(resolve => setTimeout(resolve, 50));
            }

            element.classList.remove('typing-animation');
        }

        // å†ç”Ÿæˆãƒœã‚¿ãƒ³
        const regenerateBtn = document.getElementById('regenerateBtn');
        if (regenerateBtn) {
            regenerateBtn.addEventListener('click', function() {
                if (generateAIBtn) generateAIBtn.click();
            });
        }

        // æ”¹è‰¯ãƒœã‚¿ãƒ³
        const refineBtn = document.getElementById('refineBtn');
        if (refineBtn) {
            refineBtn.addEventListener('click', function() {
                alert('æ”¹è‰¯æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚ã‚ˆã‚Šé«˜åº¦ãªAIæŠ€è¡“ã‚’çµ„ã¿è¾¼ã‚€äºˆå®šã§ã™ã€‚');
            });
        }

        // ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³
        const exportBtn = document.getElementById('exportBtn');
        if (exportBtn) {
            exportBtn.addEventListener('click', function() {
                const lyrics = lyricsOutput ? lyricsOutput.textContent : '';
                const blob = new Blob([lyrics], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'generated_lyrics.txt';
                a.click();
                URL.revokeObjectURL(url);
            });
        }

        // æ„Ÿæƒ…å¼·åº¦ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆ
        const emotionIntensitySlider = document.getElementById('emotionIntensity');
        if (emotionIntensitySlider) {
            emotionIntensitySlider.addEventListener('input', function() {
                const value = this.value;
                const meter = document.querySelector('.emotion-meter');
                if (meter) {
                    const percentage = (value / 10) * 100;
                    meter.style.background = `linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #3b82f6 75%, #8b5cf6 100%)`;
                    meter.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
                }
            });
            
            // åˆæœŸåŒ–
            emotionIntensitySlider.dispatchEvent(new Event('input'));
        }

        // ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆã‚’æ›´æ–°
        function setMode(mode) {
            // ãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            
            // ã™ã¹ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º
            document.getElementById('prompt-creation-section').style.display = 'none';
            const proSection = document.getElementById('pro-lyrics-creation-section');
            if (proSection) proSection.style.display = 'none';
            
            if (mode === 'prompt') {
                document.getElementById('prompt-mode-btn').classList.add('active');
                document.getElementById('prompt-creation-section').style.display = 'block';
                // åˆæœŸè¡¨ç¤ºï¼šãƒœãƒ¼ã‚«ãƒ«ã‚¿ã‚°ã‚’è¡¨ç¤º
                document.getElementById('vocal-section').style.display = 'block';
                document.getElementById('moods-section').style.display = 'none';
                document.getElementById('genres-section').style.display = 'none';
                document.getElementById('artists-section').style.display = 'none';
            } else if (mode === 'pro-lyrics') {
                document.getElementById('pro-lyrics-mode-btn').classList.add('active');
                if (proSection) proSection.style.display = 'block';
                // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º
                const promptSection = document.getElementById('prompt-section');
                if (promptSection) {
                    promptSection.style.display = 'none';
                }
            }
        }

        // ===== Proæ­Œè©ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ =====
        
        // Proæ­Œè©ç”Ÿæˆæ©Ÿèƒ½
        function generateProLyrics() {
            const output = document.getElementById('proLyricsOutput');
            const evaluation = document.getElementById('proLyricsEvaluation');
            
            // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
            const params = getProLyricsParameters();
            
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            output.innerHTML = `
                <div class="text-center">
                    <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"></div>
                    <p class="text-lg text-gray-600">Pro AI ãŒé«˜åº¦ãªæ­Œè©ã‚’ç”Ÿæˆä¸­...</p>
                    <p class="text-sm text-gray-500 mt-2">ãƒ†ãƒ¼ãƒ: ${params.theme} | ã‚¸ãƒ£ãƒ³ãƒ«: ${params.genre} | æ„Ÿæƒ…: ${params.emotion}</p>
                </div>
            `;
            
            // 3ç§’å¾Œã«ç”Ÿæˆçµæœã‚’è¡¨ç¤º
            setTimeout(() => {
                const generatedLyrics = generateLyricsBasedOnParameters(params);
                output.innerHTML = generatedLyrics;
                
                evaluation.classList.remove('hidden');
                
                // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
                const scores = calculateProScores(params);
                animateProScore('proEmotionScore', scores.emotion);
                animateProScore('proLanguageScore', scores.language);
                animateProScore('proOriginalityScore', scores.originality);
                animateProScore('proMusicalScore', scores.musical);
            }, 3000);
        }
        
        // Proæ­Œè©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹é–¢æ•°
        function getProLyricsParameters() {
            // å®‰å…¨ã«DOMè¦ç´ ã‚’å–å¾—ã™ã‚‹é–¢æ•°
            function safeGetValue(id, defaultValue) {
                const element = document.getElementById(id);
                return element ? element.value : defaultValue;
            }
            
            function safeGetChecked(id, defaultValue) {
                const element = document.getElementById(id);
                return element ? element.checked : defaultValue;
            }
            
            return {
                theme: safeGetValue('pro-theme', 'å¸Œæœ›'),
                genre: safeGetValue('pro-genre', 'ãƒãƒƒãƒ—ã‚¹'),
                targetAge: safeGetValue('pro-age', 'å…¨å¹´é½¢'),
                emotion: safeGetValue('pro-emotion', 'å–œã³'),
                emotionIntensity: safeGetValue('pro-emotion-intensity', 5),
                emotionPattern: safeGetValue('pro-emotion-change', 'ä¸€å®š'),
                languageLevel: safeGetValue('pro-language-level', 'æ—¥å¸¸èª'),
                metaphorUsage: safeGetValue('pro-metaphor', 6),
                rhymePattern: safeGetValue('pro-rhythm', 'è‡ªç„¶ãªæµã‚Œ'),
                keywords: safeGetValue('pro-keywords', ''),
                avoidWords: safeGetValue('pro-avoid', ''),
                // æ§‹æˆã¯å›ºå®šå€¤ã§è¨­å®šï¼ˆHTMLã«å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãªã„ãŸã‚ï¼‰
                verseCount: 2,
                chorusCount: 2,
                bridgeInclude: true,
                introInclude: true,
                outroInclude: true
            };
        }
        
        // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦æ­Œè©ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        function generateLyricsBasedOnParameters(params) {
            // å¤šè¨€èªå¯¾å¿œã®ãƒ†ãƒ¼ãƒåˆ¥æ­Œè©ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
            const themeTemplates = {
                'cantonese': {
                    'å¸Œæœ›': {
                        keywords: ['å¤¢æƒ³', 'æœªä¾†', 'å…‰æ˜', 'å‰é€²', 'ç›¸ä¿¡', 'æŒ‘æˆ°', 'æˆé•·'],
                        imagery: ['æœé™½', 'æ–°ç¶ ', 'è—å¤©', 'é¢¨', 'é“è·¯', 'é–€', 'ç¿…è†€']
                    },
                    'æ‹æ„›': {
                        keywords: ['æ„›æƒ…', 'å¿ƒéˆ', 'æ€å¿µ', 'ä½ ', 'æ°¸æ†', 'æ‰¿è«¾', 'æƒ…ç·£'],
                        imagery: ['æ˜Ÿç©º', 'æœˆäº®', 'èŠ±æœµ', 'æµ·æ´‹', 'æ‰‹', 'çœ¼ç›', 'å¾®ç¬‘']
                    },
                    'å‹æƒ…': {
                        keywords: ['æœ‹å‹', 'ä¿¡ä»»', 'æ”¯æŒ', 'ä¸€èµ·', 'æ­¡ç¬‘', 'å›æ†¶', 'å‹èª¼'],
                        imagery: ['å¤•é™½', 'å­¸æ ¡', 'å…¬åœ’', 'æ©‹æ¨‘', 'é“è·¯', 'å¤©ç©º', 'å½©è™¹']
                    },
                    'æˆé•·': {
                        keywords: ['è®ŠåŒ–', 'å­¸ç¿’', 'å …å¼·', 'å…‹æœ', 'ç™¼ç¾', 'é€²æ­¥', 'æˆç†Ÿ'],
                        imagery: ['å±±å³°', 'æ²³æµ', 'æ£®æ—', 'å­£ç¯€', 'é›¨æ°´', 'å¤ªé™½', 'å¤§åœ°']
                    },
                    'æ•…éƒ·': {
                        keywords: ['æ‡·å¿µ', 'å›å®¶', 'å®¶äºº', 'è¨˜æ†¶', 'æº«æš–', 'å®‰å¯§', 'æ ¹æº'],
                        imagery: ['é„‰æ‘', 'æ¯è¦ª', 'å®¶', 'ç¯€æ…¶', 'é¦™å‘³', 'è²éŸ³', 'é¢¨æ™¯']
                    }
                },
                'chinese': {
                    'å¸Œæœ›': {
                        keywords: ['æ¢¦æƒ³', 'æœªæ¥', 'å…‰æ˜', 'å‰è¿›', 'ç›¸ä¿¡', 'æŒ‘æˆ˜', 'æˆé•¿'],
                        imagery: ['æœé˜³', 'æ–°ç»¿', 'è“å¤©', 'é£', 'é“è·¯', 'é—¨', 'ç¿…è†€']
                    },
                    'æ‹æ„›': {
                        keywords: ['çˆ±æƒ…', 'å¿ƒçµ', 'æ€å¿µ', 'ä½ ', 'æ°¸æ’', 'æ‰¿è¯º', 'æƒ…ç¼˜'],
                        imagery: ['æ˜Ÿç©º', 'æœˆäº®', 'èŠ±æœµ', 'æµ·æ´‹', 'æ‰‹', 'çœ¼ç›', 'å¾®ç¬‘']
                    },
                    'å‹æƒ…': {
                        keywords: ['æœ‹å‹', 'ä¿¡ä»»', 'æ”¯æŒ', 'ä¸€èµ·', 'æ¬¢ç¬‘', 'å›å¿†', 'å‹è°Š'],
                        imagery: ['å¤•é˜³', 'å­¦æ ¡', 'å…¬å›­', 'æ¡¥æ¢', 'é“è·¯', 'å¤©ç©º', 'å½©è™¹']
                    },
                    'æˆé•·': {
                        keywords: ['å˜åŒ–', 'å­¦ä¹ ', 'åšå¼º', 'å…‹æœ', 'å‘ç°', 'è¿›æ­¥', 'æˆç†Ÿ'],
                        imagery: ['å±±å³°', 'æ²³æµ', 'æ£®æ—', 'å­£èŠ‚', 'é›¨æ°´', 'å¤ªé˜³', 'å¤§åœ°']
                    },
                    'æ•…éƒ·': {
                        keywords: ['æ€€å¿µ', 'å›å®¶', 'å®¶äºº', 'è®°å¿†', 'æ¸©æš–', 'å®‰å®', 'æ ¹æº'],
                        imagery: ['ä¹¡æ‘', 'æ¯äº²', 'å®¶', 'èŠ‚åº†', 'é¦™å‘³', 'å£°éŸ³', 'é£æ™¯']
                    }
                },
                'japanese': {
                    'å¸Œæœ›': {
                        keywords: ['å¤¢', 'æœªæ¥', 'å…‰', 'æ­©ã‚€', 'ä¿¡ã˜ã‚‹', 'æŒ‘æˆ¦', 'æˆé•·'],
                        imagery: ['æœæ—¥', 'æ–°ç·‘', 'é’ç©º', 'é¢¨', 'é“', 'æ‰‰', 'ç¿¼']
                    },
                    'æ‹æ„›': {
                        keywords: ['æ„›', 'å¿ƒ', 'æƒ³ã„', 'å›', 'æ°¸é ', 'ç´„æŸ', 'çµ†'],
                        imagery: ['æ˜Ÿç©º', 'æœˆ', 'èŠ±', 'æµ·', 'æ‰‹', 'ç³', 'å¾®ç¬‘ã¿']
                    },
                    'å‹æƒ…': {
                        keywords: ['ä»²é–“', 'ä¿¡é ¼', 'æ”¯ãˆ', 'å…±ã«', 'ç¬‘é¡”', 'æ€ã„å‡º', 'çµ†'],
                        imagery: ['å¤•æ—¥', 'å­¦æ ¡', 'å…¬åœ’', 'æ©‹', 'é“', 'ç©º', 'è™¹']
                    },
                    'æˆé•·': {
                        keywords: ['å¤‰åŒ–', 'å­¦ã³', 'å¼·ã•', 'ä¹—ã‚Šè¶Šãˆã‚‹', 'ç™ºè¦‹', 'é€²æ­©', 'æˆç†Ÿ'],
                        imagery: ['å±±', 'å·', 'æ£®', 'å­£ç¯€', 'é›¨', 'å¤ªé™½', 'å¤§åœ°']
                    },
                    'æ•…éƒ·': {
                        keywords: ['æ‡ã‹ã—ã„', 'å¸°ã‚‹', 'å®¶æ—', 'è¨˜æ†¶', 'æ¸©ã‹ã„', 'å®‰ã‚‰ã', 'åŸç‚¹'],
                        imagery: ['ç”°èˆ', 'æ¯', 'å®¶', 'ç¥­ã‚Š', 'åŒ‚ã„', 'å£°', 'æ™¯è‰²']
                    }
                },
                'english': {
                    'å¸Œæœ›': {
                        keywords: ['dream', 'future', 'light', 'walk', 'believe', 'challenge', 'growth'],
                        imagery: ['sunrise', 'green', 'blue sky', 'wind', 'path', 'door', 'wings']
                    },
                    'æ‹æ„›': {
                        keywords: ['love', 'heart', 'feelings', 'you', 'forever', 'promise', 'bond'],
                        imagery: ['starry sky', 'moon', 'flowers', 'ocean', 'hands', 'eyes', 'smile']
                    },
                    'å‹æƒ…': {
                        keywords: ['friends', 'trust', 'support', 'together', 'laughter', 'memories', 'friendship'],
                        imagery: ['sunset', 'school', 'park', 'bridge', 'road', 'sky', 'rainbow']
                    },
                    'æˆé•·': {
                        keywords: ['change', 'learn', 'strength', 'overcome', 'discover', 'progress', 'mature'],
                        imagery: ['mountain', 'river', 'forest', 'seasons', 'rain', 'sun', 'earth']
                    },
                    'æ•…éƒ·': {
                        keywords: ['nostalgic', 'return', 'family', 'memory', 'warm', 'peace', 'origin'],
                        imagery: ['countryside', 'mother', 'home', 'festival', 'scent', 'voice', 'scenery']
                    }
                }
            };
            
            // å¤šè¨€èªå¯¾å¿œã®ã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´
            const genreStyles = {
                'cantonese': {
                    'ãƒãƒƒãƒ—ã‚¹': { rhythm: 'è¼•å¿«', language: 'éš¨æ„' },
                    'ãƒ­ãƒƒã‚¯': { rhythm: 'å¼·å‹', language: 'ç†±æƒ…' },
                    'ãƒãƒ©ãƒ¼ãƒ‰': { rhythm: 'ç·©æ…¢', language: 'æ„Ÿæ€§' },
                    'ãƒ•ã‚©ãƒ¼ã‚¯': { rhythm: 'è‡ªç„¶', language: 'æ¨¸ç´ ' },
                    'ã‚¸ãƒ£ã‚º': { rhythm: 'æ–æ“º', language: 'ç²¾ç·»' }
                },
                'chinese': {
                    'ãƒãƒƒãƒ—ã‚¹': { rhythm: 'è½»å¿«', language: 'éšæ„' },
                    'ãƒ­ãƒƒã‚¯': { rhythm: 'å¼ºåŠ²', language: 'çƒ­æƒ…' },
                    'ãƒãƒ©ãƒ¼ãƒ‰': { rhythm: 'ç¼“æ…¢', language: 'æ„Ÿæ€§' },
                    'ãƒ•ã‚©ãƒ¼ã‚¯': { rhythm: 'è‡ªç„¶', language: 'æœ´ç´ ' },
                    'ã‚¸ãƒ£ã‚º': { rhythm: 'æ‘‡æ‘†', language: 'ç²¾è‡´' }
                },
                'japanese': {
                    'ãƒãƒƒãƒ—ã‚¹': { rhythm: 'è»½å¿«', language: 'ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«' },
                    'ãƒ­ãƒƒã‚¯': { rhythm: 'åŠ›å¼·ã„', language: 'æƒ…ç†±çš„' },
                    'ãƒãƒ©ãƒ¼ãƒ‰': { rhythm: 'ã‚†ã£ãŸã‚Š', language: 'æ„Ÿæƒ…çš„' },
                    'ãƒ•ã‚©ãƒ¼ã‚¯': { rhythm: 'è‡ªç„¶ä½“', language: 'ç´ æœ´' },
                    'ã‚¸ãƒ£ã‚º': { rhythm: 'ã‚¹ã‚¦ã‚£ãƒ³ã‚°', language: 'æ´—ç·´' }
                },
                'english': {
                    'ãƒãƒƒãƒ—ã‚¹': { rhythm: 'upbeat', language: 'casual' },
                    'ãƒ­ãƒƒã‚¯': { rhythm: 'powerful', language: 'passionate' },
                    'ãƒãƒ©ãƒ¼ãƒ‰': { rhythm: 'slow', language: 'emotional' },
                    'ãƒ•ã‚©ãƒ¼ã‚¯': { rhythm: 'natural', language: 'simple' },
                    'ã‚¸ãƒ£ã‚º': { rhythm: 'swing', language: 'sophisticated' }
                }
            };
            
            // å¤šè¨€èªå¯¾å¿œã®æ„Ÿæƒ…åˆ¥è¡¨ç¾èª¿æ•´
            const emotionExpressions = {
                'cantonese': {
                    'å–œã³': ['é–ƒäº®', 'è·³èº', 'èˆè¹ˆ', 'æ­Œå”±', 'æ­¡ç¬‘'],
                    'æ‚²ã—ã¿': ['çœ¼æ·š', 'é›¨æ°´', 'é™°å½±', 'å¯‚éœ', 'é›¢åˆ¥'],
                    'æ€’ã‚Š': ['ç‡ƒç‡’', 'å‘å–Š', 'é¢¨æš´', 'é›·é›»', 'æˆ°é¬¥'],
                    'å¹³å’Œ': ['å¹³éœ', 'å®‰éœ', 'æº«æŸ”', 'æ“æŠ±', 'æ²»ç™’'],
                    'èˆˆå¥®': ['å¥”è·‘', 'é£›ç¿”', 'çˆ†ç™¼', 'ç†±çƒˆ', 'èºå‹•']
                },
                'chinese': {
                    'å–œã³': ['é—ªäº®', 'è·³è·ƒ', 'èˆè¹ˆ', 'æ­Œå”±', 'æ¬¢ç¬‘'],
                    'æ‚²ã—ã¿': ['çœ¼æ³ª', 'é›¨æ°´', 'é˜´å½±', 'å¯‚é™', 'ç¦»åˆ«'],
                    'æ€’ã‚Š': ['ç‡ƒçƒ§', 'å‘å–Š', 'é£æš´', 'é›·ç”µ', 'æˆ˜æ–—'],
                    'å¹³å’Œ': ['å¹³é™', 'å®‰é™', 'æ¸©æŸ”', 'æ‹¥æŠ±', 'æ²»æ„ˆ'],
                    'èˆˆå¥®': ['å¥”è·‘', 'é£ç¿”', 'çˆ†å‘', 'çƒ­çƒˆ', 'è·ƒåŠ¨']
                },
                'japanese': {
                    'å–œã³': ['è¼ã', 'å¼¾ã‚€', 'è¸Šã‚‹', 'æ­Œã†', 'ç¬‘ã†'],
                    'æ‚²ã—ã¿': ['æ¶™', 'é›¨', 'å½±', 'é™å¯‚', 'åˆ¥ã‚Œ'],
                    'æ€’ã‚Š': ['ç‡ƒãˆã‚‹', 'å«ã¶', 'åµ', 'é›·', 'æˆ¦ã†'],
                    'å¹³å’Œ': ['ç©ã‚„ã‹', 'é™ã‹', 'å„ªã—ã„', 'åŒ…ã‚€', 'ç™’ã™'],
                    'èˆˆå¥®': ['é§†ã‘ã‚‹', 'é£›ã¶', 'çˆ†ç™º', 'ç†±ã„', 'èºå‹•']
                },
                'english': {
                    'å–œã³': ['shine', 'bounce', 'dance', 'sing', 'laugh'],
                    'æ‚²ã—ã¿': ['tears', 'rain', 'shadow', 'silence', 'farewell'],
                    'æ€’ã‚Š': ['burn', 'shout', 'storm', 'thunder', 'fight'],
                    'å¹³å’Œ': ['calm', 'quiet', 'gentle', 'embrace', 'heal'],
                    'èˆˆå¥®': ['run', 'fly', 'explode', 'hot', 'dynamic']
                }
            };
            
            // é¸æŠã•ã‚ŒãŸè¨€èªã«åŸºã¥ã„ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å–å¾—
            const langTemplates = themeTemplates[selectedPromptLanguage] || themeTemplates['japanese'];
            const template = langTemplates[params.theme] || langTemplates['å¸Œæœ›'];
            const langGenreStyles = genreStyles[selectedPromptLanguage] || genreStyles['japanese'];
            const style = langGenreStyles[params.genre] || langGenreStyles['ãƒãƒƒãƒ—ã‚¹'];
            const langEmotionExpressions = emotionExpressions[selectedPromptLanguage] || emotionExpressions['japanese'];
            const expressions = langEmotionExpressions[params.emotion] || langEmotionExpressions['å–œã³'];
            
            // æ§‹æˆã‚’æ±ºå®š
            let structure = [];
            if (params.introInclude) structure.push('Intro');
            for (let i = 1; i <= params.verseCount; i++) {
                structure.push(`Verse ${i}`);
                if (i <= params.chorusCount) structure.push('Chorus');
            }
            if (params.bridgeInclude) structure.push('Bridge');
            if (params.chorusCount > 0) structure.push('Final Chorus');
            if (params.outroInclude) structure.push('Outro');
            
            // å¤šè¨€èªå¯¾å¿œã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆ
            const displayTexts = {
                'cantonese': {
                    title: 'ç”Ÿæˆå˜…Proæ­Œè©',
                    theme: 'ä¸»é¡Œ',
                    genre: 'é¡å‹',
                    emotion: 'æƒ…æ„Ÿ',
                    intensity: 'å¼·åº¦',
                    languageLevel: 'èªè¨€ç¨‹åº¦',
                    rhythm: 'éŸ»å¾‹',
                    metaphor: 'æ¯”å–»ä½¿ç”¨'
                },
                'chinese': {
                    title: 'ç”Ÿæˆçš„Proæ­Œè¯',
                    theme: 'ä¸»é¢˜',
                    genre: 'ç±»å‹',
                    emotion: 'æƒ…æ„Ÿ',
                    intensity: 'å¼ºåº¦',
                    languageLevel: 'è¯­è¨€ç¨‹åº¦',
                    rhythm: 'éŸµå¾‹',
                    metaphor: 'æ¯”å–»ä½¿ç”¨'
                },
                'japanese': {
                    title: 'ç”Ÿæˆã•ã‚ŒãŸProæ­Œè©',
                    theme: 'ãƒ†ãƒ¼ãƒ',
                    genre: 'ã‚¸ãƒ£ãƒ³ãƒ«',
                    emotion: 'æ„Ÿæƒ…',
                    intensity: 'å¼·åº¦',
                    languageLevel: 'è¨€èªãƒ¬ãƒ™ãƒ«',
                    rhythm: 'éŸ»å¾‹',
                    metaphor: 'æ¯”å–©ä½¿ç”¨'
                },
                'english': {
                    title: 'Generated Pro Lyrics',
                    theme: 'Theme',
                    genre: 'Genre',
                    emotion: 'Emotion',
                    intensity: 'Intensity',
                    languageLevel: 'Language Level',
                    rhythm: 'Rhythm',
                    metaphor: 'Metaphor Usage'
                }
            };
            
            const currentTexts = displayTexts[selectedPromptLanguage] || displayTexts['japanese'];
            
            // æ­Œè©ç”Ÿæˆ
            let lyricsHTML = `
                <div class="space-y-8">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">${currentTexts.title}</h3>
                        <p class="text-gray-600">${currentTexts.theme}: ${params.theme} | ${currentTexts.genre}: ${params.genre} | ${currentTexts.emotion}: ${params.emotion} (${currentTexts.intensity}: ${params.emotionIntensity}%)</p>
                        <p class="text-sm text-gray-500">${currentTexts.languageLevel}: ${params.languageLevel} | ${currentTexts.rhythm}: ${params.rhymePattern} | ${currentTexts.metaphor}: ${params.metaphorUsage}%</p>
                    </div>
                    <div class="space-y-6">
            `;
            
            structure.forEach((section, index) => {
                const color = getSectionColor(section);
                const content = generateSectionContent(section, template, expressions, params);
                
                lyricsHTML += `
                    <div class="bg-${color}-50 border-l-4 border-${color}-500 p-4 rounded">
                        <h4 class="font-semibold text-${color}-800 mb-2">[${section}]</h4>
                        <p class="text-gray-700 leading-relaxed">${content}</p>
                    </div>
                `;
            });
            
            lyricsHTML += `
                    </div>
                </div>
            `;
            
            return lyricsHTML;
        }
        
        // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è‰²ã‚’æ±ºå®š
        function getSectionColor(section) {
            if (section.includes('Intro') || section.includes('Outro')) return 'green';
            if (section.includes('Verse')) return 'blue';
            if (section.includes('Chorus')) return 'purple';
            if (section.includes('Bridge')) return 'orange';
            return 'gray';
        }
        
        // ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã®æ­Œè©å†…å®¹ã‚’ç”Ÿæˆ
        function generateSectionContent(section, template, expressions, params) {
            const keywords = template.keywords;
            const imagery = template.imagery;
            const intensity = parseInt(params.emotionIntensity);
            const metaphorLevel = parseInt(params.metaphorUsage);
            
            // ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
            if (section.includes('Intro')) {
                return generateIntroContent(keywords, imagery, expressions, intensity);
            } else if (section.includes('Verse')) {
                return generateVerseContent(keywords, imagery, expressions, params);
            } else if (section.includes('Chorus')) {
                return generateChorusContent(keywords, expressions, params);
            } else if (section.includes('Bridge')) {
                return generateBridgeContent(keywords, imagery, expressions, params);
            } else if (section.includes('Outro')) {
                return generateOutroContent(keywords, imagery, expressions, intensity);
            }
            
            return 'ã‚«ã‚¹ã‚¿ãƒ æ­Œè©ãŒã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™';
        }
        
        // Introç”¨æ­Œè©ç”Ÿæˆï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰
        function generateIntroContent(keywords, imagery, expressions, intensity) {
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `${imagery[0]}ä¸­${expressions[0]} ${keywords[0]}çš„æ—‹å¾‹`,
                    `${imagery[1]}åœ¨${expressions[1]} å‘${keywords[1]}${expressions[2]}`
                ];
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `${imagery[0]}ä¸­${expressions[0]} ${keywords[0]}çš„æ—‹å¾‹`,
                    `${imagery[1]}åœ¨${expressions[1]} å‘${keywords[1]}${expressions[2]}`
                ];
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `In the ${imagery[0]} ${keywords[0]} ${expressions[0]}`,
                    `${imagery[1]} ${expressions[1]} towards ${keywords[1]} ${expressions[2]}`
                ];
            } else {
                // Japanese (default)
                lines = [
                    `${imagery[0]}ã«${expressions[0]} ${keywords[0]}ã®èª¿ã¹`,
                    `${imagery[1]}ãŒ${expressions[1]}ã¦ ${keywords[1]}ã«${expressions[2]}`
                ];
            }
            
            return lines.join('<br>');
        }
        
        // Verseç”¨æ­Œè©ç”Ÿæˆï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰
        function generateVerseContent(keywords, imagery, expressions, params) {
            const lines = [];
            const lineCount = params.languageLevel === 'ä¸Šç´š' ? 8 : 6;
            
            for (let i = 0; i < lineCount; i++) {
                const keyword = keywords[i % keywords.length];
                const img = imagery[i % imagery.length];
                const expr = expressions[i % expressions.length];
                
                let line = '';
                if (selectedPromptLanguage === 'cantonese') {
                    if (i % 2 === 0) {
                        line = `${img}çš„å½¼æ–¹ ${keyword}åœ¨${expr}`;
                    } else {
                        line = `${keyword}${expr}è‘— å‘${img}å‰é€²`;
                    }
                } else if (selectedPromptLanguage === 'chinese') {
                    if (i % 2 === 0) {
                        line = `${img}çš„å½¼æ–¹ ${keyword}åœ¨${expr}`;
                    } else {
                        line = `${keyword}${expr}ç€ å‘${img}å‰è¿›`;
                    }
                } else if (selectedPromptLanguage === 'english') {
                    if (i % 2 === 0) {
                        line = `Beyond the ${img} ${keyword} ${expr}`;
                    } else {
                        line = `${expr} the ${keyword} towards ${img}`;
                    }
                } else {
                    // Japanese (default)
                    if (i % 2 === 0) {
                        line = `${img}ã®å‘ã“ã†ã« ${keyword}ãŒ${expr}`;
                    } else {
                        line = `${keyword}ã‚’${expr}ã¦ ${img}ã¸ã¨å‘ã‹ã†`;
                    }
                }
                
                lines.push(line);
            }
            
            return lines.join('<br>');
        }
        
        // Chorusç”¨æ­Œè©ç”Ÿæˆï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰
        function generateChorusContent(keywords, expressions, params) {
            const theme = params.theme;
            const emotion = params.emotion;
            const intensity = parseInt(params.emotionIntensity);
            
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `${keywords[0]}åœ¨${expressions[0]} å¿ƒä¸­${expressions[1]}è‘—`,
                    `ç„¡è«–ä»€éº¼å›°é›£ä¾†è‡¨ éƒ½ä¸æœƒ${expressions[2]}`,
                    `æ‡·è‘—${theme} ${keywords[1]}${expressions[3]}`,
                    `å°‡é€™${keywords[2]}èå…¥æ­Œè² å‘å¤©ç©º${expressions[4]}`
                ];
                
                if (intensity > 70) {
                    lines.push(`æƒ³è¦å‚³é”çµ¦å…¨ä¸–ç•Œ é€™${emotion}çš„æ—‹å¾‹`);
                    lines.push(`å› ç‚ºæœ‰${keywords[3]} æˆ‘èƒ½å¤ ${expressions[0]}`);
                }
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `${keywords[0]}åœ¨${expressions[0]} å¿ƒä¸­${expressions[1]}ç€`,
                    `æ— è®ºä»€ä¹ˆå›°éš¾æ¥ä¸´ éƒ½ä¸ä¼š${expressions[2]}`,
                    `æ€€ç€${theme} ${keywords[1]}${expressions[3]}`,
                    `å°†è¿™${keywords[2]}èå…¥æ­Œå£° å‘å¤©ç©º${expressions[4]}`
                ];
                
                if (intensity > 70) {
                    lines.push(`æƒ³è¦ä¼ è¾¾ç»™å…¨ä¸–ç•Œ è¿™${emotion}çš„æ—‹å¾‹`);
                    lines.push(`å› ä¸ºæœ‰${keywords[3]} æˆ‘èƒ½å¤Ÿ${expressions[0]}`);
                }
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `${keywords[0]} ${expressions[0]} in my heart ${expressions[1]}`,
                    `No matter what difficulties come, I won't ${expressions[2]}`,
                    `With ${theme} in my chest, ${expressions[3]} the ${keywords[1]}`,
                    `Put this ${keywords[2]} into song and ${expressions[4]} to the sky`
                ];
                
                if (intensity > 70) {
                    lines.push(`Want to reach the whole world with this melody of ${emotion}`);
                    lines.push(`Because I have ${keywords[3]}, I can ${expressions[0]}`);
                }
            } else {
                // Japanese (default)
                lines = [
                    `${keywords[0]}ã¯${expressions[0]} å¿ƒã«${expressions[1]}ã¦`,
                    `ã©ã‚“ãªå›°é›£ãŒæ¥ã¦ã‚‚ ${expressions[2]}ã“ã¨ã¯ãªã„`,
                    `${theme}ã‚’èƒ¸ã« ${keywords[1]}ã‚’${expressions[3]}`,
                    `ã“ã®${keywords[2]}ã‚’æ­Œã«è¾¼ã‚ã¦ ç©ºã«${expressions[4]}ã‚ˆã†`
                ];
                
                if (intensity > 70) {
                    lines.push(`ä¸–ç•Œä¸­ã«å±Šã‘ãŸã„ ã“ã®${emotion}ã®èª¿ã¹ã‚’`);
                    lines.push(`${keywords[3]}ãŒã‚ã‚‹ã‹ã‚‰ åƒ•ã¯${expressions[0]}ãªã‚Œã‚‹`);
                }
            }
            
            return lines.join('<br>');
        }
        
        // Bridgeç”¨æ­Œè©ç”Ÿæˆï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰
        function generateBridgeContent(keywords, imagery, expressions, params) {
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `ä»°æœ›${imagery[4] || 'æ˜Ÿç©º'} è¨±ä¸‹${keywords[5] || 'æ‰¿è«¾'}`,
                    `ä»»ä½•å›°é›£ åªè¦${expressions[1]}å°±èƒ½å…‹æœ`,
                    `æ‰‹ç‰½æ‰‹${expressions[2]} ä¸€èµ·${expressions[3]}å‰é€²`,
                    `ç‚ºäº†è­‰æ˜${keywords[0]}çš„${keywords[1]}`
                ];
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `ä»°æœ›${imagery[4] || 'æ˜Ÿç©º'} è®¸ä¸‹${keywords[5] || 'æ‰¿è¯º'}`,
                    `ä»»ä½•å›°éš¾ åªè¦${expressions[1]}å°±èƒ½å…‹æœ`,
                    `æ‰‹ç‰µæ‰‹${expressions[2]} ä¸€èµ·${expressions[3]}å‰è¿›`,
                    `ä¸ºäº†è¯æ˜${keywords[0]}çš„${keywords[1]}`
                ];
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `Looking up at the ${imagery[4] || 'starry sky'} making a ${keywords[5] || 'promise'}`,
                    `Any difficulty can be overcome if we ${expressions[1]}`,
                    `Holding hands ${expressions[2]} let's ${expressions[3]} together`,
                    `To prove the ${keywords[1]} of ${keywords[0]}`
                ];
            } else {
                // Japanese (default)
                lines = [
                    `${imagery[4] || 'æ˜Ÿç©º'}ã‚’è¦‹ä¸Šã’ã¦ èª“ã£ãŸ${keywords[5] || 'ç´„æŸ'}`,
                    `ã©ã‚“ãªå›°é›£ã‚‚ ${expressions[1]}ãªã‚‰ä¹—ã‚Šè¶Šãˆã‚‰ã‚Œã‚‹`,
                    `${expressions[2]}ã‚’å–ã‚Šåˆã£ã¦ ${expressions[3]}ã„ã¦ã„ã“ã†`,
                    `${keywords[0]}ã®${keywords[1]}ã‚’ è¨¼æ˜ã™ã‚‹ãŸã‚ã«`
                ];
            }
            
            return lines.join('<br>');
        }
        
        // Outroç”¨æ­Œè©ç”Ÿæˆï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰
        function generateOutroContent(keywords, imagery, expressions, intensity) {
            let lines = [];
            
            if (selectedPromptLanguage === 'cantonese') {
                lines = [
                    `åœ¨${imagery[0]}ä¸­éŸ¿èµ· ${keywords[0]}çš„æ—‹å¾‹`,
                    `${keywords[1]}ä¹˜è‘—${imagery[1]} æ°¸é ${expressions[0]}`
                ];
            } else if (selectedPromptLanguage === 'chinese') {
                lines = [
                    `åœ¨${imagery[0]}ä¸­å“èµ· ${keywords[0]}çš„æ—‹å¾‹`,
                    `${keywords[1]}ä¹˜ç€${imagery[1]} æ°¸è¿œ${expressions[0]}`
                ];
            } else if (selectedPromptLanguage === 'english') {
                lines = [
                    `Echoing in the ${imagery[0]} melody of ${keywords[0]}`,
                    `${keywords[1]} riding on ${imagery[1]} forever ${expressions[0]}`
                ];
            } else {
                // Japanese (default)
                lines = [
                    `${imagery[0]}ã«éŸ¿ã ${keywords[0]}ã®æ—‹å¾‹`,
                    `${keywords[1]}ãŒ${imagery[1]}ã«ä¹—ã£ã¦ æ°¸é ã«${expressions[0]}`
                ];
            }
            
            return lines.join('<br>');
        }
        
        // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
        function calculateProScores(params) {
            const baseScore = 70;
            const emotionBonus = Math.floor(params.emotionIntensity / 10);
            const metaphorBonus = Math.floor(params.metaphorUsage / 20);
            const complexityBonus = params.languageLevel === 'ä¸Šç´š' ? 15 : params.languageLevel === 'ä¸­ç´š' ? 10 : 5;
            
            return {
                emotion: Math.min(95, baseScore + emotionBonus + Math.random() * 10),
                language: Math.min(95, baseScore + complexityBonus + Math.random() * 10),
                originality: Math.min(95, baseScore + metaphorBonus + Math.random() * 15),
                musical: Math.min(95, baseScore + (params.rhymePattern !== 'ãªã—' ? 10 : 0) + Math.random() * 10)
            };
        }
        
        // Proã‚¹ã‚³ã‚¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateProScore(elementId, targetScore) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            let currentScore = 0;
            const increment = targetScore / 30;
            
            const timer = setInterval(() => {
                currentScore += increment;
                if (currentScore >= targetScore) {
                    currentScore = targetScore;
                    clearInterval(timer);
                }
                element.textContent = Math.round(currentScore);
            }, 50);
        }
        
        // Proæ§‹æˆå¤‰æ›´é©ç”¨
        function applyProStructureChanges() {
            const params = getProLyricsParameters();
            const message = `Proæ§‹æˆå¤‰æ›´ãŒé©ç”¨ã•ã‚Œã¾ã—ãŸï¼
            
è¨­å®šå†…å®¹:
â€¢ Verseæ•°: ${params.verseCount}
â€¢ Chorusæ•°: ${params.chorusCount}
â€¢ Bridge: ${params.bridgeInclude ? 'ã‚ã‚Š' : 'ãªã—'}
â€¢ Intro: ${params.introInclude ? 'ã‚ã‚Š' : 'ãªã—'}
â€¢ Outro: ${params.outroInclude ? 'ã‚ã‚Š' : 'ãªã—'}

æ–°ã—ã„æ§‹æˆã§æ­Œè©ã‚’å†ç”Ÿæˆã—ã¾ã™ã€‚`;
            
            alert(message);
            generateProLyrics();
        }
        
        // Pro URLåˆ†æ
        function analyzeURL() {
            const urlInput = document.getElementById('pro-literary-url');
            const url = urlInput ? urlInput.value : '';
            
            if (!url) {
                alert('URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (analysis) {
                analysis.classList.remove('hidden');
                analysis.innerHTML = `
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-800 mb-2">æ–‡å­¦çš„è¦ç´ åˆ†æçµæœ</h4>
                        <p class="text-sm text-gray-600">åˆ†æå¯¾è±¡: ${url}</p>
                        <div class="mt-3 space-y-2">
                            <p><strong>ãƒ†ãƒ¼ãƒ:</strong> äººç”Ÿã®æ—…è·¯ã€æˆé•·ã¨å¤‰åŒ–</p>
                            <p><strong>æ–‡ä½“:</strong> å™æƒ…çš„ã€æ¯”å–©è±Šå¯Œ</p>
                            <p><strong>æ„Ÿæƒ…åŸºèª¿:</strong> å¸Œæœ›çš„ã€å†…çœçš„</p>
                            <p><strong>æ¨å¥¨ã‚¸ãƒ£ãƒ³ãƒ«:</strong> ãƒ•ã‚©ãƒ¼ã‚¯ã€ãƒãƒ©ãƒ¼ãƒ‰</p>
                        </div>
                    </div>
                `;
            }
            alert('URL ã‹ã‚‰é«˜åº¦ãªæ–‡å­¦çš„è¦ç´ ãŒåˆ†æã•ã‚Œã¾ã—ãŸï¼\nåˆ†æçµæœã‚’æ­Œè©ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åæ˜ ã§ãã¾ã™ã€‚');
        }
        
        // Pro ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æ
        function analyzeFile() {
            const fileInput = document.getElementById('pro-literary-file');
            const file = fileInput ? fileInput.files[0] : null;
            
            if (!file) {
                alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (analysis) {
                analysis.classList.remove('hidden');
                analysis.innerHTML = `
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-800 mb-2">æ–‡å­¦çš„è¦ç´ åˆ†æçµæœ</h4>
                        <p class="text-sm text-gray-600">åˆ†æå¯¾è±¡: ${file.name}</p>
                        <div class="mt-3 space-y-2">
                            <p><strong>ãƒ†ãƒ¼ãƒ:</strong> æ„›ã¨åˆ¥ã‚Œã€æ™‚ã®æµã‚Œ</p>
                            <p><strong>æ–‡ä½“:</strong> å¤å…¸çš„ã€æ ¼èª¿é«˜ã„</p>
                            <p><strong>æ„Ÿæƒ…åŸºèª¿:</strong> éƒ·æ„çš„ã€ç¾çš„</p>
                            <p><strong>æ¨å¥¨ã‚¸ãƒ£ãƒ³ãƒ«:</strong> ã‚¯ãƒ©ã‚·ãƒƒã‚¯ã€ã‚¸ãƒ£ã‚º</p>
                        </div>
                    </div>
                `;
            }
            alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰é«˜åº¦ãªæ–‡å­¦çš„è¦ç´ ãŒåˆ†æã•ã‚Œã¾ã—ãŸï¼\nåˆ†æçµæœã‚’æ­Œè©ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åæ˜ ã§ãã¾ã™ã€‚');
        }
        
        // Pro ä½œå“æ¤œç´¢
        function searchWork() {
            const searchInput = document.getElementById('pro-literary-search');
            const searchTerm = searchInput ? searchInput.value : '';
            
            if (!searchTerm) {
                alert('ä½œå“åã¾ãŸã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (analysis) {
                analysis.classList.remove('hidden');
                analysis.innerHTML = `
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-purple-800 mb-2">æ–‡å­¦çš„è¦ç´ åˆ†æçµæœ</h4>
                        <p class="text-sm text-gray-600">æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: "${searchTerm}"</p>
                        <div class="mt-3 space-y-2">
                            <p><strong>é–¢é€£ä½œå“:</strong> é¡ä¼¼ãƒ†ãƒ¼ãƒã®æ–‡å­¦ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</p>
                            <p><strong>ãƒ†ãƒ¼ãƒ:</strong> è‡ªç„¶ã¨äººé–“ã€å­£ç¯€ã®ç§»ã‚ã„</p>
                            <p><strong>æ–‡ä½“:</strong> è©©çš„ã€è±¡å¾´çš„</p>
                            <p><strong>æ„Ÿæƒ…åŸºèª¿:</strong> é™è¬ã€ç‘æƒ³çš„</p>
                            <p><strong>æ¨å¥¨ã‚¸ãƒ£ãƒ³ãƒ«:</strong> ã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆã€ãƒ‹ãƒ¥ãƒ¼ã‚¨ã‚¤ã‚¸</p>
                        </div>
                    </div>
                `;
            }
            alert(`"${searchTerm}" ã«é–¢é€£ã™ã‚‹ä½œå“ãŒæ¤œç´¢ã•ã‚Œã€é«˜åº¦ãªæ–‡å­¦çš„è¦ç´ ãŒåˆ†æã•ã‚Œã¾ã—ãŸï¼\nåˆ†æçµæœã‚’æ­Œè©ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åæ˜ ã§ãã¾ã™ã€‚`);
        }
        
        // Pro æ–‡å­¦çš„è¦ç´ é©ç”¨
        function applyLiteraryElements() {
            const analysis = document.getElementById('proLiteraryAnalysis');
            if (!analysis || analysis.classList.contains('hidden')) {
                alert('ã¾ãšæ–‡å­¦ä½œå“ã®åˆ†æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // åˆ†æçµæœã«åŸºã¥ã„ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è‡ªå‹•è¨­å®š
            const themeSelect = document.getElementById('pro-theme');
            const genreSelect = document.getElementById('pro-genre');
            const emotionSelect = document.getElementById('pro-emotion');
            const languageLevelSelect = document.getElementById('pro-language-level');
            const metaphorSlider = document.getElementById('pro-metaphor');
            
            if (themeSelect) themeSelect.value = 'æˆé•·';
            if (genreSelect) genreSelect.value = 'ãƒ•ã‚©ãƒ¼ã‚¯';
            if (emotionSelect) emotionSelect.value = 'å¸Œæœ›';
            if (languageLevelSelect) languageLevelSelect.value = 'è©©çš„è¡¨ç¾';
            if (metaphorSlider) metaphorSlider.value = 8;
            
            alert('é«˜åº¦ãªæ–‡å­¦çš„è¦ç´ ãŒProæ­Œè©ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«é©ç”¨ã•ã‚Œã¾ã—ãŸï¼\n\né©ç”¨ã•ã‚ŒãŸè¨­å®š:\nâ€¢ ãƒ†ãƒ¼ãƒ: æˆé•·\nâ€¢ ã‚¸ãƒ£ãƒ³ãƒ«: ãƒ•ã‚©ãƒ¼ã‚¯\nâ€¢ æ„Ÿæƒ…: å¸Œæœ›\nâ€¢ è¨€èªãƒ¬ãƒ™ãƒ«: è©©çš„è¡¨ç¾\nâ€¢ æ¯”å–©ä½¿ç”¨åº¦: 8/10\n\nã€ŒProæ­Œè©ã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã§æ–°ã—ã„æ­Œè©ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚');
        }
        
        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½
        function initPromptSectionDrag() {
            const promptSection = document.getElementById('prompt-section');
            const dragHandle = promptSection.querySelector('.drag-handle');
            
            let isDragging = false;
            let dragOffsetX = 0;
            let dragOffsetY = 0;
            
            // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ
            dragHandle.addEventListener('mousedown', function(e) {
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'I') return;
                
                isDragging = true;
                promptSection.classList.add('dragging');
                
                const rect = promptSection.getBoundingClientRect();
                dragOffsetX = e.clientX - rect.left;
                dragOffsetY = e.clientY - rect.top;
                
                e.preventDefault();
            });
            
            document.addEventListener('mousemove', function(e) {
                if (!isDragging) return;
                
                const x = e.clientX - dragOffsetX;
                const y = e.clientY - dragOffsetY;
                
                movePromptSection(x, y);
            });
            
            document.addEventListener('mouseup', function() {
                if (isDragging) {
                    isDragging = false;
                    promptSection.classList.remove('dragging');
                }
            });
            
            // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆ
            dragHandle.addEventListener('touchstart', function(e) {
                if (e.target.tagName === 'BUTTON' || e.target.tagName === 'I') return;
                
                isDragging = true;
                promptSection.classList.add('dragging');
                
                const rect = promptSection.getBoundingClientRect();
                const touch = e.touches[0];
                dragOffsetX = touch.clientX - rect.left;
                dragOffsetY = touch.clientY - rect.top;
                
                e.preventDefault();
            });
            
            document.addEventListener('touchmove', function(e) {
                if (!isDragging) return;
                
                const touch = e.touches[0];
                const x = touch.clientX - dragOffsetX;
                const y = touch.clientY - dragOffsetY;
                
                movePromptSection(x, y);
                e.preventDefault();
            });
            
            document.addEventListener('touchend', function() {
                if (isDragging) {
                    isDragging = false;
                    promptSection.classList.remove('dragging');
                }
            });
        }
        
        function movePromptSection(x, y) {
            const promptSection = document.getElementById('prompt-section');
            const rect = promptSection.getBoundingClientRect();
            
            // ç”»é¢ã®å¢ƒç•Œå†…ã«åˆ¶é™
            const maxX = window.innerWidth - rect.width;
            const maxY = window.innerHeight - rect.height;
            
            x = Math.max(0, Math.min(x, maxX));
            y = Math.max(0, Math.min(y, maxY));
            
            // positionã‚’fixedã«è¨­å®šã—ã€ä½ç½®ã‚’æ›´æ–°
            promptSection.style.left = x + 'px';
            promptSection.style.top = y + 'px';
            promptSection.style.right = 'auto';
            promptSection.style.bottom = 'auto';
        }
        
        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚ŒãŸã¨ãã«ãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½ã‚’åˆæœŸåŒ–
        function showPromptSection() {
            const promptSection = document.getElementById('prompt-section');
            promptSection.style.display = 'block';
            
            // ãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½ã‚’åˆæœŸåŒ–ï¼ˆåˆå›ã®ã¿ï¼‰
            if (!promptSection.hasAttribute('data-drag-initialized')) {
                initPromptSectionDrag();
                promptSection.setAttribute('data-drag-initialized', 'true');
            }
        }
        
        // æ—¢å­˜ã®updatePrompté–¢æ•°ã‚’ä¿®æ­£ã—ã¦ãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½ã‚’å«ã‚ã‚‹
        const originalUpdatePrompt = window.updatePrompt;
        window.updatePrompt = function() {
            if (originalUpdatePrompt) originalUpdatePrompt();
            
            const promptSection = document.getElementById('prompt-section');
            if (promptSection && promptSection.style.display !== 'none') {
                showPromptSection();
            }
        };
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½ã‚’åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const promptSection = document.getElementById('prompt-section');
            if (promptSection) {
                initPromptSectionDrag();
                promptSection.setAttribute('data-drag-initialized', 'true');
            }
        });
    </script>
</body>
</html>
